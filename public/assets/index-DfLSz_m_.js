var Xf=r=>{throw TypeError(r)};var ud=(r,n,c)=>n.has(r)||Xf("Cannot "+c);var O=(r,n,c)=>(ud(r,n,"read from private field"),c?c.call(r):n.get(r)),ye=(r,n,c)=>n.has(r)?Xf("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(r):n.set(r,c),de=(r,n,c,d)=>(ud(r,n,"write to private field"),d?d.call(r,c):n.set(r,c),c),Te=(r,n,c)=>(ud(r,n,"access private method"),c);var Bi=(r,n,c,d)=>({set _(u){de(r,n,u,c)},get _(){return O(r,n,d)}});(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))d(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const x of f.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&d(x)}).observe(document,{childList:!0,subtree:!0});function c(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function d(u){if(u.ep)return;u.ep=!0;const f=c(u);fetch(u.href,f)}})();function Lh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var md={exports:{}},cn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf;function wy(){if(Vf)return cn;Vf=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function c(d,u,f){var x=null;if(f!==void 0&&(x=""+f),u.key!==void 0&&(x=""+u.key),"key"in u){f={};for(var b in u)b!=="key"&&(f[b]=u[b])}else f=u;return u=f.ref,{$$typeof:r,type:d,key:x,ref:u!==void 0?u:null,props:f}}return cn.Fragment=n,cn.jsx=c,cn.jsxs=c,cn}var Zf;function Ny(){return Zf||(Zf=1,md.exports=wy()),md.exports}var s=Ny(),fd={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf;function Sy(){if(Kf)return ve;Kf=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),E=Symbol.iterator;function S(A){return A===null||typeof A!="object"?null:(A=E&&A[E]||A["@@iterator"],typeof A=="function"?A:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,M={};function D(A,w,Z){this.props=A,this.context=w,this.refs=M,this.updater=Z||z}D.prototype.isReactComponent={},D.prototype.setState=function(A,w){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,w,"setState")},D.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function L(){}L.prototype=D.prototype;function T(A,w,Z){this.props=A,this.context=w,this.refs=M,this.updater=Z||z}var C=T.prototype=new L;C.constructor=T,j(C,D.prototype),C.isPureReactComponent=!0;var V=Array.isArray;function R(){}var $={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function ie(A,w,Z){var ee=Z.ref;return{$$typeof:r,type:A,key:w,ref:ee!==void 0?ee:null,props:Z}}function H(A,w){return ie(A.type,w,A.props)}function P(A){return typeof A=="object"&&A!==null&&A.$$typeof===r}function I(A){var w={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(Z){return w[Z]})}var Y=/\/+/g;function ce(A,w){return typeof A=="object"&&A!==null&&A.key!=null?I(""+A.key):w.toString(36)}function pe(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(R,R):(A.status="pending",A.then(function(w){A.status==="pending"&&(A.status="fulfilled",A.value=w)},function(w){A.status==="pending"&&(A.status="rejected",A.reason=w)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function F(A,w,Z,ee,le){var ge=typeof A;(ge==="undefined"||ge==="boolean")&&(A=null);var be=!1;if(A===null)be=!0;else switch(ge){case"bigint":case"string":case"number":be=!0;break;case"object":switch(A.$$typeof){case r:case n:be=!0;break;case k:return be=A._init,F(be(A._payload),w,Z,ee,le)}}if(be)return le=le(A),be=ee===""?"."+ce(A,0):ee,V(le)?(Z="",be!=null&&(Z=be.replace(Y,"$&/")+"/"),F(le,w,Z,"",function(re){return re})):le!=null&&(P(le)&&(le=H(le,Z+(le.key==null||A&&A.key===le.key?"":(""+le.key).replace(Y,"$&/")+"/")+be)),w.push(le)),1;be=0;var Ie=ee===""?".":ee+":";if(V(A))for(var Qe=0;Qe<A.length;Qe++)ee=A[Qe],ge=Ie+ce(ee,Qe),be+=F(ee,w,Z,ge,le);else if(Qe=S(A),typeof Qe=="function")for(A=Qe.call(A),Qe=0;!(ee=A.next()).done;)ee=ee.value,ge=Ie+ce(ee,Qe++),be+=F(ee,w,Z,ge,le);else if(ge==="object"){if(typeof A.then=="function")return F(pe(A),w,Z,ee,le);throw w=String(A),Error("Objects are not valid as a React child (found: "+(w==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":w)+"). If you meant to render a collection of children, use an array instead.")}return be}function te(A,w,Z){if(A==null)return A;var ee=[],le=0;return F(A,ee,"","",function(ge){return w.call(Z,ge,le++)}),ee}function G(A){if(A._status===-1){var w=A._result;w=w(),w.then(function(Z){(A._status===0||A._status===-1)&&(A._status=1,A._result=Z)},function(Z){(A._status===0||A._status===-1)&&(A._status=2,A._result=Z)}),A._status===-1&&(A._status=0,A._result=w)}if(A._status===1)return A._result.default;throw A._result}var oe=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var w=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(w))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},fe={map:te,forEach:function(A,w,Z){te(A,function(){w.apply(this,arguments)},Z)},count:function(A){var w=0;return te(A,function(){w++}),w},toArray:function(A){return te(A,function(w){return w})||[]},only:function(A){if(!P(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return ve.Activity=v,ve.Children=fe,ve.Component=D,ve.Fragment=c,ve.Profiler=u,ve.PureComponent=T,ve.StrictMode=d,ve.Suspense=p,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,ve.__COMPILER_RUNTIME={__proto__:null,c:function(A){return $.H.useMemoCache(A)}},ve.cache=function(A){return function(){return A.apply(null,arguments)}},ve.cacheSignal=function(){return null},ve.cloneElement=function(A,w,Z){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var ee=j({},A.props),le=A.key;if(w!=null)for(ge in w.key!==void 0&&(le=""+w.key),w)!se.call(w,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&w.ref===void 0||(ee[ge]=w[ge]);var ge=arguments.length-2;if(ge===1)ee.children=Z;else if(1<ge){for(var be=Array(ge),Ie=0;Ie<ge;Ie++)be[Ie]=arguments[Ie+2];ee.children=be}return ie(A.type,le,ee)},ve.createContext=function(A){return A={$$typeof:x,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:f,_context:A},A},ve.createElement=function(A,w,Z){var ee,le={},ge=null;if(w!=null)for(ee in w.key!==void 0&&(ge=""+w.key),w)se.call(w,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(le[ee]=w[ee]);var be=arguments.length-2;if(be===1)le.children=Z;else if(1<be){for(var Ie=Array(be),Qe=0;Qe<be;Qe++)Ie[Qe]=arguments[Qe+2];le.children=Ie}if(A&&A.defaultProps)for(ee in be=A.defaultProps,be)le[ee]===void 0&&(le[ee]=be[ee]);return ie(A,ge,le)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(A){return{$$typeof:b,render:A}},ve.isValidElement=P,ve.lazy=function(A){return{$$typeof:k,_payload:{_status:-1,_result:A},_init:G}},ve.memo=function(A,w){return{$$typeof:y,type:A,compare:w===void 0?null:w}},ve.startTransition=function(A){var w=$.T,Z={};$.T=Z;try{var ee=A(),le=$.S;le!==null&&le(Z,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(R,oe)}catch(ge){oe(ge)}finally{w!==null&&Z.types!==null&&(w.types=Z.types),$.T=w}},ve.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},ve.use=function(A){return $.H.use(A)},ve.useActionState=function(A,w,Z){return $.H.useActionState(A,w,Z)},ve.useCallback=function(A,w){return $.H.useCallback(A,w)},ve.useContext=function(A){return $.H.useContext(A)},ve.useDebugValue=function(){},ve.useDeferredValue=function(A,w){return $.H.useDeferredValue(A,w)},ve.useEffect=function(A,w){return $.H.useEffect(A,w)},ve.useEffectEvent=function(A){return $.H.useEffectEvent(A)},ve.useId=function(){return $.H.useId()},ve.useImperativeHandle=function(A,w,Z){return $.H.useImperativeHandle(A,w,Z)},ve.useInsertionEffect=function(A,w){return $.H.useInsertionEffect(A,w)},ve.useLayoutEffect=function(A,w){return $.H.useLayoutEffect(A,w)},ve.useMemo=function(A,w){return $.H.useMemo(A,w)},ve.useOptimistic=function(A,w){return $.H.useOptimistic(A,w)},ve.useReducer=function(A,w,Z){return $.H.useReducer(A,w,Z)},ve.useRef=function(A){return $.H.useRef(A)},ve.useState=function(A){return $.H.useState(A)},ve.useSyncExternalStore=function(A,w,Z){return $.H.useSyncExternalStore(A,w,Z)},ve.useTransition=function(){return $.H.useTransition()},ve.version="19.2.0",ve}var If;function qd(){return If||(If=1,fd.exports=Sy()),fd.exports}var g=qd();const nr=Lh(g);var hd={exports:{}},dn={},gd={exports:{}},xd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf;function ky(){return Jf||(Jf=1,(function(r){function n(F,te){var G=F.length;F.push(te);e:for(;0<G;){var oe=G-1>>>1,fe=F[oe];if(0<u(fe,te))F[oe]=te,F[G]=fe,G=oe;else break e}}function c(F){return F.length===0?null:F[0]}function d(F){if(F.length===0)return null;var te=F[0],G=F.pop();if(G!==te){F[0]=G;e:for(var oe=0,fe=F.length,A=fe>>>1;oe<A;){var w=2*(oe+1)-1,Z=F[w],ee=w+1,le=F[ee];if(0>u(Z,G))ee<fe&&0>u(le,Z)?(F[oe]=le,F[ee]=G,oe=ee):(F[oe]=Z,F[w]=G,oe=w);else if(ee<fe&&0>u(le,G))F[oe]=le,F[ee]=G,oe=ee;else break e}}return te}function u(F,te){var G=F.sortIndex-te.sortIndex;return G!==0?G:F.id-te.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var x=Date,b=x.now();r.unstable_now=function(){return x.now()-b}}var p=[],y=[],k=1,v=null,E=3,S=!1,z=!1,j=!1,M=!1,D=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function C(F){for(var te=c(y);te!==null;){if(te.callback===null)d(y);else if(te.startTime<=F)d(y),te.sortIndex=te.expirationTime,n(p,te);else break;te=c(y)}}function V(F){if(j=!1,C(F),!z)if(c(p)!==null)z=!0,R||(R=!0,I());else{var te=c(y);te!==null&&pe(V,te.startTime-F)}}var R=!1,$=-1,se=5,ie=-1;function H(){return M?!0:!(r.unstable_now()-ie<se)}function P(){if(M=!1,R){var F=r.unstable_now();ie=F;var te=!0;try{e:{z=!1,j&&(j=!1,L($),$=-1),S=!0;var G=E;try{t:{for(C(F),v=c(p);v!==null&&!(v.expirationTime>F&&H());){var oe=v.callback;if(typeof oe=="function"){v.callback=null,E=v.priorityLevel;var fe=oe(v.expirationTime<=F);if(F=r.unstable_now(),typeof fe=="function"){v.callback=fe,C(F),te=!0;break t}v===c(p)&&d(p),C(F)}else d(p);v=c(p)}if(v!==null)te=!0;else{var A=c(y);A!==null&&pe(V,A.startTime-F),te=!1}}break e}finally{v=null,E=G,S=!1}te=void 0}}finally{te?I():R=!1}}}var I;if(typeof T=="function")I=function(){T(P)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ce=Y.port2;Y.port1.onmessage=P,I=function(){ce.postMessage(null)}}else I=function(){D(P,0)};function pe(F,te){$=D(function(){F(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_next=function(F){switch(E){case 1:case 2:case 3:var te=3;break;default:te=E}var G=E;E=te;try{return F()}finally{E=G}},r.unstable_requestPaint=function(){M=!0},r.unstable_runWithPriority=function(F,te){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var G=E;E=F;try{return te()}finally{E=G}},r.unstable_scheduleCallback=function(F,te,G){var oe=r.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?oe+G:oe):G=oe,F){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=G+fe,F={id:k++,callback:te,priorityLevel:F,startTime:G,expirationTime:fe,sortIndex:-1},G>oe?(F.sortIndex=G,n(y,F),c(p)===null&&F===c(y)&&(j?(L($),$=-1):j=!0,pe(V,G-oe))):(F.sortIndex=fe,n(p,F),z||S||(z=!0,R||(R=!0,I()))),F},r.unstable_shouldYield=H,r.unstable_wrapCallback=function(F){var te=E;return function(){var G=E;E=te;try{return F.apply(this,arguments)}finally{E=G}}}})(xd)),xd}var $f;function Cy(){return $f||($f=1,gd.exports=ky()),gd.exports}var yd={exports:{}},bt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf;function Dy(){if(Pf)return bt;Pf=1;var r=qd();function n(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var k=2;k<arguments.length;k++)y+="&args[]="+encodeURIComponent(arguments[k])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var d={d:{f:c,r:function(){throw Error(n(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},u=Symbol.for("react.portal");function f(p,y,k){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:v==null?null:""+v,children:p,containerInfo:y,implementation:k}}var x=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,bt.createPortal=function(p,y){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return f(p,y,null,k)},bt.flushSync=function(p){var y=x.T,k=d.p;try{if(x.T=null,d.p=2,p)return p()}finally{x.T=y,d.p=k,d.d.f()}},bt.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,d.d.C(p,y))},bt.prefetchDNS=function(p){typeof p=="string"&&d.d.D(p)},bt.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var k=y.as,v=b(k,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,S=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;k==="style"?d.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:S}):k==="script"&&d.d.X(p,{crossOrigin:v,integrity:E,fetchPriority:S,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},bt.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var k=b(y.as,y.crossOrigin);d.d.M(p,{crossOrigin:k,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&d.d.M(p)},bt.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var k=y.as,v=b(k,y.crossOrigin);d.d.L(p,k,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},bt.preloadModule=function(p,y){if(typeof p=="string")if(y){var k=b(y.as,y.crossOrigin);d.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:k,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else d.d.m(p)},bt.requestFormReset=function(p){d.d.r(p)},bt.unstable_batchedUpdates=function(p,y){return p(y)},bt.useFormState=function(p,y,k){return x.H.useFormState(p,y,k)},bt.useFormStatus=function(){return x.H.useHostTransitionStatus()},bt.version="19.2.0",bt}var Wf;function Ay(){if(Wf)return yd.exports;Wf=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),yd.exports=Dy(),yd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eh;function Ty(){if(eh)return dn;eh=1;var r=Cy(),n=qd(),c=Ay();function d(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function x(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(d(188))}function y(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(d(188));return t!==e?null:e}for(var a=e,l=t;;){var i=a.return;if(i===null)break;var o=i.alternate;if(o===null){if(l=i.return,l!==null){a=l;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===a)return p(i),e;if(o===l)return p(i),t;o=o.sibling}throw Error(d(188))}if(a.return!==l.return)a=i,l=o;else{for(var m=!1,h=i.child;h;){if(h===a){m=!0,a=i,l=o;break}if(h===l){m=!0,l=i,a=o;break}h=h.sibling}if(!m){for(h=o.child;h;){if(h===a){m=!0,a=o,l=i;break}if(h===l){m=!0,l=o,a=i;break}h=h.sibling}if(!m)throw Error(d(189))}}if(a.alternate!==l)throw Error(d(190))}if(a.tag!==3)throw Error(d(188));return a.stateNode.current===a?e:t}function k(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=k(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function I(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var Y=Symbol.for("react.client.reference");function ce(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Y?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case j:return"Fragment";case D:return"Profiler";case M:return"StrictMode";case V:return"Suspense";case R:return"SuspenseList";case ie:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case z:return"Portal";case T:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case C:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return t=e.displayName||null,t!==null?t:ce(e.type)||"Memo";case se:t=e._payload,e=e._init;try{return ce(e(t))}catch{}}return null}var pe=Array.isArray,F=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},oe=[],fe=-1;function A(e){return{current:e}}function w(e){0>fe||(e.current=oe[fe],oe[fe]=null,fe--)}function Z(e,t){fe++,oe[fe]=e.current,e.current=t}var ee=A(null),le=A(null),ge=A(null),be=A(null);function Ie(e,t){switch(Z(ge,t),Z(le,e),Z(ee,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?hf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=hf(t),e=gf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}w(ee),Z(ee,e)}function Qe(){w(ee),w(le),w(ge)}function re(e){e.memoizedState!==null&&Z(be,e);var t=ee.current,a=gf(t,e.type);t!==a&&(Z(le,e),Z(ee,a))}function ot(e){le.current===e&&(w(ee),w(le)),be.current===e&&(w(be),ln._currentValue=G)}var cr,nl;function ha(e){if(cr===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);cr=t&&t[1]||"",nl=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cr+e+nl}var dr=!1;function Cs(e,t){if(!e||dr)return"";dr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(X){var Q=X}Reflect.construct(e,[],W)}else{try{W.call()}catch(X){Q=X}e.call(W.prototype)}}else{try{throw Error()}catch(X){Q=X}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(X){if(X&&Q&&typeof X.stack=="string")return[X.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=l.DetermineComponentFrameRoot(),m=o[0],h=o[1];if(m&&h){var N=m.split(`
`),B=h.split(`
`);for(i=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;i<B.length&&!B[i].includes("DetermineComponentFrameRoot");)i++;if(l===N.length||i===B.length)for(l=N.length-1,i=B.length-1;1<=l&&0<=i&&N[l]!==B[i];)i--;for(;1<=l&&0<=i;l--,i--)if(N[l]!==B[i]){if(l!==1||i!==1)do if(l--,i--,0>i||N[l]!==B[i]){var K=`
`+N[l].replace(" at new "," at ");return e.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",e.displayName)),K}while(1<=l&&0<=i);break}}}finally{dr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ha(a):""}function Nn(e,t){switch(e.tag){case 26:case 27:case 5:return ha(e.type);case 16:return ha("Lazy");case 13:return e.child!==t&&t!==null?ha("Suspense Fallback"):ha("Suspense");case 19:return ha("SuspenseList");case 0:case 15:return Cs(e.type,!1);case 11:return Cs(e.type.render,!1);case 1:return Cs(e.type,!0);case 31:return ha("Activity");default:return""}}function ur(e){try{var t="",a=null;do t+=Nn(e,a),a=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var mr=Object.prototype.hasOwnProperty,fr=r.unstable_scheduleCallback,hr=r.unstable_cancelCallback,ga=r.unstable_shouldYield,Je=r.unstable_requestPaint,Ue=r.unstable_now,xa=r.unstable_getCurrentPriorityLevel,Ds=r.unstable_ImmediatePriority,As=r.unstable_UserBlockingPriority,Ot=r.unstable_NormalPriority,gr=r.unstable_LowPriority,Zd=r.unstable_IdlePriority,lg=r.log,rg=r.unstable_setDisableYieldValue,xr=null,zt=null;function Ba(e){if(typeof lg=="function"&&rg(e),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(xr,e)}catch{}}var Ut=Math.clz32?Math.clz32:og,ng=Math.log,ig=Math.LN2;function og(e){return e>>>=0,e===0?32:31-(ng(e)/ig|0)|0}var Sn=256,kn=262144,Cn=4194304;function Ts(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Dn(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var i=0,o=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var h=l&134217727;return h!==0?(l=h&~o,l!==0?i=Ts(l):(m&=h,m!==0?i=Ts(m):a||(a=h&~e,a!==0&&(i=Ts(a))))):(h=l&~o,h!==0?i=Ts(h):m!==0?i=Ts(m):a||(a=l&~e,a!==0&&(i=Ts(a)))),i===0?0:t!==0&&t!==i&&(t&o)===0&&(o=i&-i,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:i}function yr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function cg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kd(){var e=Cn;return Cn<<=1,(Cn&62914560)===0&&(Cn=4194304),e}function Pi(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function pr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function dg(e,t,a,l,i,o){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var h=e.entanglements,N=e.expirationTimes,B=e.hiddenUpdates;for(a=m&~a;0<a;){var K=31-Ut(a),W=1<<K;h[K]=0,N[K]=-1;var Q=B[K];if(Q!==null)for(B[K]=null,K=0;K<Q.length;K++){var X=Q[K];X!==null&&(X.lane&=-536870913)}a&=~W}l!==0&&Id(e,l,0),o!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=o&~(m&~t))}function Id(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Ut(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Jd(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-Ut(a),i=1<<l;i&t|e[l]&t&&(e[l]|=t),a&=~i}}function $d(e,t){var a=t&-t;return a=(a&42)!==0?1:Wi(a),(a&(e.suspendedLanes|t))!==0?0:a}function Wi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function eo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Pd(){var e=te.p;return e!==0?e:(e=window.event,e===void 0?32:Hf(e.type))}function Wd(e,t){var a=te.p;try{return te.p=e,t()}finally{te.p=a}}var Qa=Math.random().toString(36).slice(2),ft="__reactFiber$"+Qa,Nt="__reactProps$"+Qa,il="__reactContainer$"+Qa,to="__reactEvents$"+Qa,ug="__reactListeners$"+Qa,mg="__reactHandles$"+Qa,eu="__reactResources$"+Qa,br="__reactMarker$"+Qa;function ao(e){delete e[ft],delete e[Nt],delete e[to],delete e[ug],delete e[mg]}function ol(e){var t=e[ft];if(t)return t;for(var a=e.parentNode;a;){if(t=a[il]||a[ft]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=wf(e);e!==null;){if(a=e[ft])return a;e=wf(e)}return t}e=a,a=e.parentNode}return null}function cl(e){if(e=e[ft]||e[il]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function vr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(d(33))}function dl(e){var t=e[eu];return t||(t=e[eu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function dt(e){e[br]=!0}var tu=new Set,au={};function Es(e,t){ul(e,t),ul(e+"Capture",t)}function ul(e,t){for(au[e]=t,e=0;e<t.length;e++)tu.add(t[e])}var fg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),su={},lu={};function hg(e){return mr.call(lu,e)?!0:mr.call(su,e)?!1:fg.test(e)?lu[e]=!0:(su[e]=!0,!1)}function An(e,t,a){if(hg(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Tn(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function ya(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}function Ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ru(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gg(e,t,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var i=l.get,o=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(m){a=""+m,o.call(this,m)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function so(e){if(!e._valueTracker){var t=ru(e)?"checked":"value";e._valueTracker=gg(e,t,""+e[t])}}function nu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=ru(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function En(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var xg=/[\n"\\]/g;function Gt(e){return e.replace(xg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function lo(e,t,a,l,i,o,m,h){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ft(t)):e.value!==""+Ft(t)&&(e.value=""+Ft(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?ro(e,m,Ft(t)):a!=null?ro(e,m,Ft(a)):l!=null&&e.removeAttribute("value"),i==null&&o!=null&&(e.defaultChecked=!!o),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.name=""+Ft(h):e.removeAttribute("name")}function iu(e,t,a,l,i,o,m,h){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){so(e);return}a=a!=null?""+Ft(a):"",t=t!=null?""+Ft(t):a,h||t===e.value||(e.value=t),e.defaultValue=t}l=l??i,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=h?e.checked:!!l,e.defaultChecked=!!l,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),so(e)}function ro(e,t,a){t==="number"&&En(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ml(e,t,a,l){if(e=e.options,t){t={};for(var i=0;i<a.length;i++)t["$"+a[i]]=!0;for(a=0;a<e.length;a++)i=t.hasOwnProperty("$"+e[a].value),e[a].selected!==i&&(e[a].selected=i),i&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Ft(a),t=null,i=0;i<e.length;i++){if(e[i].value===a){e[i].selected=!0,l&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ou(e,t,a){if(t!=null&&(t=""+Ft(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Ft(a):""}function cu(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(d(92));if(pe(l)){if(1<l.length)throw Error(d(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=Ft(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),so(e)}function fl(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var yg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function du(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||yg.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function uu(e,t,a){if(t!=null&&typeof t!="object")throw Error(d(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var i in t)l=t[i],t.hasOwnProperty(i)&&a[i]!==l&&du(e,i,l)}else for(var o in t)t.hasOwnProperty(o)&&du(e,o,t[o])}function no(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mn(e){return bg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function pa(){}var io=null;function oo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hl=null,gl=null;function mu(e){var t=cl(e);if(t&&(e=t.stateNode)){var a=e[Nt]||null;e:switch(e=t.stateNode,t.type){case"input":if(lo(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Gt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var i=l[Nt]||null;if(!i)throw Error(d(90));lo(l,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&nu(l)}break e;case"textarea":ou(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&ml(e,!!a.multiple,t,!1)}}}var co=!1;function fu(e,t,a){if(co)return e(t,a);co=!0;try{var l=e(t);return l}finally{if(co=!1,(hl!==null||gl!==null)&&(pi(),hl&&(t=hl,e=gl,gl=hl=null,mu(t),e)))for(t=0;t<e.length;t++)mu(e[t])}}function jr(e,t){var a=e.stateNode;if(a===null)return null;var l=a[Nt]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(d(231,t,typeof a));return a}var ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uo=!1;if(ba)try{var wr={};Object.defineProperty(wr,"passive",{get:function(){uo=!0}}),window.addEventListener("test",wr,wr),window.removeEventListener("test",wr,wr)}catch{uo=!1}var Ya=null,mo=null,_n=null;function hu(){if(_n)return _n;var e,t=mo,a=t.length,l,i="value"in Ya?Ya.value:Ya.textContent,o=i.length;for(e=0;e<a&&t[e]===i[e];e++);var m=a-e;for(l=1;l<=m&&t[a-l]===i[o-l];l++);return _n=i.slice(e,1<l?1-l:void 0)}function On(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zn(){return!0}function gu(){return!1}function St(e){function t(a,l,i,o,m){this._reactName=a,this._targetInst=i,this.type=l,this.nativeEvent=o,this.target=m,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(a=e[h],this[h]=a?a(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?zn:gu,this.isPropagationStopped=gu,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zn)},persist:function(){},isPersistent:zn}),t}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Un=St(Ms),Nr=v({},Ms,{view:0,detail:0}),vg=St(Nr),fo,ho,Sr,Rn=v({},Nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sr&&(Sr&&e.type==="mousemove"?(fo=e.screenX-Sr.screenX,ho=e.screenY-Sr.screenY):ho=fo=0,Sr=e),fo)},movementY:function(e){return"movementY"in e?e.movementY:ho}}),xu=St(Rn),jg=v({},Rn,{dataTransfer:0}),wg=St(jg),Ng=v({},Nr,{relatedTarget:0}),go=St(Ng),Sg=v({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),kg=St(Sg),Cg=v({},Ms,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dg=St(Cg),Ag=v({},Ms,{data:0}),yu=St(Ag),Tg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _g(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mg[e])?!!t[e]:!1}function xo(){return _g}var Og=v({},Nr,{key:function(e){if(e.key){var t=Tg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=On(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Eg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xo,charCode:function(e){return e.type==="keypress"?On(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?On(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zg=St(Og),Ug=v({},Rn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pu=St(Ug),Rg=v({},Nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xo}),Lg=St(Rg),Hg=v({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),qg=St(Hg),Bg=v({},Rn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qg=St(Bg),Yg=v({},Ms,{newState:0,oldState:0}),Fg=St(Yg),Gg=[9,13,27,32],yo=ba&&"CompositionEvent"in window,kr=null;ba&&"documentMode"in document&&(kr=document.documentMode);var Xg=ba&&"TextEvent"in window&&!kr,bu=ba&&(!yo||kr&&8<kr&&11>=kr),vu=" ",ju=!1;function wu(e,t){switch(e){case"keyup":return Gg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xl=!1;function Vg(e,t){switch(e){case"compositionend":return Nu(t);case"keypress":return t.which!==32?null:(ju=!0,vu);case"textInput":return e=t.data,e===vu&&ju?null:e;default:return null}}function Zg(e,t){if(xl)return e==="compositionend"||!yo&&wu(e,t)?(e=hu(),_n=mo=Ya=null,xl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bu&&t.locale!=="ko"?null:t.data;default:return null}}var Kg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Su(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Kg[e.type]:t==="textarea"}function ku(e,t,a,l){hl?gl?gl.push(l):gl=[l]:hl=l,t=ki(t,"onChange"),0<t.length&&(a=new Un("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var Cr=null,Dr=null;function Ig(e){of(e,0)}function Ln(e){var t=vr(e);if(nu(t))return e}function Cu(e,t){if(e==="change")return t}var Du=!1;if(ba){var po;if(ba){var bo="oninput"in document;if(!bo){var Au=document.createElement("div");Au.setAttribute("oninput","return;"),bo=typeof Au.oninput=="function"}po=bo}else po=!1;Du=po&&(!document.documentMode||9<document.documentMode)}function Tu(){Cr&&(Cr.detachEvent("onpropertychange",Eu),Dr=Cr=null)}function Eu(e){if(e.propertyName==="value"&&Ln(Dr)){var t=[];ku(t,Dr,e,oo(e)),fu(Ig,t)}}function Jg(e,t,a){e==="focusin"?(Tu(),Cr=t,Dr=a,Cr.attachEvent("onpropertychange",Eu)):e==="focusout"&&Tu()}function $g(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ln(Dr)}function Pg(e,t){if(e==="click")return Ln(t)}function Wg(e,t){if(e==="input"||e==="change")return Ln(t)}function ex(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rt=typeof Object.is=="function"?Object.is:ex;function Ar(e,t){if(Rt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var i=a[l];if(!mr.call(t,i)||!Rt(e[i],t[i]))return!1}return!0}function Mu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _u(e,t){var a=Mu(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Mu(a)}}function Ou(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ou(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=En(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=En(e.document)}return t}function vo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var tx=ba&&"documentMode"in document&&11>=document.documentMode,yl=null,jo=null,Tr=null,wo=!1;function Uu(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;wo||yl==null||yl!==En(l)||(l=yl,"selectionStart"in l&&vo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Tr&&Ar(Tr,l)||(Tr=l,l=ki(jo,"onSelect"),0<l.length&&(t=new Un("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=yl)))}function _s(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var pl={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionrun:_s("Transition","TransitionRun"),transitionstart:_s("Transition","TransitionStart"),transitioncancel:_s("Transition","TransitionCancel"),transitionend:_s("Transition","TransitionEnd")},No={},Ru={};ba&&(Ru=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function Os(e){if(No[e])return No[e];if(!pl[e])return e;var t=pl[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Ru)return No[e]=t[a];return e}var Lu=Os("animationend"),Hu=Os("animationiteration"),qu=Os("animationstart"),ax=Os("transitionrun"),sx=Os("transitionstart"),lx=Os("transitioncancel"),Bu=Os("transitionend"),Qu=new Map,So="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");So.push("scrollEnd");function ta(e,t){Qu.set(e,t),Es(t,[e])}var Hn=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Xt=[],bl=0,ko=0;function qn(){for(var e=bl,t=ko=bl=0;t<e;){var a=Xt[t];Xt[t++]=null;var l=Xt[t];Xt[t++]=null;var i=Xt[t];Xt[t++]=null;var o=Xt[t];if(Xt[t++]=null,l!==null&&i!==null){var m=l.pending;m===null?i.next=i:(i.next=m.next,m.next=i),l.pending=i}o!==0&&Yu(a,i,o)}}function Bn(e,t,a,l){Xt[bl++]=e,Xt[bl++]=t,Xt[bl++]=a,Xt[bl++]=l,ko|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Co(e,t,a,l){return Bn(e,t,a,l),Qn(e)}function zs(e,t){return Bn(e,null,null,t),Qn(e)}function Yu(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var i=!1,o=e.return;o!==null;)o.childLanes|=a,l=o.alternate,l!==null&&(l.childLanes|=a),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(i=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,i&&t!==null&&(i=31-Ut(a),e=o.hiddenUpdates,l=e[i],l===null?e[i]=[t]:l.push(t),t.lane=a|536870912),o):null}function Qn(e){if(50<$r)throw $r=0,Uc=null,Error(d(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var vl={};function rx(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,a,l){return new rx(e,t,a,l)}function Do(e){return e=e.prototype,!(!e||!e.isReactComponent)}function va(e,t){var a=e.alternate;return a===null?(a=Lt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Fu(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Yn(e,t,a,l,i,o){var m=0;if(l=e,typeof e=="function")Do(e)&&(m=1);else if(typeof e=="string")m=dy(e,a,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ie:return e=Lt(31,a,t,i),e.elementType=ie,e.lanes=o,e;case j:return Us(a.children,i,o,t);case M:m=8,i|=24;break;case D:return e=Lt(12,a,t,i|2),e.elementType=D,e.lanes=o,e;case V:return e=Lt(13,a,t,i),e.elementType=V,e.lanes=o,e;case R:return e=Lt(19,a,t,i),e.elementType=R,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:m=10;break e;case L:m=9;break e;case C:m=11;break e;case $:m=14;break e;case se:m=16,l=null;break e}m=29,a=Error(d(130,e===null?"null":typeof e,"")),l=null}return t=Lt(m,a,t,i),t.elementType=e,t.type=l,t.lanes=o,t}function Us(e,t,a,l){return e=Lt(7,e,l,t),e.lanes=a,e}function Ao(e,t,a){return e=Lt(6,e,null,t),e.lanes=a,e}function Gu(e){var t=Lt(18,null,null,0);return t.stateNode=e,t}function To(e,t,a){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Xu=new WeakMap;function Vt(e,t){if(typeof e=="object"&&e!==null){var a=Xu.get(e);return a!==void 0?a:(t={value:e,source:t,stack:ur(t)},Xu.set(e,t),t)}return{value:e,source:t,stack:ur(t)}}var jl=[],wl=0,Fn=null,Er=0,Zt=[],Kt=0,Fa=null,na=1,ia="";function ja(e,t){jl[wl++]=Er,jl[wl++]=Fn,Fn=e,Er=t}function Vu(e,t,a){Zt[Kt++]=na,Zt[Kt++]=ia,Zt[Kt++]=Fa,Fa=e;var l=na;e=ia;var i=32-Ut(l)-1;l&=~(1<<i),a+=1;var o=32-Ut(t)+i;if(30<o){var m=i-i%5;o=(l&(1<<m)-1).toString(32),l>>=m,i-=m,na=1<<32-Ut(t)+i|a<<i|l,ia=o+e}else na=1<<o|a<<i|l,ia=e}function Eo(e){e.return!==null&&(ja(e,1),Vu(e,1,0))}function Mo(e){for(;e===Fn;)Fn=jl[--wl],jl[wl]=null,Er=jl[--wl],jl[wl]=null;for(;e===Fa;)Fa=Zt[--Kt],Zt[Kt]=null,ia=Zt[--Kt],Zt[Kt]=null,na=Zt[--Kt],Zt[Kt]=null}function Zu(e,t){Zt[Kt++]=na,Zt[Kt++]=ia,Zt[Kt++]=Fa,na=t.id,ia=t.overflow,Fa=e}var ht=null,Fe=null,Ae=!1,Ga=null,It=!1,_o=Error(d(519));function Xa(e){var t=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mr(Vt(t,e)),_o}function Ku(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[ft]=e,t[Nt]=l,a){case"dialog":ke("cancel",t),ke("close",t);break;case"iframe":case"object":case"embed":ke("load",t);break;case"video":case"audio":for(a=0;a<Wr.length;a++)ke(Wr[a],t);break;case"source":ke("error",t);break;case"img":case"image":case"link":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"input":ke("invalid",t),iu(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ke("invalid",t);break;case"textarea":ke("invalid",t),cu(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||mf(t.textContent,a)?(l.popover!=null&&(ke("beforetoggle",t),ke("toggle",t)),l.onScroll!=null&&ke("scroll",t),l.onScrollEnd!=null&&ke("scrollend",t),l.onClick!=null&&(t.onclick=pa),t=!0):t=!1,t||Xa(e,!0)}function Iu(e){for(ht=e.return;ht;)switch(ht.tag){case 5:case 31:case 13:It=!1;return;case 27:case 3:It=!0;return;default:ht=ht.return}}function Nl(e){if(e!==ht)return!1;if(!Ae)return Iu(e),Ae=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Jc(e.type,e.memoizedProps)),a=!a),a&&Fe&&Xa(e),Iu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));Fe=jf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));Fe=jf(e)}else t===27?(t=Fe,rs(e.type)?(e=td,td=null,Fe=e):Fe=t):Fe=ht?$t(e.stateNode.nextSibling):null;return!0}function Rs(){Fe=ht=null,Ae=!1}function Oo(){var e=Ga;return e!==null&&(At===null?At=e:At.push.apply(At,e),Ga=null),e}function Mr(e){Ga===null?Ga=[e]:Ga.push(e)}var zo=A(null),Ls=null,wa=null;function Va(e,t,a){Z(zo,t._currentValue),t._currentValue=a}function Na(e){e._currentValue=zo.current,w(zo)}function Uo(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function Ro(e,t,a,l){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){var m=i.child;o=o.firstContext;e:for(;o!==null;){var h=o;o=i;for(var N=0;N<t.length;N++)if(h.context===t[N]){o.lanes|=a,h=o.alternate,h!==null&&(h.lanes|=a),Uo(o.return,a,e),l||(m=null);break e}o=h.next}}else if(i.tag===18){if(m=i.return,m===null)throw Error(d(341));m.lanes|=a,o=m.alternate,o!==null&&(o.lanes|=a),Uo(m,a,e),m=null}else m=i.child;if(m!==null)m.return=i;else for(m=i;m!==null;){if(m===e){m=null;break}if(i=m.sibling,i!==null){i.return=m.return,m=i;break}m=m.return}i=m}}function Sl(e,t,a,l){e=null;for(var i=t,o=!1;i!==null;){if(!o){if((i.flags&524288)!==0)o=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var m=i.alternate;if(m===null)throw Error(d(387));if(m=m.memoizedProps,m!==null){var h=i.type;Rt(i.pendingProps.value,m.value)||(e!==null?e.push(h):e=[h])}}else if(i===be.current){if(m=i.alternate,m===null)throw Error(d(387));m.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(ln):e=[ln])}i=i.return}e!==null&&Ro(t,e,a,l),t.flags|=262144}function Gn(e){for(e=e.firstContext;e!==null;){if(!Rt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Hs(e){Ls=e,wa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function gt(e){return Ju(Ls,e)}function Xn(e,t){return Ls===null&&Hs(e),Ju(e,t)}function Ju(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},wa===null){if(e===null)throw Error(d(308));wa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else wa=wa.next=t;return a}var nx=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},ix=r.unstable_scheduleCallback,ox=r.unstable_NormalPriority,lt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lo(){return{controller:new nx,data:new Map,refCount:0}}function _r(e){e.refCount--,e.refCount===0&&ix(ox,function(){e.controller.abort()})}var Or=null,Ho=0,kl=0,Cl=null;function cx(e,t){if(Or===null){var a=Or=[];Ho=0,kl=Qc(),Cl={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ho++,t.then($u,$u),t}function $u(){if(--Ho===0&&Or!==null){Cl!==null&&(Cl.status="fulfilled");var e=Or;Or=null,kl=0,Cl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function dx(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var i=0;i<a.length;i++)(0,a[i])(t)},function(i){for(l.status="rejected",l.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),l}var Pu=F.S;F.S=function(e,t){Um=Ue(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&cx(e,t),Pu!==null&&Pu(e,t)};var qs=A(null);function qo(){var e=qs.current;return e!==null?e:Ye.pooledCache}function Vn(e,t){t===null?Z(qs,qs.current):Z(qs,t.pool)}function Wu(){var e=qo();return e===null?null:{parent:lt._currentValue,pool:e}}var Dl=Error(d(460)),Bo=Error(d(474)),Zn=Error(d(542)),Kn={then:function(){}};function e0(e){return e=e.status,e==="fulfilled"||e==="rejected"}function t0(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(pa,pa),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,s0(e),e;default:if(typeof t.status=="string")t.then(pa,pa);else{if(e=Ye,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=l}},function(l){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,s0(e),e}throw Qs=t,Dl}}function Bs(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Qs=a,Dl):a}}var Qs=null;function a0(){if(Qs===null)throw Error(d(459));var e=Qs;return Qs=null,e}function s0(e){if(e===Dl||e===Zn)throw Error(d(483))}var Al=null,zr=0;function In(e){var t=zr;return zr+=1,Al===null&&(Al=[]),t0(Al,e,t)}function Ur(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Jn(e,t){throw t.$$typeof===E?Error(d(525)):(e=Object.prototype.toString.call(t),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function l0(e){function t(U,_){if(e){var q=U.deletions;q===null?(U.deletions=[_],U.flags|=16):q.push(_)}}function a(U,_){if(!e)return null;for(;_!==null;)t(U,_),_=_.sibling;return null}function l(U){for(var _=new Map;U!==null;)U.key!==null?_.set(U.key,U):_.set(U.index,U),U=U.sibling;return _}function i(U,_){return U=va(U,_),U.index=0,U.sibling=null,U}function o(U,_,q){return U.index=q,e?(q=U.alternate,q!==null?(q=q.index,q<_?(U.flags|=67108866,_):q):(U.flags|=67108866,_)):(U.flags|=1048576,_)}function m(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function h(U,_,q,J){return _===null||_.tag!==6?(_=Ao(q,U.mode,J),_.return=U,_):(_=i(_,q),_.return=U,_)}function N(U,_,q,J){var he=q.type;return he===j?K(U,_,q.props.children,J,q.key):_!==null&&(_.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===se&&Bs(he)===_.type)?(_=i(_,q.props),Ur(_,q),_.return=U,_):(_=Yn(q.type,q.key,q.props,null,U.mode,J),Ur(_,q),_.return=U,_)}function B(U,_,q,J){return _===null||_.tag!==4||_.stateNode.containerInfo!==q.containerInfo||_.stateNode.implementation!==q.implementation?(_=To(q,U.mode,J),_.return=U,_):(_=i(_,q.children||[]),_.return=U,_)}function K(U,_,q,J,he){return _===null||_.tag!==7?(_=Us(q,U.mode,J,he),_.return=U,_):(_=i(_,q),_.return=U,_)}function W(U,_,q){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=Ao(""+_,U.mode,q),_.return=U,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case S:return q=Yn(_.type,_.key,_.props,null,U.mode,q),Ur(q,_),q.return=U,q;case z:return _=To(_,U.mode,q),_.return=U,_;case se:return _=Bs(_),W(U,_,q)}if(pe(_)||I(_))return _=Us(_,U.mode,q,null),_.return=U,_;if(typeof _.then=="function")return W(U,In(_),q);if(_.$$typeof===T)return W(U,Xn(U,_),q);Jn(U,_)}return null}function Q(U,_,q,J){var he=_!==null?_.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return he!==null?null:h(U,_,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===he?N(U,_,q,J):null;case z:return q.key===he?B(U,_,q,J):null;case se:return q=Bs(q),Q(U,_,q,J)}if(pe(q)||I(q))return he!==null?null:K(U,_,q,J,null);if(typeof q.then=="function")return Q(U,_,In(q),J);if(q.$$typeof===T)return Q(U,_,Xn(U,q),J);Jn(U,q)}return null}function X(U,_,q,J,he){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return U=U.get(q)||null,h(_,U,""+J,he);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return U=U.get(J.key===null?q:J.key)||null,N(_,U,J,he);case z:return U=U.get(J.key===null?q:J.key)||null,B(_,U,J,he);case se:return J=Bs(J),X(U,_,q,J,he)}if(pe(J)||I(J))return U=U.get(q)||null,K(_,U,J,he,null);if(typeof J.then=="function")return X(U,_,q,In(J),he);if(J.$$typeof===T)return X(U,_,q,Xn(_,J),he);Jn(_,J)}return null}function ue(U,_,q,J){for(var he=null,Me=null,me=_,we=_=0,De=null;me!==null&&we<q.length;we++){me.index>we?(De=me,me=null):De=me.sibling;var _e=Q(U,me,q[we],J);if(_e===null){me===null&&(me=De);break}e&&me&&_e.alternate===null&&t(U,me),_=o(_e,_,we),Me===null?he=_e:Me.sibling=_e,Me=_e,me=De}if(we===q.length)return a(U,me),Ae&&ja(U,we),he;if(me===null){for(;we<q.length;we++)me=W(U,q[we],J),me!==null&&(_=o(me,_,we),Me===null?he=me:Me.sibling=me,Me=me);return Ae&&ja(U,we),he}for(me=l(me);we<q.length;we++)De=X(me,U,we,q[we],J),De!==null&&(e&&De.alternate!==null&&me.delete(De.key===null?we:De.key),_=o(De,_,we),Me===null?he=De:Me.sibling=De,Me=De);return e&&me.forEach(function(ds){return t(U,ds)}),Ae&&ja(U,we),he}function xe(U,_,q,J){if(q==null)throw Error(d(151));for(var he=null,Me=null,me=_,we=_=0,De=null,_e=q.next();me!==null&&!_e.done;we++,_e=q.next()){me.index>we?(De=me,me=null):De=me.sibling;var ds=Q(U,me,_e.value,J);if(ds===null){me===null&&(me=De);break}e&&me&&ds.alternate===null&&t(U,me),_=o(ds,_,we),Me===null?he=ds:Me.sibling=ds,Me=ds,me=De}if(_e.done)return a(U,me),Ae&&ja(U,we),he;if(me===null){for(;!_e.done;we++,_e=q.next())_e=W(U,_e.value,J),_e!==null&&(_=o(_e,_,we),Me===null?he=_e:Me.sibling=_e,Me=_e);return Ae&&ja(U,we),he}for(me=l(me);!_e.done;we++,_e=q.next())_e=X(me,U,we,_e.value,J),_e!==null&&(e&&_e.alternate!==null&&me.delete(_e.key===null?we:_e.key),_=o(_e,_,we),Me===null?he=_e:Me.sibling=_e,Me=_e);return e&&me.forEach(function(jy){return t(U,jy)}),Ae&&ja(U,we),he}function Be(U,_,q,J){if(typeof q=="object"&&q!==null&&q.type===j&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:e:{for(var he=q.key;_!==null;){if(_.key===he){if(he=q.type,he===j){if(_.tag===7){a(U,_.sibling),J=i(_,q.props.children),J.return=U,U=J;break e}}else if(_.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===se&&Bs(he)===_.type){a(U,_.sibling),J=i(_,q.props),Ur(J,q),J.return=U,U=J;break e}a(U,_);break}else t(U,_);_=_.sibling}q.type===j?(J=Us(q.props.children,U.mode,J,q.key),J.return=U,U=J):(J=Yn(q.type,q.key,q.props,null,U.mode,J),Ur(J,q),J.return=U,U=J)}return m(U);case z:e:{for(he=q.key;_!==null;){if(_.key===he)if(_.tag===4&&_.stateNode.containerInfo===q.containerInfo&&_.stateNode.implementation===q.implementation){a(U,_.sibling),J=i(_,q.children||[]),J.return=U,U=J;break e}else{a(U,_);break}else t(U,_);_=_.sibling}J=To(q,U.mode,J),J.return=U,U=J}return m(U);case se:return q=Bs(q),Be(U,_,q,J)}if(pe(q))return ue(U,_,q,J);if(I(q)){if(he=I(q),typeof he!="function")throw Error(d(150));return q=he.call(q),xe(U,_,q,J)}if(typeof q.then=="function")return Be(U,_,In(q),J);if(q.$$typeof===T)return Be(U,_,Xn(U,q),J);Jn(U,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,_!==null&&_.tag===6?(a(U,_.sibling),J=i(_,q),J.return=U,U=J):(a(U,_),J=Ao(q,U.mode,J),J.return=U,U=J),m(U)):a(U,_)}return function(U,_,q,J){try{zr=0;var he=Be(U,_,q,J);return Al=null,he}catch(me){if(me===Dl||me===Zn)throw me;var Me=Lt(29,me,null,U.mode);return Me.lanes=J,Me.return=U,Me}finally{}}}var Ys=l0(!0),r0=l0(!1),Za=!1;function Qo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ka(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ia(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Oe&2)!==0){var i=l.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),l.pending=t,t=Qn(e),Yu(e,null,a),t}return Bn(e,l,t,a),Qn(e)}function Rr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Jd(e,a)}}function Fo(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var i=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?i=o=m:o=o.next=m,a=a.next}while(a!==null);o===null?i=o=t:o=o.next=t}else i=o=t;a={baseState:l.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Go=!1;function Lr(){if(Go){var e=Cl;if(e!==null)throw e}}function Hr(e,t,a,l){Go=!1;var i=e.updateQueue;Za=!1;var o=i.firstBaseUpdate,m=i.lastBaseUpdate,h=i.shared.pending;if(h!==null){i.shared.pending=null;var N=h,B=N.next;N.next=null,m===null?o=B:m.next=B,m=N;var K=e.alternate;K!==null&&(K=K.updateQueue,h=K.lastBaseUpdate,h!==m&&(h===null?K.firstBaseUpdate=B:h.next=B,K.lastBaseUpdate=N))}if(o!==null){var W=i.baseState;m=0,K=B=N=null,h=o;do{var Q=h.lane&-536870913,X=Q!==h.lane;if(X?(Ce&Q)===Q:(l&Q)===Q){Q!==0&&Q===kl&&(Go=!0),K!==null&&(K=K.next={lane:0,tag:h.tag,payload:h.payload,callback:null,next:null});e:{var ue=e,xe=h;Q=t;var Be=a;switch(xe.tag){case 1:if(ue=xe.payload,typeof ue=="function"){W=ue.call(Be,W,Q);break e}W=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=xe.payload,Q=typeof ue=="function"?ue.call(Be,W,Q):ue,Q==null)break e;W=v({},W,Q);break e;case 2:Za=!0}}Q=h.callback,Q!==null&&(e.flags|=64,X&&(e.flags|=8192),X=i.callbacks,X===null?i.callbacks=[Q]:X.push(Q))}else X={lane:Q,tag:h.tag,payload:h.payload,callback:h.callback,next:null},K===null?(B=K=X,N=W):K=K.next=X,m|=Q;if(h=h.next,h===null){if(h=i.shared.pending,h===null)break;X=h,h=X.next,X.next=null,i.lastBaseUpdate=X,i.shared.pending=null}}while(!0);K===null&&(N=W),i.baseState=N,i.firstBaseUpdate=B,i.lastBaseUpdate=K,o===null&&(i.shared.lanes=0),es|=m,e.lanes=m,e.memoizedState=W}}function n0(e,t){if(typeof e!="function")throw Error(d(191,e));e.call(t)}function i0(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)n0(a[e],t)}var Tl=A(null),$n=A(0);function o0(e,t){e=_a,Z($n,e),Z(Tl,t),_a=e|t.baseLanes}function Xo(){Z($n,_a),Z(Tl,Tl.current)}function Vo(){_a=$n.current,w(Tl),w($n)}var Ht=A(null),Jt=null;function Ja(e){var t=e.alternate;Z(tt,tt.current&1),Z(Ht,e),Jt===null&&(t===null||Tl.current!==null||t.memoizedState!==null)&&(Jt=e)}function Zo(e){Z(tt,tt.current),Z(Ht,e),Jt===null&&(Jt=e)}function c0(e){e.tag===22?(Z(tt,tt.current),Z(Ht,e),Jt===null&&(Jt=e)):$a()}function $a(){Z(tt,tt.current),Z(Ht,Ht.current)}function qt(e){w(Ht),Jt===e&&(Jt=null),w(tt)}var tt=A(0);function Pn(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Wc(a)||ed(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Sa=0,je=null,He=null,rt=null,Wn=!1,El=!1,Fs=!1,ei=0,qr=0,Ml=null,ux=0;function $e(){throw Error(d(321))}function Ko(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Rt(e[a],t[a]))return!1;return!0}function Io(e,t,a,l,i,o){return Sa=o,je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,F.H=e===null||e.memoizedState===null?V0:dc,Fs=!1,o=a(l,i),Fs=!1,El&&(o=u0(t,a,l,i)),d0(e),o}function d0(e){F.H=Yr;var t=He!==null&&He.next!==null;if(Sa=0,rt=He=je=null,Wn=!1,qr=0,Ml=null,t)throw Error(d(300));e===null||nt||(e=e.dependencies,e!==null&&Gn(e)&&(nt=!0))}function u0(e,t,a,l){je=e;var i=0;do{if(El&&(Ml=null),qr=0,El=!1,25<=i)throw Error(d(301));if(i+=1,rt=He=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}F.H=Z0,o=t(a,l)}while(El);return o}function mx(){var e=F.H,t=e.useState()[0];return t=typeof t.then=="function"?Br(t):t,e=e.useState()[0],(He!==null?He.memoizedState:null)!==e&&(je.flags|=1024),t}function Jo(){var e=ei!==0;return ei=0,e}function $o(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Po(e){if(Wn){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Wn=!1}Sa=0,rt=He=je=null,El=!1,qr=ei=0,Ml=null}function vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?je.memoizedState=rt=e:rt=rt.next=e,rt}function at(){if(He===null){var e=je.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=rt===null?je.memoizedState:rt.next;if(t!==null)rt=t,He=e;else{if(e===null)throw je.alternate===null?Error(d(467)):Error(d(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},rt===null?je.memoizedState=rt=e:rt=rt.next=e}return rt}function ti(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Br(e){var t=qr;return qr+=1,Ml===null&&(Ml=[]),e=t0(Ml,e,t),t=je,(rt===null?t.memoizedState:rt.next)===null&&(t=t.alternate,F.H=t===null||t.memoizedState===null?V0:dc),e}function ai(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Br(e);if(e.$$typeof===T)return gt(e)}throw Error(d(438,String(e)))}function Wo(e){var t=null,a=je.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=ti(),je.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=H;return t.index++,a}function ka(e,t){return typeof t=="function"?t(e):t}function si(e){var t=at();return ec(t,He,e)}function ec(e,t,a){var l=e.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=a;var i=e.baseQueue,o=l.pending;if(o!==null){if(i!==null){var m=i.next;i.next=o.next,o.next=m}t.baseQueue=i=o,l.pending=null}if(o=e.baseState,i===null)e.memoizedState=o;else{t=i.next;var h=m=null,N=null,B=t,K=!1;do{var W=B.lane&-536870913;if(W!==B.lane?(Ce&W)===W:(Sa&W)===W){var Q=B.revertLane;if(Q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),W===kl&&(K=!0);else if((Sa&Q)===Q){B=B.next,Q===kl&&(K=!0);continue}else W={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(h=N=W,m=o):N=N.next=W,je.lanes|=Q,es|=Q;W=B.action,Fs&&a(o,W),o=B.hasEagerState?B.eagerState:a(o,W)}else Q={lane:W,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(h=N=Q,m=o):N=N.next=Q,je.lanes|=W,es|=W;B=B.next}while(B!==null&&B!==t);if(N===null?m=o:N.next=h,!Rt(o,e.memoizedState)&&(nt=!0,K&&(a=Cl,a!==null)))throw a;e.memoizedState=o,e.baseState=m,e.baseQueue=N,l.lastRenderedState=o}return i===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function tc(e){var t=at(),a=t.queue;if(a===null)throw Error(d(311));a.lastRenderedReducer=e;var l=a.dispatch,i=a.pending,o=t.memoizedState;if(i!==null){a.pending=null;var m=i=i.next;do o=e(o,m.action),m=m.next;while(m!==i);Rt(o,t.memoizedState)||(nt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,l]}function m0(e,t,a){var l=je,i=at(),o=Ae;if(o){if(a===void 0)throw Error(d(407));a=a()}else a=t();var m=!Rt((He||i).memoizedState,a);if(m&&(i.memoizedState=a,nt=!0),i=i.queue,lc(g0.bind(null,l,i,e),[e]),i.getSnapshot!==t||m||rt!==null&&rt.memoizedState.tag&1){if(l.flags|=2048,_l(9,{destroy:void 0},h0.bind(null,l,i,a,t),null),Ye===null)throw Error(d(349));o||(Sa&127)!==0||f0(l,t,a)}return a}function f0(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=je.updateQueue,t===null?(t=ti(),je.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function h0(e,t,a,l){t.value=a,t.getSnapshot=l,x0(t)&&y0(e)}function g0(e,t,a){return a(function(){x0(t)&&y0(e)})}function x0(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Rt(e,a)}catch{return!0}}function y0(e){var t=zs(e,2);t!==null&&Tt(t,e,2)}function ac(e){var t=vt();if(typeof e=="function"){var a=e;if(e=a(),Fs){Ba(!0);try{a()}finally{Ba(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:e},t}function p0(e,t,a,l){return e.baseState=a,ec(e,He,typeof l=="function"?l:ka)}function fx(e,t,a,l,i){if(ni(e))throw Error(d(485));if(e=t.action,e!==null){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){o.listeners.push(m)}};F.T!==null?a(!0):o.isTransition=!1,l(o),a=t.pending,a===null?(o.next=t.pending=o,b0(t,o)):(o.next=a.next,t.pending=a.next=o)}}function b0(e,t){var a=t.action,l=t.payload,i=e.state;if(t.isTransition){var o=F.T,m={};F.T=m;try{var h=a(i,l),N=F.S;N!==null&&N(m,h),v0(e,t,h)}catch(B){sc(e,t,B)}finally{o!==null&&m.types!==null&&(o.types=m.types),F.T=o}}else try{o=a(i,l),v0(e,t,o)}catch(B){sc(e,t,B)}}function v0(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){j0(e,t,l)},function(l){return sc(e,t,l)}):j0(e,t,a)}function j0(e,t,a){t.status="fulfilled",t.value=a,w0(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,b0(e,a)))}function sc(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,w0(t),t=t.next;while(t!==l)}e.action=null}function w0(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function N0(e,t){return t}function S0(e,t){if(Ae){var a=Ye.formState;if(a!==null){e:{var l=je;if(Ae){if(Fe){t:{for(var i=Fe,o=It;i.nodeType!==8;){if(!o){i=null;break t}if(i=$t(i.nextSibling),i===null){i=null;break t}}o=i.data,i=o==="F!"||o==="F"?i:null}if(i){Fe=$t(i.nextSibling),l=i.data==="F!";break e}}Xa(l)}l=!1}l&&(t=a[0])}}return a=vt(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:N0,lastRenderedState:t},a.queue=l,a=F0.bind(null,je,l),l.dispatch=a,l=ac(!1),o=cc.bind(null,je,!1,l.queue),l=vt(),i={state:t,dispatch:null,action:e,pending:null},l.queue=i,a=fx.bind(null,je,i,o,a),i.dispatch=a,l.memoizedState=e,[t,a,!1]}function k0(e){var t=at();return C0(t,He,e)}function C0(e,t,a){if(t=ec(e,t,N0)[0],e=si(ka)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Br(t)}catch(m){throw m===Dl?Zn:m}else l=t;t=at();var i=t.queue,o=i.dispatch;return a!==t.memoizedState&&(je.flags|=2048,_l(9,{destroy:void 0},hx.bind(null,i,a),null)),[l,o,e]}function hx(e,t){e.action=t}function D0(e){var t=at(),a=He;if(a!==null)return C0(t,a,e);at(),t=t.memoizedState,a=at();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function _l(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=je.updateQueue,t===null&&(t=ti(),je.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function A0(){return at().memoizedState}function li(e,t,a,l){var i=vt();je.flags|=e,i.memoizedState=_l(1|t,{destroy:void 0},a,l===void 0?null:l)}function ri(e,t,a,l){var i=at();l=l===void 0?null:l;var o=i.memoizedState.inst;He!==null&&l!==null&&Ko(l,He.memoizedState.deps)?i.memoizedState=_l(t,o,a,l):(je.flags|=e,i.memoizedState=_l(1|t,o,a,l))}function T0(e,t){li(8390656,8,e,t)}function lc(e,t){ri(2048,8,e,t)}function gx(e){je.flags|=4;var t=je.updateQueue;if(t===null)t=ti(),je.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function E0(e){var t=at().memoizedState;return gx({ref:t,nextImpl:e}),function(){if((Oe&2)!==0)throw Error(d(440));return t.impl.apply(void 0,arguments)}}function M0(e,t){return ri(4,2,e,t)}function _0(e,t){return ri(4,4,e,t)}function O0(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function z0(e,t,a){a=a!=null?a.concat([e]):null,ri(4,4,O0.bind(null,t,e),a)}function rc(){}function U0(e,t){var a=at();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&Ko(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function R0(e,t){var a=at();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&Ko(t,l[1]))return l[0];if(l=e(),Fs){Ba(!0);try{e()}finally{Ba(!1)}}return a.memoizedState=[l,t],l}function nc(e,t,a){return a===void 0||(Sa&1073741824)!==0&&(Ce&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Lm(),je.lanes|=e,es|=e,a)}function L0(e,t,a,l){return Rt(a,t)?a:Tl.current!==null?(e=nc(e,a,l),Rt(e,t)||(nt=!0),e):(Sa&42)===0||(Sa&1073741824)!==0&&(Ce&261930)===0?(nt=!0,e.memoizedState=a):(e=Lm(),je.lanes|=e,es|=e,t)}function H0(e,t,a,l,i){var o=te.p;te.p=o!==0&&8>o?o:8;var m=F.T,h={};F.T=h,cc(e,!1,t,a);try{var N=i(),B=F.S;if(B!==null&&B(h,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var K=dx(N,l);Qr(e,t,K,Yt(e))}else Qr(e,t,l,Yt(e))}catch(W){Qr(e,t,{then:function(){},status:"rejected",reason:W},Yt())}finally{te.p=o,m!==null&&h.types!==null&&(m.types=h.types),F.T=m}}function xx(){}function ic(e,t,a,l){if(e.tag!==5)throw Error(d(476));var i=q0(e).queue;H0(e,i,t,G,a===null?xx:function(){return B0(e),a(l)})}function q0(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:G},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function B0(e){var t=q0(e);t.next===null&&(t=e.alternate.memoizedState),Qr(e,t.next.queue,{},Yt())}function oc(){return gt(ln)}function Q0(){return at().memoizedState}function Y0(){return at().memoizedState}function yx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Yt();e=Ka(a);var l=Ia(t,e,a);l!==null&&(Tt(l,t,a),Rr(l,t,a)),t={cache:Lo()},e.payload=t;return}t=t.return}}function px(e,t,a){var l=Yt();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ni(e)?G0(t,a):(a=Co(e,t,a,l),a!==null&&(Tt(a,e,l),X0(a,t,l)))}function F0(e,t,a){var l=Yt();Qr(e,t,a,l)}function Qr(e,t,a,l){var i={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ni(e))G0(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var m=t.lastRenderedState,h=o(m,a);if(i.hasEagerState=!0,i.eagerState=h,Rt(h,m))return Bn(e,t,i,0),Ye===null&&qn(),!1}catch{}finally{}if(a=Co(e,t,i,l),a!==null)return Tt(a,e,l),X0(a,t,l),!0}return!1}function cc(e,t,a,l){if(l={lane:2,revertLane:Qc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ni(e)){if(t)throw Error(d(479))}else t=Co(e,a,l,2),t!==null&&Tt(t,e,2)}function ni(e){var t=e.alternate;return e===je||t!==null&&t===je}function G0(e,t){El=Wn=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function X0(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Jd(e,a)}}var Yr={readContext:gt,use:ai,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useLayoutEffect:$e,useInsertionEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useSyncExternalStore:$e,useId:$e,useHostTransitionStatus:$e,useFormState:$e,useActionState:$e,useOptimistic:$e,useMemoCache:$e,useCacheRefresh:$e};Yr.useEffectEvent=$e;var V0={readContext:gt,use:ai,useCallback:function(e,t){return vt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:T0,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,li(4194308,4,O0.bind(null,t,e),a)},useLayoutEffect:function(e,t){return li(4194308,4,e,t)},useInsertionEffect:function(e,t){li(4,2,e,t)},useMemo:function(e,t){var a=vt();t=t===void 0?null:t;var l=e();if(Fs){Ba(!0);try{e()}finally{Ba(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=vt();if(a!==void 0){var i=a(t);if(Fs){Ba(!0);try{a(t)}finally{Ba(!1)}}}else i=t;return l.memoizedState=l.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},l.queue=e,e=e.dispatch=px.bind(null,je,e),[l.memoizedState,e]},useRef:function(e){var t=vt();return e={current:e},t.memoizedState=e},useState:function(e){e=ac(e);var t=e.queue,a=F0.bind(null,je,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:rc,useDeferredValue:function(e,t){var a=vt();return nc(a,e,t)},useTransition:function(){var e=ac(!1);return e=H0.bind(null,je,e.queue,!0,!1),vt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=je,i=vt();if(Ae){if(a===void 0)throw Error(d(407));a=a()}else{if(a=t(),Ye===null)throw Error(d(349));(Ce&127)!==0||f0(l,t,a)}i.memoizedState=a;var o={value:a,getSnapshot:t};return i.queue=o,T0(g0.bind(null,l,o,e),[e]),l.flags|=2048,_l(9,{destroy:void 0},h0.bind(null,l,o,a,t),null),a},useId:function(){var e=vt(),t=Ye.identifierPrefix;if(Ae){var a=ia,l=na;a=(l&~(1<<32-Ut(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=ei++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=ux++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:oc,useFormState:S0,useActionState:S0,useOptimistic:function(e){var t=vt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=cc.bind(null,je,!0,a),a.dispatch=t,[e,t]},useMemoCache:Wo,useCacheRefresh:function(){return vt().memoizedState=yx.bind(null,je)},useEffectEvent:function(e){var t=vt(),a={impl:e};return t.memoizedState=a,function(){if((Oe&2)!==0)throw Error(d(440));return a.impl.apply(void 0,arguments)}}},dc={readContext:gt,use:ai,useCallback:U0,useContext:gt,useEffect:lc,useImperativeHandle:z0,useInsertionEffect:M0,useLayoutEffect:_0,useMemo:R0,useReducer:si,useRef:A0,useState:function(){return si(ka)},useDebugValue:rc,useDeferredValue:function(e,t){var a=at();return L0(a,He.memoizedState,e,t)},useTransition:function(){var e=si(ka)[0],t=at().memoizedState;return[typeof e=="boolean"?e:Br(e),t]},useSyncExternalStore:m0,useId:Q0,useHostTransitionStatus:oc,useFormState:k0,useActionState:k0,useOptimistic:function(e,t){var a=at();return p0(a,He,e,t)},useMemoCache:Wo,useCacheRefresh:Y0};dc.useEffectEvent=E0;var Z0={readContext:gt,use:ai,useCallback:U0,useContext:gt,useEffect:lc,useImperativeHandle:z0,useInsertionEffect:M0,useLayoutEffect:_0,useMemo:R0,useReducer:tc,useRef:A0,useState:function(){return tc(ka)},useDebugValue:rc,useDeferredValue:function(e,t){var a=at();return He===null?nc(a,e,t):L0(a,He.memoizedState,e,t)},useTransition:function(){var e=tc(ka)[0],t=at().memoizedState;return[typeof e=="boolean"?e:Br(e),t]},useSyncExternalStore:m0,useId:Q0,useHostTransitionStatus:oc,useFormState:D0,useActionState:D0,useOptimistic:function(e,t){var a=at();return He!==null?p0(a,He,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Wo,useCacheRefresh:Y0};Z0.useEffectEvent=E0;function uc(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:v({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var mc={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=Yt(),i=Ka(l);i.payload=t,a!=null&&(i.callback=a),t=Ia(e,i,l),t!==null&&(Tt(t,e,l),Rr(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=Yt(),i=Ka(l);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=Ia(e,i,l),t!==null&&(Tt(t,e,l),Rr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Yt(),l=Ka(a);l.tag=2,t!=null&&(l.callback=t),t=Ia(e,l,a),t!==null&&(Tt(t,e,a),Rr(t,e,a))}};function K0(e,t,a,l,i,o,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,o,m):t.prototype&&t.prototype.isPureReactComponent?!Ar(a,l)||!Ar(i,o):!0}function I0(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&mc.enqueueReplaceState(t,t.state,null)}function Gs(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=v({},a));for(var i in e)a[i]===void 0&&(a[i]=e[i])}return a}function J0(e){Hn(e)}function $0(e){console.error(e)}function P0(e){Hn(e)}function ii(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function W0(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function fc(e,t,a){return a=Ka(a),a.tag=3,a.payload={element:null},a.callback=function(){ii(e,t)},a}function em(e){return e=Ka(e),e.tag=3,e}function tm(e,t,a,l){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var o=l.value;e.payload=function(){return i(o)},e.callback=function(){W0(t,a,l)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){W0(t,a,l),typeof i!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var h=l.stack;this.componentDidCatch(l.value,{componentStack:h!==null?h:""})})}function bx(e,t,a,l,i){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&Sl(t,a,i,!0),a=Ht.current,a!==null){switch(a.tag){case 31:case 13:return Jt===null?bi():a.alternate===null&&Pe===0&&(Pe=3),a.flags&=-257,a.flags|=65536,a.lanes=i,l===Kn?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),Hc(e,l,i)),!1;case 22:return a.flags|=65536,l===Kn?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),Hc(e,l,i)),!1}throw Error(d(435,a.tag))}return Hc(e,l,i),bi(),!1}if(Ae)return t=Ht.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,l!==_o&&(e=Error(d(422),{cause:l}),Mr(Vt(e,a)))):(l!==_o&&(t=Error(d(423),{cause:l}),Mr(Vt(t,a))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,l=Vt(l,a),i=fc(e.stateNode,l,i),Fo(e,i),Pe!==4&&(Pe=2)),!1;var o=Error(d(520),{cause:l});if(o=Vt(o,a),Jr===null?Jr=[o]:Jr.push(o),Pe!==4&&(Pe=2),t===null)return!0;l=Vt(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=i&-i,a.lanes|=e,e=fc(a.stateNode,l,e),Fo(a,e),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(ts===null||!ts.has(o))))return a.flags|=65536,i&=-i,a.lanes|=i,i=em(i),tm(i,e,a,l),Fo(a,i),!1}a=a.return}while(a!==null);return!1}var hc=Error(d(461)),nt=!1;function xt(e,t,a,l){t.child=e===null?r0(t,null,a,l):Ys(t,e.child,a,l)}function am(e,t,a,l,i){a=a.render;var o=t.ref;if("ref"in l){var m={};for(var h in l)h!=="ref"&&(m[h]=l[h])}else m=l;return Hs(t),l=Io(e,t,a,m,o,i),h=Jo(),e!==null&&!nt?($o(e,t,i),Ca(e,t,i)):(Ae&&h&&Eo(t),t.flags|=1,xt(e,t,l,i),t.child)}function sm(e,t,a,l,i){if(e===null){var o=a.type;return typeof o=="function"&&!Do(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,lm(e,t,o,l,i)):(e=Yn(a.type,null,l,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!wc(e,i)){var m=o.memoizedProps;if(a=a.compare,a=a!==null?a:Ar,a(m,l)&&e.ref===t.ref)return Ca(e,t,i)}return t.flags|=1,e=va(o,l),e.ref=t.ref,e.return=t,t.child=e}function lm(e,t,a,l,i){if(e!==null){var o=e.memoizedProps;if(Ar(o,l)&&e.ref===t.ref)if(nt=!1,t.pendingProps=l=o,wc(e,i))(e.flags&131072)!==0&&(nt=!0);else return t.lanes=e.lanes,Ca(e,t,i)}return gc(e,t,a,l,i)}function rm(e,t,a,l){var i=l.children,o=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|a:a,e!==null){for(l=t.child=e.child,i=0;l!==null;)i=i|l.lanes|l.childLanes,l=l.sibling;l=i&~o}else l=0,t.child=null;return nm(e,t,o,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Vn(t,o!==null?o.cachePool:null),o!==null?o0(t,o):Xo(),c0(t);else return l=t.lanes=536870912,nm(e,t,o!==null?o.baseLanes|a:a,a,l)}else o!==null?(Vn(t,o.cachePool),o0(t,o),$a(),t.memoizedState=null):(e!==null&&Vn(t,null),Xo(),$a());return xt(e,t,i,a),t.child}function Fr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function nm(e,t,a,l,i){var o=qo();return o=o===null?null:{parent:lt._currentValue,pool:o},t.memoizedState={baseLanes:a,cachePool:o},e!==null&&Vn(t,null),Xo(),c0(t),e!==null&&Sl(e,t,l,!0),t.childLanes=i,null}function oi(e,t){return t=di({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function im(e,t,a){return Ys(t,e.child,null,a),e=oi(t,t.pendingProps),e.flags|=2,qt(t),t.memoizedState=null,e}function vx(e,t,a){var l=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ae){if(l.mode==="hidden")return e=oi(t,l),t.lanes=536870912,Fr(null,e);if(Zo(t),(e=Fe)?(e=vf(e,It),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Fa!==null?{id:na,overflow:ia}:null,retryLane:536870912,hydrationErrors:null},a=Gu(e),a.return=t,t.child=a,ht=t,Fe=null)):e=null,e===null)throw Xa(t);return t.lanes=536870912,null}return oi(t,l)}var o=e.memoizedState;if(o!==null){var m=o.dehydrated;if(Zo(t),i)if(t.flags&256)t.flags&=-257,t=im(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(d(558));else if(nt||Sl(e,t,a,!1),i=(a&e.childLanes)!==0,nt||i){if(l=Ye,l!==null&&(m=$d(l,a),m!==0&&m!==o.retryLane))throw o.retryLane=m,zs(e,m),Tt(l,e,m),hc;bi(),t=im(e,t,a)}else e=o.treeContext,Fe=$t(m.nextSibling),ht=t,Ae=!0,Ga=null,It=!1,e!==null&&Zu(t,e),t=oi(t,l),t.flags|=4096;return t}return e=va(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ci(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(d(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function gc(e,t,a,l,i){return Hs(t),a=Io(e,t,a,l,void 0,i),l=Jo(),e!==null&&!nt?($o(e,t,i),Ca(e,t,i)):(Ae&&l&&Eo(t),t.flags|=1,xt(e,t,a,i),t.child)}function om(e,t,a,l,i,o){return Hs(t),t.updateQueue=null,a=u0(t,l,a,i),d0(e),l=Jo(),e!==null&&!nt?($o(e,t,o),Ca(e,t,o)):(Ae&&l&&Eo(t),t.flags|=1,xt(e,t,a,o),t.child)}function cm(e,t,a,l,i){if(Hs(t),t.stateNode===null){var o=vl,m=a.contextType;typeof m=="object"&&m!==null&&(o=gt(m)),o=new a(l,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=mc,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=l,o.state=t.memoizedState,o.refs={},Qo(t),m=a.contextType,o.context=typeof m=="object"&&m!==null?gt(m):vl,o.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(uc(t,a,m,l),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(m=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),m!==o.state&&mc.enqueueReplaceState(o,o.state,null),Hr(t,l,o,i),Lr(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){o=t.stateNode;var h=t.memoizedProps,N=Gs(a,h);o.props=N;var B=o.context,K=a.contextType;m=vl,typeof K=="object"&&K!==null&&(m=gt(K));var W=a.getDerivedStateFromProps;K=typeof W=="function"||typeof o.getSnapshotBeforeUpdate=="function",h=t.pendingProps!==h,K||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(h||B!==m)&&I0(t,o,l,m),Za=!1;var Q=t.memoizedState;o.state=Q,Hr(t,l,o,i),Lr(),B=t.memoizedState,h||Q!==B||Za?(typeof W=="function"&&(uc(t,a,W,l),B=t.memoizedState),(N=Za||K0(t,a,N,l,Q,B,m))?(K||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=B),o.props=l,o.state=B,o.context=m,l=N):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{o=t.stateNode,Yo(e,t),m=t.memoizedProps,K=Gs(a,m),o.props=K,W=t.pendingProps,Q=o.context,B=a.contextType,N=vl,typeof B=="object"&&B!==null&&(N=gt(B)),h=a.getDerivedStateFromProps,(B=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(m!==W||Q!==N)&&I0(t,o,l,N),Za=!1,Q=t.memoizedState,o.state=Q,Hr(t,l,o,i),Lr();var X=t.memoizedState;m!==W||Q!==X||Za||e!==null&&e.dependencies!==null&&Gn(e.dependencies)?(typeof h=="function"&&(uc(t,a,h,l),X=t.memoizedState),(K=Za||K0(t,a,K,l,Q,X,N)||e!==null&&e.dependencies!==null&&Gn(e.dependencies))?(B||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(l,X,N),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(l,X,N)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||m===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=X),o.props=l,o.state=X,o.context=N,l=K):(typeof o.componentDidUpdate!="function"||m===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),l=!1)}return o=l,ci(e,t),l=(t.flags&128)!==0,o||l?(o=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&l?(t.child=Ys(t,e.child,null,i),t.child=Ys(t,null,a,i)):xt(e,t,a,i),t.memoizedState=o.state,e=t.child):e=Ca(e,t,i),e}function dm(e,t,a,l){return Rs(),t.flags|=256,xt(e,t,a,l),t.child}var xc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yc(e){return{baseLanes:e,cachePool:Wu()}}function pc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Qt),e}function um(e,t,a){var l=t.pendingProps,i=!1,o=(t.flags&128)!==0,m;if((m=o)||(m=e!==null&&e.memoizedState===null?!1:(tt.current&2)!==0),m&&(i=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ae){if(i?Ja(t):$a(),(e=Fe)?(e=vf(e,It),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Fa!==null?{id:na,overflow:ia}:null,retryLane:536870912,hydrationErrors:null},a=Gu(e),a.return=t,t.child=a,ht=t,Fe=null)):e=null,e===null)throw Xa(t);return ed(e)?t.lanes=32:t.lanes=536870912,null}var h=l.children;return l=l.fallback,i?($a(),i=t.mode,h=di({mode:"hidden",children:h},i),l=Us(l,i,a,null),h.return=t,l.return=t,h.sibling=l,t.child=h,l=t.child,l.memoizedState=yc(a),l.childLanes=pc(e,m,a),t.memoizedState=xc,Fr(null,l)):(Ja(t),bc(t,h))}var N=e.memoizedState;if(N!==null&&(h=N.dehydrated,h!==null)){if(o)t.flags&256?(Ja(t),t.flags&=-257,t=vc(e,t,a)):t.memoizedState!==null?($a(),t.child=e.child,t.flags|=128,t=null):($a(),h=l.fallback,i=t.mode,l=di({mode:"visible",children:l.children},i),h=Us(h,i,a,null),h.flags|=2,l.return=t,h.return=t,l.sibling=h,t.child=l,Ys(t,e.child,null,a),l=t.child,l.memoizedState=yc(a),l.childLanes=pc(e,m,a),t.memoizedState=xc,t=Fr(null,l));else if(Ja(t),ed(h)){if(m=h.nextSibling&&h.nextSibling.dataset,m)var B=m.dgst;m=B,l=Error(d(419)),l.stack="",l.digest=m,Mr({value:l,source:null,stack:null}),t=vc(e,t,a)}else if(nt||Sl(e,t,a,!1),m=(a&e.childLanes)!==0,nt||m){if(m=Ye,m!==null&&(l=$d(m,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,zs(e,l),Tt(m,e,l),hc;Wc(h)||bi(),t=vc(e,t,a)}else Wc(h)?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,Fe=$t(h.nextSibling),ht=t,Ae=!0,Ga=null,It=!1,e!==null&&Zu(t,e),t=bc(t,l.children),t.flags|=4096);return t}return i?($a(),h=l.fallback,i=t.mode,N=e.child,B=N.sibling,l=va(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,B!==null?h=va(B,h):(h=Us(h,i,a,null),h.flags|=2),h.return=t,l.return=t,l.sibling=h,t.child=l,Fr(null,l),l=t.child,h=e.child.memoizedState,h===null?h=yc(a):(i=h.cachePool,i!==null?(N=lt._currentValue,i=i.parent!==N?{parent:N,pool:N}:i):i=Wu(),h={baseLanes:h.baseLanes|a,cachePool:i}),l.memoizedState=h,l.childLanes=pc(e,m,a),t.memoizedState=xc,Fr(e.child,l)):(Ja(t),a=e.child,e=a.sibling,a=va(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=a,t.memoizedState=null,a)}function bc(e,t){return t=di({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function di(e,t){return e=Lt(22,e,null,t),e.lanes=0,e}function vc(e,t,a){return Ys(t,e.child,null,a),e=bc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mm(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Uo(e.return,t,a)}function jc(e,t,a,l,i,o){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:i,treeForkCount:o}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=i,m.treeForkCount=o)}function fm(e,t,a){var l=t.pendingProps,i=l.revealOrder,o=l.tail;l=l.children;var m=tt.current,h=(m&2)!==0;if(h?(m=m&1|2,t.flags|=128):m&=1,Z(tt,m),xt(e,t,l,a),l=Ae?Er:0,!h&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mm(e,a,t);else if(e.tag===19)mm(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(a=t.child,i=null;a!==null;)e=a.alternate,e!==null&&Pn(e)===null&&(i=a),a=a.sibling;a=i,a===null?(i=t.child,t.child=null):(i=a.sibling,a.sibling=null),jc(t,!1,i,a,o,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Pn(e)===null){t.child=i;break}e=i.sibling,i.sibling=a,a=i,i=e}jc(t,!0,a,null,o,l);break;case"together":jc(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Ca(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),es|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Sl(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(d(153));if(t.child!==null){for(e=t.child,a=va(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=va(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function wc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Gn(e)))}function jx(e,t,a){switch(t.tag){case 3:Ie(t,t.stateNode.containerInfo),Va(t,lt,e.memoizedState.cache),Rs();break;case 27:case 5:re(t);break;case 4:Ie(t,t.stateNode.containerInfo);break;case 10:Va(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Zo(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Ja(t),t.flags|=128,null):(a&t.child.childLanes)!==0?um(e,t,a):(Ja(t),e=Ca(e,t,a),e!==null?e.sibling:null);Ja(t);break;case 19:var i=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(Sl(e,t,a,!1),l=(a&t.childLanes)!==0),i){if(l)return fm(e,t,a);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Z(tt,tt.current),l)break;return null;case 22:return t.lanes=0,rm(e,t,a,t.pendingProps);case 24:Va(t,lt,e.memoizedState.cache)}return Ca(e,t,a)}function hm(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)nt=!0;else{if(!wc(e,a)&&(t.flags&128)===0)return nt=!1,jx(e,t,a);nt=(e.flags&131072)!==0}else nt=!1,Ae&&(t.flags&1048576)!==0&&Vu(t,Er,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Bs(t.elementType),t.type=e,typeof e=="function")Do(e)?(l=Gs(e,l),t.tag=1,t=cm(null,t,e,l,a)):(t.tag=0,t=gc(null,t,e,l,a));else{if(e!=null){var i=e.$$typeof;if(i===C){t.tag=11,t=am(null,t,e,l,a);break e}else if(i===$){t.tag=14,t=sm(null,t,e,l,a);break e}}throw t=ce(e)||e,Error(d(306,t,""))}}return t;case 0:return gc(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,i=Gs(l,t.pendingProps),cm(e,t,l,i,a);case 3:e:{if(Ie(t,t.stateNode.containerInfo),e===null)throw Error(d(387));l=t.pendingProps;var o=t.memoizedState;i=o.element,Yo(e,t),Hr(t,l,null,a);var m=t.memoizedState;if(l=m.cache,Va(t,lt,l),l!==o.cache&&Ro(t,[lt],a,!0),Lr(),l=m.element,o.isDehydrated)if(o={element:l,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=dm(e,t,l,a);break e}else if(l!==i){i=Vt(Error(d(424)),t),Mr(i),t=dm(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Fe=$t(e.firstChild),ht=t,Ae=!0,Ga=null,It=!0,a=r0(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Rs(),l===i){t=Ca(e,t,a);break e}xt(e,t,l,a)}t=t.child}return t;case 26:return ci(e,t),e===null?(a=Cf(t.type,null,t.pendingProps,null))?t.memoizedState=a:Ae||(a=t.type,e=t.pendingProps,l=Ci(ge.current).createElement(a),l[ft]=t,l[Nt]=e,yt(l,a,e),dt(l),t.stateNode=l):t.memoizedState=Cf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return re(t),e===null&&Ae&&(l=t.stateNode=Nf(t.type,t.pendingProps,ge.current),ht=t,It=!0,i=Fe,rs(t.type)?(td=i,Fe=$t(l.firstChild)):Fe=i),xt(e,t,t.pendingProps.children,a),ci(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ae&&((i=l=Fe)&&(l=$x(l,t.type,t.pendingProps,It),l!==null?(t.stateNode=l,ht=t,Fe=$t(l.firstChild),It=!1,i=!0):i=!1),i||Xa(t)),re(t),i=t.type,o=t.pendingProps,m=e!==null?e.memoizedProps:null,l=o.children,Jc(i,o)?l=null:m!==null&&Jc(i,m)&&(t.flags|=32),t.memoizedState!==null&&(i=Io(e,t,mx,null,null,a),ln._currentValue=i),ci(e,t),xt(e,t,l,a),t.child;case 6:return e===null&&Ae&&((e=a=Fe)&&(a=Px(a,t.pendingProps,It),a!==null?(t.stateNode=a,ht=t,Fe=null,e=!0):e=!1),e||Xa(t)),null;case 13:return um(e,t,a);case 4:return Ie(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Ys(t,null,l,a):xt(e,t,l,a),t.child;case 11:return am(e,t,t.type,t.pendingProps,a);case 7:return xt(e,t,t.pendingProps,a),t.child;case 8:return xt(e,t,t.pendingProps.children,a),t.child;case 12:return xt(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,Va(t,t.type,l.value),xt(e,t,l.children,a),t.child;case 9:return i=t.type._context,l=t.pendingProps.children,Hs(t),i=gt(i),l=l(i),t.flags|=1,xt(e,t,l,a),t.child;case 14:return sm(e,t,t.type,t.pendingProps,a);case 15:return lm(e,t,t.type,t.pendingProps,a);case 19:return fm(e,t,a);case 31:return vx(e,t,a);case 22:return rm(e,t,a,t.pendingProps);case 24:return Hs(t),l=gt(lt),e===null?(i=qo(),i===null&&(i=Ye,o=Lo(),i.pooledCache=o,o.refCount++,o!==null&&(i.pooledCacheLanes|=a),i=o),t.memoizedState={parent:l,cache:i},Qo(t),Va(t,lt,i)):((e.lanes&a)!==0&&(Yo(e,t),Hr(t,null,null,a),Lr()),i=e.memoizedState,o=t.memoizedState,i.parent!==l?(i={parent:l,cache:l},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),Va(t,lt,l)):(l=o.cache,Va(t,lt,l),l!==i.cache&&Ro(t,[lt],a,!0))),xt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(d(156,t.tag))}function Da(e){e.flags|=4}function Nc(e,t,a,l,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Qm())e.flags|=8192;else throw Qs=Kn,Bo}else e.flags&=-16777217}function gm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Mf(t))if(Qm())e.flags|=8192;else throw Qs=Kn,Bo}function ui(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Kd():536870912,e.lanes|=t,Rl|=t)}function Gr(e,t){if(!Ae)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ge(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var i=e.child;i!==null;)a|=i.lanes|i.childLanes,l|=i.subtreeFlags&65011712,l|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)a|=i.lanes|i.childLanes,l|=i.subtreeFlags,l|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function wx(e,t,a){var l=t.pendingProps;switch(Mo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(t),null;case 1:return Ge(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Na(lt),Qe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Nl(t)?Da(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Oo())),Ge(t),null;case 26:var i=t.type,o=t.memoizedState;return e===null?(Da(t),o!==null?(Ge(t),gm(t,o)):(Ge(t),Nc(t,i,null,l,a))):o?o!==e.memoizedState?(Da(t),Ge(t),gm(t,o)):(Ge(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Da(t),Ge(t),Nc(t,i,e,l,a)),null;case 27:if(ot(t),a=ge.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Da(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return Ge(t),null}e=ee.current,Nl(t)?Ku(t):(e=Nf(i,l,a),t.stateNode=e,Da(t))}return Ge(t),null;case 5:if(ot(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Da(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return Ge(t),null}if(o=ee.current,Nl(t))Ku(t);else{var m=Ci(ge.current);switch(o){case 1:o=m.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:o=m.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":o=m.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":o=m.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":o=m.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof l.is=="string"?m.createElement("select",{is:l.is}):m.createElement("select"),l.multiple?o.multiple=!0:l.size&&(o.size=l.size);break;default:o=typeof l.is=="string"?m.createElement(i,{is:l.is}):m.createElement(i)}}o[ft]=t,o[Nt]=l;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=o;e:switch(yt(o,i,l),i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Da(t)}}return Ge(t),Nc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Da(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(d(166));if(e=ge.current,Nl(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,i=ht,i!==null)switch(i.tag){case 27:case 5:l=i.memoizedProps}e[ft]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||mf(e.nodeValue,a)),e||Xa(t,!0)}else e=Ci(e).createTextNode(l),e[ft]=t,t.stateNode=e}return Ge(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(l=Nl(t),a!==null){if(e===null){if(!l)throw Error(d(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(557));e[ft]=t}else Rs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ge(t),e=!1}else a=Oo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(qt(t),t):(qt(t),null);if((t.flags&128)!==0)throw Error(d(558))}return Ge(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Nl(t),l!==null&&l.dehydrated!==null){if(e===null){if(!i)throw Error(d(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(d(317));i[ft]=t}else Rs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ge(t),i=!1}else i=Oo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(qt(t),t):(qt(t),null)}return qt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=t.child,i=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(i=l.alternate.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==i&&(l.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),ui(t,t.updateQueue),Ge(t),null);case 4:return Qe(),e===null&&Xc(t.stateNode.containerInfo),Ge(t),null;case 10:return Na(t.type),Ge(t),null;case 19:if(w(tt),l=t.memoizedState,l===null)return Ge(t),null;if(i=(t.flags&128)!==0,o=l.rendering,o===null)if(i)Gr(l,!1);else{if(Pe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Pn(e),o!==null){for(t.flags|=128,Gr(l,!1),e=o.updateQueue,t.updateQueue=e,ui(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Fu(a,e),a=a.sibling;return Z(tt,tt.current&1|2),Ae&&ja(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Ue()>xi&&(t.flags|=128,i=!0,Gr(l,!1),t.lanes=4194304)}else{if(!i)if(e=Pn(o),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ui(t,e),Gr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Ae)return Ge(t),null}else 2*Ue()-l.renderingStartTime>xi&&a!==536870912&&(t.flags|=128,i=!0,Gr(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(e=l.last,e!==null?e.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ue(),e.sibling=null,a=tt.current,Z(tt,i?a&1|2:a&1),Ae&&ja(t,l.treeForkCount),e):(Ge(t),null);case 22:case 23:return qt(t),Vo(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Ge(t),t.subtreeFlags&6&&(t.flags|=8192)):Ge(t),a=t.updateQueue,a!==null&&ui(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&w(qs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Na(lt),Ge(t),null;case 25:return null;case 30:return null}throw Error(d(156,t.tag))}function Nx(e,t){switch(Mo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Na(lt),Qe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ot(t),null;case 31:if(t.memoizedState!==null){if(qt(t),t.alternate===null)throw Error(d(340));Rs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(qt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(d(340));Rs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return w(tt),null;case 4:return Qe(),null;case 10:return Na(t.type),null;case 22:case 23:return qt(t),Vo(),e!==null&&w(qs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Na(lt),null;case 25:return null;default:return null}}function xm(e,t){switch(Mo(t),t.tag){case 3:Na(lt),Qe();break;case 26:case 27:case 5:ot(t);break;case 4:Qe();break;case 31:t.memoizedState!==null&&qt(t);break;case 13:qt(t);break;case 19:w(tt);break;case 10:Na(t.type);break;case 22:case 23:qt(t),Vo(),e!==null&&w(qs);break;case 24:Na(lt)}}function Xr(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var i=l.next;a=i;do{if((a.tag&e)===e){l=void 0;var o=a.create,m=a.inst;l=o(),m.destroy=l}a=a.next}while(a!==i)}}catch(h){Le(t,t.return,h)}}function Pa(e,t,a){try{var l=t.updateQueue,i=l!==null?l.lastEffect:null;if(i!==null){var o=i.next;l=o;do{if((l.tag&e)===e){var m=l.inst,h=m.destroy;if(h!==void 0){m.destroy=void 0,i=t;var N=a,B=h;try{B()}catch(K){Le(i,N,K)}}}l=l.next}while(l!==o)}}catch(K){Le(t,t.return,K)}}function ym(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{i0(t,a)}catch(l){Le(e,e.return,l)}}}function pm(e,t,a){a.props=Gs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Le(e,t,l)}}function Vr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(i){Le(e,t,i)}}function oa(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(i){Le(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){Le(e,t,i)}else a.current=null}function bm(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(i){Le(e,e.return,i)}}function Sc(e,t,a){try{var l=e.stateNode;Xx(l,e.type,a,t),l[Nt]=t}catch(i){Le(e,e.return,i)}}function vm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&rs(e.type)||e.tag===4}function kc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&rs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cc(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=pa));else if(l!==4&&(l===27&&rs(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Cc(e,t,a),e=e.sibling;e!==null;)Cc(e,t,a),e=e.sibling}function mi(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&rs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(mi(e,t,a),e=e.sibling;e!==null;)mi(e,t,a),e=e.sibling}function jm(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);yt(t,l,a),t[ft]=e,t[Nt]=a}catch(o){Le(e,e.return,o)}}var Aa=!1,it=!1,Dc=!1,wm=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Sx(e,t){if(e=e.containerInfo,Kc=Oi,e=zu(e),vo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var i=l.anchorOffset,o=l.focusNode;l=l.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var m=0,h=-1,N=-1,B=0,K=0,W=e,Q=null;t:for(;;){for(var X;W!==a||i!==0&&W.nodeType!==3||(h=m+i),W!==o||l!==0&&W.nodeType!==3||(N=m+l),W.nodeType===3&&(m+=W.nodeValue.length),(X=W.firstChild)!==null;)Q=W,W=X;for(;;){if(W===e)break t;if(Q===a&&++B===i&&(h=m),Q===o&&++K===l&&(N=m),(X=W.nextSibling)!==null)break;W=Q,Q=W.parentNode}W=X}a=h===-1||N===-1?null:{start:h,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ic={focusedElem:e,selectionRange:a},Oi=!1,ut=t;ut!==null;)if(t=ut,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ut=e;else for(;ut!==null;){switch(t=ut,o=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)i=e[a],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,a=t,i=o.memoizedProps,o=o.memoizedState,l=a.stateNode;try{var ue=Gs(a.type,i);e=l.getSnapshotBeforeUpdate(ue,o),l.__reactInternalSnapshotBeforeUpdate=e}catch(xe){Le(a,a.return,xe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Pc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=t.sibling,e!==null){e.return=t.return,ut=e;break}ut=t.return}}function Nm(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ea(e,a),l&4&&Xr(5,a);break;case 1:if(Ea(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(m){Le(a,a.return,m)}else{var i=Gs(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Le(a,a.return,m)}}l&64&&ym(a),l&512&&Vr(a,a.return);break;case 3:if(Ea(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{i0(e,t)}catch(m){Le(a,a.return,m)}}break;case 27:t===null&&l&4&&jm(a);case 26:case 5:Ea(e,a),t===null&&l&4&&bm(a),l&512&&Vr(a,a.return);break;case 12:Ea(e,a);break;case 31:Ea(e,a),l&4&&Cm(e,a);break;case 13:Ea(e,a),l&4&&Dm(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Ox.bind(null,a),Wx(e,a))));break;case 22:if(l=a.memoizedState!==null||Aa,!l){t=t!==null&&t.memoizedState!==null||it,i=Aa;var o=it;Aa=l,(it=t)&&!o?Ma(e,a,(a.subtreeFlags&8772)!==0):Ea(e,a),Aa=i,it=o}break;case 30:break;default:Ea(e,a)}}function Sm(e){var t=e.alternate;t!==null&&(e.alternate=null,Sm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ao(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Xe=null,kt=!1;function Ta(e,t,a){for(a=a.child;a!==null;)km(e,t,a),a=a.sibling}function km(e,t,a){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(xr,a)}catch{}switch(a.tag){case 26:it||oa(a,t),Ta(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:it||oa(a,t);var l=Xe,i=kt;rs(a.type)&&(Xe=a.stateNode,kt=!1),Ta(e,t,a),tn(a.stateNode),Xe=l,kt=i;break;case 5:it||oa(a,t);case 6:if(l=Xe,i=kt,Xe=null,Ta(e,t,a),Xe=l,kt=i,Xe!==null)if(kt)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(a.stateNode)}catch(o){Le(a,t,o)}else try{Xe.removeChild(a.stateNode)}catch(o){Le(a,t,o)}break;case 18:Xe!==null&&(kt?(e=Xe,pf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Gl(e)):pf(Xe,a.stateNode));break;case 4:l=Xe,i=kt,Xe=a.stateNode.containerInfo,kt=!0,Ta(e,t,a),Xe=l,kt=i;break;case 0:case 11:case 14:case 15:Pa(2,a,t),it||Pa(4,a,t),Ta(e,t,a);break;case 1:it||(oa(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&pm(a,t,l)),Ta(e,t,a);break;case 21:Ta(e,t,a);break;case 22:it=(l=it)||a.memoizedState!==null,Ta(e,t,a),it=l;break;default:Ta(e,t,a)}}function Cm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Gl(e)}catch(a){Le(t,t.return,a)}}}function Dm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Gl(e)}catch(a){Le(t,t.return,a)}}function kx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new wm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new wm),t;default:throw Error(d(435,e.tag))}}function fi(e,t){var a=kx(e);t.forEach(function(l){if(!a.has(l)){a.add(l);var i=zx.bind(null,e,l);l.then(i,i)}})}function Ct(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var i=a[l],o=e,m=t,h=m;e:for(;h!==null;){switch(h.tag){case 27:if(rs(h.type)){Xe=h.stateNode,kt=!1;break e}break;case 5:Xe=h.stateNode,kt=!1;break e;case 3:case 4:Xe=h.stateNode.containerInfo,kt=!0;break e}h=h.return}if(Xe===null)throw Error(d(160));km(o,m,i),Xe=null,kt=!1,o=i.alternate,o!==null&&(o.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Am(t,e),t=t.sibling}var aa=null;function Am(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ct(t,e),Dt(e),l&4&&(Pa(3,e,e.return),Xr(3,e),Pa(5,e,e.return));break;case 1:Ct(t,e),Dt(e),l&512&&(it||a===null||oa(a,a.return)),l&64&&Aa&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var i=aa;if(Ct(t,e),Dt(e),l&512&&(it||a===null||oa(a,a.return)),l&4){var o=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,i=i.ownerDocument||i;t:switch(l){case"title":o=i.getElementsByTagName("title")[0],(!o||o[br]||o[ft]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=i.createElement(l),i.head.insertBefore(o,i.querySelector("head > title"))),yt(o,l,a),o[ft]=e,dt(o),l=o;break e;case"link":var m=Tf("link","href",i).get(l+(a.href||""));if(m){for(var h=0;h<m.length;h++)if(o=m[h],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(h,1);break t}}o=i.createElement(l),yt(o,l,a),i.head.appendChild(o);break;case"meta":if(m=Tf("meta","content",i).get(l+(a.content||""))){for(h=0;h<m.length;h++)if(o=m[h],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(h,1);break t}}o=i.createElement(l),yt(o,l,a),i.head.appendChild(o);break;default:throw Error(d(468,l))}o[ft]=e,dt(o),l=o}e.stateNode=l}else Ef(i,e.type,e.stateNode);else e.stateNode=Af(i,l,e.memoizedProps);else o!==l?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,l===null?Ef(i,e.type,e.stateNode):Af(i,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Sc(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ct(t,e),Dt(e),l&512&&(it||a===null||oa(a,a.return)),a!==null&&l&4&&Sc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ct(t,e),Dt(e),l&512&&(it||a===null||oa(a,a.return)),e.flags&32){i=e.stateNode;try{fl(i,"")}catch(ue){Le(e,e.return,ue)}}l&4&&e.stateNode!=null&&(i=e.memoizedProps,Sc(e,i,a!==null?a.memoizedProps:i)),l&1024&&(Dc=!0);break;case 6:if(Ct(t,e),Dt(e),l&4){if(e.stateNode===null)throw Error(d(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(ue){Le(e,e.return,ue)}}break;case 3:if(Ti=null,i=aa,aa=Di(t.containerInfo),Ct(t,e),aa=i,Dt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Gl(t.containerInfo)}catch(ue){Le(e,e.return,ue)}Dc&&(Dc=!1,Tm(e));break;case 4:l=aa,aa=Di(e.stateNode.containerInfo),Ct(t,e),Dt(e),aa=l;break;case 12:Ct(t,e),Dt(e);break;case 31:Ct(t,e),Dt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,fi(e,l)));break;case 13:Ct(t,e),Dt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(gi=Ue()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,fi(e,l)));break;case 22:i=e.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,B=Aa,K=it;if(Aa=B||i,it=K||N,Ct(t,e),it=K,Aa=B,Dt(e),l&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(a===null||N||Aa||it||Xs(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){N=a=t;try{if(o=N.stateNode,i)m=o.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{h=N.stateNode;var W=N.memoizedProps.style,Q=W!=null&&W.hasOwnProperty("display")?W.display:null;h.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ue){Le(N,N.return,ue)}}}else if(t.tag===6){if(a===null){N=t;try{N.stateNode.nodeValue=i?"":N.memoizedProps}catch(ue){Le(N,N.return,ue)}}}else if(t.tag===18){if(a===null){N=t;try{var X=N.stateNode;i?bf(X,!0):bf(N.stateNode,!1)}catch(ue){Le(N,N.return,ue)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,fi(e,a))));break;case 19:Ct(t,e),Dt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,fi(e,l)));break;case 30:break;case 21:break;default:Ct(t,e),Dt(e)}}function Dt(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(vm(l)){a=l;break}l=l.return}if(a==null)throw Error(d(160));switch(a.tag){case 27:var i=a.stateNode,o=kc(e);mi(e,o,i);break;case 5:var m=a.stateNode;a.flags&32&&(fl(m,""),a.flags&=-33);var h=kc(e);mi(e,h,m);break;case 3:case 4:var N=a.stateNode.containerInfo,B=kc(e);Cc(e,B,N);break;default:throw Error(d(161))}}catch(K){Le(e,e.return,K)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Tm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Tm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ea(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Nm(e,t.alternate,t),t=t.sibling}function Xs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Pa(4,t,t.return),Xs(t);break;case 1:oa(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&pm(t,t.return,a),Xs(t);break;case 27:tn(t.stateNode);case 26:case 5:oa(t,t.return),Xs(t);break;case 22:t.memoizedState===null&&Xs(t);break;case 30:Xs(t);break;default:Xs(t)}e=e.sibling}}function Ma(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,i=e,o=t,m=o.flags;switch(o.tag){case 0:case 11:case 15:Ma(i,o,a),Xr(4,o);break;case 1:if(Ma(i,o,a),l=o,i=l.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(B){Le(l,l.return,B)}if(l=o,i=l.updateQueue,i!==null){var h=l.stateNode;try{var N=i.shared.hiddenCallbacks;if(N!==null)for(i.shared.hiddenCallbacks=null,i=0;i<N.length;i++)n0(N[i],h)}catch(B){Le(l,l.return,B)}}a&&m&64&&ym(o),Vr(o,o.return);break;case 27:jm(o);case 26:case 5:Ma(i,o,a),a&&l===null&&m&4&&bm(o),Vr(o,o.return);break;case 12:Ma(i,o,a);break;case 31:Ma(i,o,a),a&&m&4&&Cm(i,o);break;case 13:Ma(i,o,a),a&&m&4&&Dm(i,o);break;case 22:o.memoizedState===null&&Ma(i,o,a),Vr(o,o.return);break;case 30:break;default:Ma(i,o,a)}t=t.sibling}}function Ac(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&_r(a))}function Tc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_r(e))}function sa(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Em(e,t,a,l),t=t.sibling}function Em(e,t,a,l){var i=t.flags;switch(t.tag){case 0:case 11:case 15:sa(e,t,a,l),i&2048&&Xr(9,t);break;case 1:sa(e,t,a,l);break;case 3:sa(e,t,a,l),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_r(e)));break;case 12:if(i&2048){sa(e,t,a,l),e=t.stateNode;try{var o=t.memoizedProps,m=o.id,h=o.onPostCommit;typeof h=="function"&&h(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){Le(t,t.return,N)}}else sa(e,t,a,l);break;case 31:sa(e,t,a,l);break;case 13:sa(e,t,a,l);break;case 23:break;case 22:o=t.stateNode,m=t.alternate,t.memoizedState!==null?o._visibility&2?sa(e,t,a,l):Zr(e,t):o._visibility&2?sa(e,t,a,l):(o._visibility|=2,Ol(e,t,a,l,(t.subtreeFlags&10256)!==0||!1)),i&2048&&Ac(m,t);break;case 24:sa(e,t,a,l),i&2048&&Tc(t.alternate,t);break;default:sa(e,t,a,l)}}function Ol(e,t,a,l,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=e,m=t,h=a,N=l,B=m.flags;switch(m.tag){case 0:case 11:case 15:Ol(o,m,h,N,i),Xr(8,m);break;case 23:break;case 22:var K=m.stateNode;m.memoizedState!==null?K._visibility&2?Ol(o,m,h,N,i):Zr(o,m):(K._visibility|=2,Ol(o,m,h,N,i)),i&&B&2048&&Ac(m.alternate,m);break;case 24:Ol(o,m,h,N,i),i&&B&2048&&Tc(m.alternate,m);break;default:Ol(o,m,h,N,i)}t=t.sibling}}function Zr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,i=l.flags;switch(l.tag){case 22:Zr(a,l),i&2048&&Ac(l.alternate,l);break;case 24:Zr(a,l),i&2048&&Tc(l.alternate,l);break;default:Zr(a,l)}t=t.sibling}}var Kr=8192;function zl(e,t,a){if(e.subtreeFlags&Kr)for(e=e.child;e!==null;)Mm(e,t,a),e=e.sibling}function Mm(e,t,a){switch(e.tag){case 26:zl(e,t,a),e.flags&Kr&&e.memoizedState!==null&&uy(a,aa,e.memoizedState,e.memoizedProps);break;case 5:zl(e,t,a);break;case 3:case 4:var l=aa;aa=Di(e.stateNode.containerInfo),zl(e,t,a),aa=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Kr,Kr=16777216,zl(e,t,a),Kr=l):zl(e,t,a));break;default:zl(e,t,a)}}function _m(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ir(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];ut=l,zm(l,e)}_m(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Om(e),e=e.sibling}function Om(e){switch(e.tag){case 0:case 11:case 15:Ir(e),e.flags&2048&&Pa(9,e,e.return);break;case 3:Ir(e);break;case 12:Ir(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,hi(e)):Ir(e);break;default:Ir(e)}}function hi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];ut=l,zm(l,e)}_m(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Pa(8,t,t.return),hi(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,hi(t));break;default:hi(t)}e=e.sibling}}function zm(e,t){for(;ut!==null;){var a=ut;switch(a.tag){case 0:case 11:case 15:Pa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:_r(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,ut=l;else e:for(a=e;ut!==null;){l=ut;var i=l.sibling,o=l.return;if(Sm(l),l===a){ut=null;break e}if(i!==null){i.return=o,ut=i;break e}ut=o}}}var Cx={getCacheForType:function(e){var t=gt(lt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return gt(lt).controller.signal}},Dx=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Ye=null,Se=null,Ce=0,Re=0,Bt=null,Wa=!1,Ul=!1,Ec=!1,_a=0,Pe=0,es=0,Vs=0,Mc=0,Qt=0,Rl=0,Jr=null,At=null,_c=!1,gi=0,Um=0,xi=1/0,yi=null,ts=null,ct=0,as=null,Ll=null,Oa=0,Oc=0,zc=null,Rm=null,$r=0,Uc=null;function Yt(){return(Oe&2)!==0&&Ce!==0?Ce&-Ce:F.T!==null?Qc():Pd()}function Lm(){if(Qt===0)if((Ce&536870912)===0||Ae){var e=kn;kn<<=1,(kn&3932160)===0&&(kn=262144),Qt=e}else Qt=536870912;return e=Ht.current,e!==null&&(e.flags|=32),Qt}function Tt(e,t,a){(e===Ye&&(Re===2||Re===9)||e.cancelPendingCommit!==null)&&(Hl(e,0),ss(e,Ce,Qt,!1)),pr(e,a),((Oe&2)===0||e!==Ye)&&(e===Ye&&((Oe&2)===0&&(Vs|=a),Pe===4&&ss(e,Ce,Qt,!1)),ca(e))}function Hm(e,t,a){if((Oe&6)!==0)throw Error(d(327));var l=!a&&(t&127)===0&&(t&e.expiredLanes)===0||yr(e,t),i=l?Ex(e,t):Lc(e,t,!0),o=l;do{if(i===0){Ul&&!l&&ss(e,t,0,!1);break}else{if(a=e.current.alternate,o&&!Ax(a)){i=Lc(e,t,!1),o=!1;continue}if(i===2){if(o=t,e.errorRecoveryDisabledLanes&o)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var h=e;i=Jr;var N=h.current.memoizedState.isDehydrated;if(N&&(Hl(h,m).flags|=256),m=Lc(h,m,!1),m!==2){if(Ec&&!N){h.errorRecoveryDisabledLanes|=o,Vs|=o,i=4;break e}o=At,At=i,o!==null&&(At===null?At=o:At.push.apply(At,o))}i=m}if(o=!1,i!==2)continue}}if(i===1){Hl(e,0),ss(e,t,0,!0);break}e:{switch(l=e,o=i,o){case 0:case 1:throw Error(d(345));case 4:if((t&4194048)!==t)break;case 6:ss(l,t,Qt,!Wa);break e;case 2:At=null;break;case 3:case 5:break;default:throw Error(d(329))}if((t&62914560)===t&&(i=gi+300-Ue(),10<i)){if(ss(l,t,Qt,!Wa),Dn(l,0,!0)!==0)break e;Oa=t,l.timeoutHandle=xf(qm.bind(null,l,a,At,yi,_c,t,Qt,Vs,Rl,Wa,o,"Throttled",-0,0),i);break e}qm(l,a,At,yi,_c,t,Qt,Vs,Rl,Wa,o,null,-0,0)}}break}while(!0);ca(e)}function qm(e,t,a,l,i,o,m,h,N,B,K,W,Q,X){if(e.timeoutHandle=-1,W=t.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pa},Mm(t,o,W);var ue=(o&62914560)===o?gi-Ue():(o&4194048)===o?Um-Ue():0;if(ue=my(W,ue),ue!==null){Oa=o,e.cancelPendingCommit=ue(Zm.bind(null,e,t,o,a,l,i,m,h,N,K,W,null,Q,X)),ss(e,o,m,!B);return}}Zm(e,t,o,a,l,i,m,h,N)}function Ax(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var i=a[l],o=i.getSnapshot;i=i.value;try{if(!Rt(o(),i))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ss(e,t,a,l){t&=~Mc,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var i=t;0<i;){var o=31-Ut(i),m=1<<o;l[o]=-1,i&=~m}a!==0&&Id(e,a,t)}function pi(){return(Oe&6)===0?(Pr(0),!1):!0}function Rc(){if(Se!==null){if(Re===0)var e=Se.return;else e=Se,wa=Ls=null,Po(e),Al=null,zr=0,e=Se;for(;e!==null;)xm(e.alternate,e),e=e.return;Se=null}}function Hl(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Kx(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Oa=0,Rc(),Ye=e,Se=a=va(e.current,null),Ce=t,Re=0,Bt=null,Wa=!1,Ul=yr(e,t),Ec=!1,Rl=Qt=Mc=Vs=es=Pe=0,At=Jr=null,_c=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var i=31-Ut(l),o=1<<i;t|=e[i],l&=~o}return _a=t,qn(),a}function Bm(e,t){je=null,F.H=Yr,t===Dl||t===Zn?(t=a0(),Re=3):t===Bo?(t=a0(),Re=4):Re=t===hc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Bt=t,Se===null&&(Pe=1,ii(e,Vt(t,e.current)))}function Qm(){var e=Ht.current;return e===null?!0:(Ce&4194048)===Ce?Jt===null:(Ce&62914560)===Ce||(Ce&536870912)!==0?e===Jt:!1}function Ym(){var e=F.H;return F.H=Yr,e===null?Yr:e}function Fm(){var e=F.A;return F.A=Cx,e}function bi(){Pe=4,Wa||(Ce&4194048)!==Ce&&Ht.current!==null||(Ul=!0),(es&134217727)===0&&(Vs&134217727)===0||Ye===null||ss(Ye,Ce,Qt,!1)}function Lc(e,t,a){var l=Oe;Oe|=2;var i=Ym(),o=Fm();(Ye!==e||Ce!==t)&&(yi=null,Hl(e,t)),t=!1;var m=Pe;e:do try{if(Re!==0&&Se!==null){var h=Se,N=Bt;switch(Re){case 8:Rc(),m=6;break e;case 3:case 2:case 9:case 6:Ht.current===null&&(t=!0);var B=Re;if(Re=0,Bt=null,ql(e,h,N,B),a&&Ul){m=0;break e}break;default:B=Re,Re=0,Bt=null,ql(e,h,N,B)}}Tx(),m=Pe;break}catch(K){Bm(e,K)}while(!0);return t&&e.shellSuspendCounter++,wa=Ls=null,Oe=l,F.H=i,F.A=o,Se===null&&(Ye=null,Ce=0,qn()),m}function Tx(){for(;Se!==null;)Gm(Se)}function Ex(e,t){var a=Oe;Oe|=2;var l=Ym(),i=Fm();Ye!==e||Ce!==t?(yi=null,xi=Ue()+500,Hl(e,t)):Ul=yr(e,t);e:do try{if(Re!==0&&Se!==null){t=Se;var o=Bt;t:switch(Re){case 1:Re=0,Bt=null,ql(e,t,o,1);break;case 2:case 9:if(e0(o)){Re=0,Bt=null,Xm(t);break}t=function(){Re!==2&&Re!==9||Ye!==e||(Re=7),ca(e)},o.then(t,t);break e;case 3:Re=7;break e;case 4:Re=5;break e;case 7:e0(o)?(Re=0,Bt=null,Xm(t)):(Re=0,Bt=null,ql(e,t,o,7));break;case 5:var m=null;switch(Se.tag){case 26:m=Se.memoizedState;case 5:case 27:var h=Se;if(m?Mf(m):h.stateNode.complete){Re=0,Bt=null;var N=h.sibling;if(N!==null)Se=N;else{var B=h.return;B!==null?(Se=B,vi(B)):Se=null}break t}}Re=0,Bt=null,ql(e,t,o,5);break;case 6:Re=0,Bt=null,ql(e,t,o,6);break;case 8:Rc(),Pe=6;break e;default:throw Error(d(462))}}Mx();break}catch(K){Bm(e,K)}while(!0);return wa=Ls=null,F.H=l,F.A=i,Oe=a,Se!==null?0:(Ye=null,Ce=0,qn(),Pe)}function Mx(){for(;Se!==null&&!ga();)Gm(Se)}function Gm(e){var t=hm(e.alternate,e,_a);e.memoizedProps=e.pendingProps,t===null?vi(e):Se=t}function Xm(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=om(a,t,t.pendingProps,t.type,void 0,Ce);break;case 11:t=om(a,t,t.pendingProps,t.type.render,t.ref,Ce);break;case 5:Po(t);default:xm(a,t),t=Se=Fu(t,_a),t=hm(a,t,_a)}e.memoizedProps=e.pendingProps,t===null?vi(e):Se=t}function ql(e,t,a,l){wa=Ls=null,Po(t),Al=null,zr=0;var i=t.return;try{if(bx(e,i,t,a,Ce)){Pe=1,ii(e,Vt(a,e.current)),Se=null;return}}catch(o){if(i!==null)throw Se=i,o;Pe=1,ii(e,Vt(a,e.current)),Se=null;return}t.flags&32768?(Ae||l===1?e=!0:Ul||(Ce&536870912)!==0?e=!1:(Wa=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ht.current,l!==null&&l.tag===13&&(l.flags|=16384))),Vm(t,e)):vi(t)}function vi(e){var t=e;do{if((t.flags&32768)!==0){Vm(t,Wa);return}e=t.return;var a=wx(t.alternate,t,_a);if(a!==null){Se=a;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Pe===0&&(Pe=5)}function Vm(e,t){do{var a=Nx(e.alternate,e);if(a!==null){a.flags&=32767,Se=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Se=e;return}Se=e=a}while(e!==null);Pe=6,Se=null}function Zm(e,t,a,l,i,o,m,h,N){e.cancelPendingCommit=null;do ji();while(ct!==0);if((Oe&6)!==0)throw Error(d(327));if(t!==null){if(t===e.current)throw Error(d(177));if(o=t.lanes|t.childLanes,o|=ko,dg(e,a,o,m,h,N),e===Ye&&(Se=Ye=null,Ce=0),Ll=t,as=e,Oa=a,Oc=o,zc=i,Rm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ux(Ot,function(){return Pm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=F.T,F.T=null,i=te.p,te.p=2,m=Oe,Oe|=4;try{Sx(e,t,a)}finally{Oe=m,te.p=i,F.T=l}}ct=1,Km(),Im(),Jm()}}function Km(){if(ct===1){ct=0;var e=as,t=Ll,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var l=te.p;te.p=2;var i=Oe;Oe|=4;try{Am(t,e);var o=Ic,m=zu(e.containerInfo),h=o.focusedElem,N=o.selectionRange;if(m!==h&&h&&h.ownerDocument&&Ou(h.ownerDocument.documentElement,h)){if(N!==null&&vo(h)){var B=N.start,K=N.end;if(K===void 0&&(K=B),"selectionStart"in h)h.selectionStart=B,h.selectionEnd=Math.min(K,h.value.length);else{var W=h.ownerDocument||document,Q=W&&W.defaultView||window;if(Q.getSelection){var X=Q.getSelection(),ue=h.textContent.length,xe=Math.min(N.start,ue),Be=N.end===void 0?xe:Math.min(N.end,ue);!X.extend&&xe>Be&&(m=Be,Be=xe,xe=m);var U=_u(h,xe),_=_u(h,Be);if(U&&_&&(X.rangeCount!==1||X.anchorNode!==U.node||X.anchorOffset!==U.offset||X.focusNode!==_.node||X.focusOffset!==_.offset)){var q=W.createRange();q.setStart(U.node,U.offset),X.removeAllRanges(),xe>Be?(X.addRange(q),X.extend(_.node,_.offset)):(q.setEnd(_.node,_.offset),X.addRange(q))}}}}for(W=[],X=h;X=X.parentNode;)X.nodeType===1&&W.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<W.length;h++){var J=W[h];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Oi=!!Kc,Ic=Kc=null}finally{Oe=i,te.p=l,F.T=a}}e.current=t,ct=2}}function Im(){if(ct===2){ct=0;var e=as,t=Ll,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var l=te.p;te.p=2;var i=Oe;Oe|=4;try{Nm(e,t.alternate,t)}finally{Oe=i,te.p=l,F.T=a}}ct=3}}function Jm(){if(ct===4||ct===3){ct=0,Je();var e=as,t=Ll,a=Oa,l=Rm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ct=5:(ct=0,Ll=as=null,$m(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(ts=null),eo(a),t=t.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(xr,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=F.T,i=te.p,te.p=2,F.T=null;try{for(var o=e.onRecoverableError,m=0;m<l.length;m++){var h=l[m];o(h.value,{componentStack:h.stack})}}finally{F.T=t,te.p=i}}(Oa&3)!==0&&ji(),ca(e),i=e.pendingLanes,(a&261930)!==0&&(i&42)!==0?e===Uc?$r++:($r=0,Uc=e):$r=0,Pr(0)}}function $m(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,_r(t)))}function ji(){return Km(),Im(),Jm(),Pm()}function Pm(){if(ct!==5)return!1;var e=as,t=Oc;Oc=0;var a=eo(Oa),l=F.T,i=te.p;try{te.p=32>a?32:a,F.T=null,a=zc,zc=null;var o=as,m=Oa;if(ct=0,Ll=as=null,Oa=0,(Oe&6)!==0)throw Error(d(331));var h=Oe;if(Oe|=4,Om(o.current),Em(o,o.current,m,a),Oe=h,Pr(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(xr,o)}catch{}return!0}finally{te.p=i,F.T=l,$m(e,t)}}function Wm(e,t,a){t=Vt(a,t),t=fc(e.stateNode,t,2),e=Ia(e,t,2),e!==null&&(pr(e,2),ca(e))}function Le(e,t,a){if(e.tag===3)Wm(e,e,a);else for(;t!==null;){if(t.tag===3){Wm(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ts===null||!ts.has(l))){e=Vt(a,e),a=em(2),l=Ia(t,a,2),l!==null&&(tm(a,l,t,e),pr(l,2),ca(l));break}}t=t.return}}function Hc(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Dx;var i=new Set;l.set(t,i)}else i=l.get(t),i===void 0&&(i=new Set,l.set(t,i));i.has(a)||(Ec=!0,i.add(a),e=_x.bind(null,e,t,a),t.then(e,e))}function _x(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ye===e&&(Ce&a)===a&&(Pe===4||Pe===3&&(Ce&62914560)===Ce&&300>Ue()-gi?(Oe&2)===0&&Hl(e,0):Mc|=a,Rl===Ce&&(Rl=0)),ca(e)}function ef(e,t){t===0&&(t=Kd()),e=zs(e,t),e!==null&&(pr(e,t),ca(e))}function Ox(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),ef(e,a)}function zx(e,t){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,i=e.memoizedState;i!==null&&(a=i.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(t),ef(e,a)}function Ux(e,t){return fr(e,t)}var wi=null,Bl=null,qc=!1,Ni=!1,Bc=!1,ls=0;function ca(e){e!==Bl&&e.next===null&&(Bl===null?wi=Bl=e:Bl=Bl.next=e),Ni=!0,qc||(qc=!0,Lx())}function Pr(e,t){if(!Bc&&Ni){Bc=!0;do for(var a=!1,l=wi;l!==null;){if(e!==0){var i=l.pendingLanes;if(i===0)var o=0;else{var m=l.suspendedLanes,h=l.pingedLanes;o=(1<<31-Ut(42|e)+1)-1,o&=i&~(m&~h),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,lf(l,o))}else o=Ce,o=Dn(l,l===Ye?o:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(o&3)===0||yr(l,o)||(a=!0,lf(l,o));l=l.next}while(a);Bc=!1}}function Rx(){tf()}function tf(){Ni=qc=!1;var e=0;ls!==0&&Zx()&&(e=ls);for(var t=Ue(),a=null,l=wi;l!==null;){var i=l.next,o=af(l,t);o===0?(l.next=null,a===null?wi=i:a.next=i,i===null&&(Bl=a)):(a=l,(e!==0||(o&3)!==0)&&(Ni=!0)),l=i}ct!==0&&ct!==5||Pr(e),ls!==0&&(ls=0)}function af(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var m=31-Ut(o),h=1<<m,N=i[m];N===-1?((h&a)===0||(h&l)!==0)&&(i[m]=cg(h,t)):N<=t&&(e.expiredLanes|=h),o&=~h}if(t=Ye,a=Ce,a=Dn(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(Re===2||Re===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&hr(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||yr(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&hr(l),eo(a)){case 2:case 8:a=As;break;case 32:a=Ot;break;case 268435456:a=Zd;break;default:a=Ot}return l=sf.bind(null,e),a=fr(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&hr(l),e.callbackPriority=2,e.callbackNode=null,2}function sf(e,t){if(ct!==0&&ct!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ji()&&e.callbackNode!==a)return null;var l=Ce;return l=Dn(e,e===Ye?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Hm(e,l,t),af(e,Ue()),e.callbackNode!=null&&e.callbackNode===a?sf.bind(null,e):null)}function lf(e,t){if(ji())return null;Hm(e,t,!0)}function Lx(){Ix(function(){(Oe&6)!==0?fr(Ds,Rx):tf()})}function Qc(){if(ls===0){var e=kl;e===0&&(e=Sn,Sn<<=1,(Sn&261888)===0&&(Sn=256)),ls=e}return ls}function rf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Mn(""+e)}function nf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Hx(e,t,a,l,i){if(t==="submit"&&a&&a.stateNode===i){var o=rf((i[Nt]||null).action),m=l.submitter;m&&(t=(t=m[Nt]||null)?rf(t.formAction):m.getAttribute("formAction"),t!==null&&(o=t,m=null));var h=new Un("action","action",null,l,i);e.push({event:h,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ls!==0){var N=m?nf(i,m):new FormData(i);ic(a,{pending:!0,data:N,method:i.method,action:o},null,N)}}else typeof o=="function"&&(h.preventDefault(),N=m?nf(i,m):new FormData(i),ic(a,{pending:!0,data:N,method:i.method,action:o},o,N))},currentTarget:i}]})}}for(var Yc=0;Yc<So.length;Yc++){var Fc=So[Yc],qx=Fc.toLowerCase(),Bx=Fc[0].toUpperCase()+Fc.slice(1);ta(qx,"on"+Bx)}ta(Lu,"onAnimationEnd"),ta(Hu,"onAnimationIteration"),ta(qu,"onAnimationStart"),ta("dblclick","onDoubleClick"),ta("focusin","onFocus"),ta("focusout","onBlur"),ta(ax,"onTransitionRun"),ta(sx,"onTransitionStart"),ta(lx,"onTransitionCancel"),ta(Bu,"onTransitionEnd"),ul("onMouseEnter",["mouseout","mouseover"]),ul("onMouseLeave",["mouseout","mouseover"]),ul("onPointerEnter",["pointerout","pointerover"]),ul("onPointerLeave",["pointerout","pointerover"]),Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Es("onBeforeInput",["compositionend","keypress","textInput","paste"]),Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wr));function of(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],i=l.event;l=l.listeners;e:{var o=void 0;if(t)for(var m=l.length-1;0<=m;m--){var h=l[m],N=h.instance,B=h.currentTarget;if(h=h.listener,N!==o&&i.isPropagationStopped())break e;o=h,i.currentTarget=B;try{o(i)}catch(K){Hn(K)}i.currentTarget=null,o=N}else for(m=0;m<l.length;m++){if(h=l[m],N=h.instance,B=h.currentTarget,h=h.listener,N!==o&&i.isPropagationStopped())break e;o=h,i.currentTarget=B;try{o(i)}catch(K){Hn(K)}i.currentTarget=null,o=N}}}}function ke(e,t){var a=t[to];a===void 0&&(a=t[to]=new Set);var l=e+"__bubble";a.has(l)||(cf(t,e,2,!1),a.add(l))}function Gc(e,t,a){var l=0;t&&(l|=4),cf(a,e,l,t)}var Si="_reactListening"+Math.random().toString(36).slice(2);function Xc(e){if(!e[Si]){e[Si]=!0,tu.forEach(function(a){a!=="selectionchange"&&(Qx.has(a)||Gc(a,!1,e),Gc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Si]||(t[Si]=!0,Gc("selectionchange",!1,t))}}function cf(e,t,a,l){switch(Hf(t)){case 2:var i=gy;break;case 8:i=xy;break;default:i=nd}a=i.bind(null,t,a,e),i=void 0,!uo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),l?i!==void 0?e.addEventListener(t,a,{capture:!0,passive:i}):e.addEventListener(t,a,!0):i!==void 0?e.addEventListener(t,a,{passive:i}):e.addEventListener(t,a,!1)}function Vc(e,t,a,l,i){var o=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var m=l.tag;if(m===3||m===4){var h=l.stateNode.containerInfo;if(h===i)break;if(m===4)for(m=l.return;m!==null;){var N=m.tag;if((N===3||N===4)&&m.stateNode.containerInfo===i)return;m=m.return}for(;h!==null;){if(m=ol(h),m===null)return;if(N=m.tag,N===5||N===6||N===26||N===27){l=o=m;continue e}h=h.parentNode}}l=l.return}fu(function(){var B=o,K=oo(a),W=[];e:{var Q=Qu.get(e);if(Q!==void 0){var X=Un,ue=e;switch(e){case"keypress":if(On(a)===0)break e;case"keydown":case"keyup":X=zg;break;case"focusin":ue="focus",X=go;break;case"focusout":ue="blur",X=go;break;case"beforeblur":case"afterblur":X=go;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=wg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Lg;break;case Lu:case Hu:case qu:X=kg;break;case Bu:X=qg;break;case"scroll":case"scrollend":X=vg;break;case"wheel":X=Qg;break;case"copy":case"cut":case"paste":X=Dg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=pu;break;case"toggle":case"beforetoggle":X=Fg}var xe=(t&4)!==0,Be=!xe&&(e==="scroll"||e==="scrollend"),U=xe?Q!==null?Q+"Capture":null:Q;xe=[];for(var _=B,q;_!==null;){var J=_;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||U===null||(J=jr(_,U),J!=null&&xe.push(en(_,J,q))),Be)break;_=_.return}0<xe.length&&(Q=new X(Q,ue,null,a,K),W.push({event:Q,listeners:xe}))}}if((t&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",Q&&a!==io&&(ue=a.relatedTarget||a.fromElement)&&(ol(ue)||ue[il]))break e;if((X||Q)&&(Q=K.window===K?K:(Q=K.ownerDocument)?Q.defaultView||Q.parentWindow:window,X?(ue=a.relatedTarget||a.toElement,X=B,ue=ue?ol(ue):null,ue!==null&&(Be=f(ue),xe=ue.tag,ue!==Be||xe!==5&&xe!==27&&xe!==6)&&(ue=null)):(X=null,ue=B),X!==ue)){if(xe=xu,J="onMouseLeave",U="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(xe=pu,J="onPointerLeave",U="onPointerEnter",_="pointer"),Be=X==null?Q:vr(X),q=ue==null?Q:vr(ue),Q=new xe(J,_+"leave",X,a,K),Q.target=Be,Q.relatedTarget=q,J=null,ol(K)===B&&(xe=new xe(U,_+"enter",ue,a,K),xe.target=q,xe.relatedTarget=Be,J=xe),Be=J,X&&ue)t:{for(xe=Yx,U=X,_=ue,q=0,J=U;J;J=xe(J))q++;J=0;for(var he=_;he;he=xe(he))J++;for(;0<q-J;)U=xe(U),q--;for(;0<J-q;)_=xe(_),J--;for(;q--;){if(U===_||_!==null&&U===_.alternate){xe=U;break t}U=xe(U),_=xe(_)}xe=null}else xe=null;X!==null&&df(W,Q,X,xe,!1),ue!==null&&Be!==null&&df(W,Be,ue,xe,!0)}}e:{if(Q=B?vr(B):window,X=Q.nodeName&&Q.nodeName.toLowerCase(),X==="select"||X==="input"&&Q.type==="file")var Me=Cu;else if(Su(Q))if(Du)Me=Wg;else{Me=$g;var me=Jg}else X=Q.nodeName,!X||X.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?B&&no(B.elementType)&&(Me=Cu):Me=Pg;if(Me&&(Me=Me(e,B))){ku(W,Me,a,K);break e}me&&me(e,Q,B),e==="focusout"&&B&&Q.type==="number"&&B.memoizedProps.value!=null&&ro(Q,"number",Q.value)}switch(me=B?vr(B):window,e){case"focusin":(Su(me)||me.contentEditable==="true")&&(yl=me,jo=B,Tr=null);break;case"focusout":Tr=jo=yl=null;break;case"mousedown":wo=!0;break;case"contextmenu":case"mouseup":case"dragend":wo=!1,Uu(W,a,K);break;case"selectionchange":if(tx)break;case"keydown":case"keyup":Uu(W,a,K)}var we;if(yo)e:{switch(e){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else xl?wu(e,a)&&(De="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(bu&&a.locale!=="ko"&&(xl||De!=="onCompositionStart"?De==="onCompositionEnd"&&xl&&(we=hu()):(Ya=K,mo="value"in Ya?Ya.value:Ya.textContent,xl=!0)),me=ki(B,De),0<me.length&&(De=new yu(De,e,null,a,K),W.push({event:De,listeners:me}),we?De.data=we:(we=Nu(a),we!==null&&(De.data=we)))),(we=Xg?Vg(e,a):Zg(e,a))&&(De=ki(B,"onBeforeInput"),0<De.length&&(me=new yu("onBeforeInput","beforeinput",null,a,K),W.push({event:me,listeners:De}),me.data=we)),Hx(W,e,B,a,K)}of(W,t)})}function en(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ki(e,t){for(var a=t+"Capture",l=[];e!==null;){var i=e,o=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||o===null||(i=jr(e,a),i!=null&&l.unshift(en(e,i,o)),i=jr(e,t),i!=null&&l.push(en(e,i,o))),e.tag===3)return l;e=e.return}return[]}function Yx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function df(e,t,a,l,i){for(var o=t._reactName,m=[];a!==null&&a!==l;){var h=a,N=h.alternate,B=h.stateNode;if(h=h.tag,N!==null&&N===l)break;h!==5&&h!==26&&h!==27||B===null||(N=B,i?(B=jr(a,o),B!=null&&m.unshift(en(a,B,N))):i||(B=jr(a,o),B!=null&&m.push(en(a,B,N)))),a=a.return}m.length!==0&&e.push({event:t,listeners:m})}var Fx=/\r\n?/g,Gx=/\u0000|\uFFFD/g;function uf(e){return(typeof e=="string"?e:""+e).replace(Fx,`
`).replace(Gx,"")}function mf(e,t){return t=uf(t),uf(e)===t}function qe(e,t,a,l,i,o){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||fl(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&fl(e,""+l);break;case"className":Tn(e,"class",l);break;case"tabIndex":Tn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(e,a,l);break;case"style":uu(e,l,o);break;case"data":if(t!=="object"){Tn(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Mn(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&qe(e,t,"name",i.name,i,null),qe(e,t,"formEncType",i.formEncType,i,null),qe(e,t,"formMethod",i.formMethod,i,null),qe(e,t,"formTarget",i.formTarget,i,null)):(qe(e,t,"encType",i.encType,i,null),qe(e,t,"method",i.method,i,null),qe(e,t,"target",i.target,i,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Mn(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=pa);break;case"onScroll":l!=null&&ke("scroll",e);break;case"onScrollEnd":l!=null&&ke("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(i.children!=null)throw Error(d(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Mn(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":ke("beforetoggle",e),ke("toggle",e),An(e,"popover",l);break;case"xlinkActuate":ya(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ya(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ya(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ya(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ya(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ya(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ya(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ya(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ya(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":An(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=pg.get(a)||a,An(e,a,l))}}function Zc(e,t,a,l,i,o){switch(a){case"style":uu(e,l,o);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(i.children!=null)throw Error(d(60));e.innerHTML=a}}break;case"children":typeof l=="string"?fl(e,l):(typeof l=="number"||typeof l=="bigint")&&fl(e,""+l);break;case"onScroll":l!=null&&ke("scroll",e);break;case"onScrollEnd":l!=null&&ke("scrollend",e);break;case"onClick":l!=null&&(e.onclick=pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!au.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(i=a.endsWith("Capture"),t=a.slice(2,i?a.length-7:void 0),o=e[Nt]||null,o=o!=null?o[a]:null,typeof o=="function"&&e.removeEventListener(t,o,i),typeof l=="function")){typeof o!="function"&&o!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,i);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):An(e,a,l)}}}function yt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",e),ke("load",e);var l=!1,i=!1,o;for(o in a)if(a.hasOwnProperty(o)){var m=a[o];if(m!=null)switch(o){case"src":l=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:qe(e,t,o,m,a,null)}}i&&qe(e,t,"srcSet",a.srcSet,a,null),l&&qe(e,t,"src",a.src,a,null);return;case"input":ke("invalid",e);var h=o=m=i=null,N=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":i=K;break;case"type":m=K;break;case"checked":N=K;break;case"defaultChecked":B=K;break;case"value":o=K;break;case"defaultValue":h=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(d(137,t));break;default:qe(e,t,l,K,a,null)}}iu(e,o,h,N,B,m,i,!1);return;case"select":ke("invalid",e),l=m=o=null;for(i in a)if(a.hasOwnProperty(i)&&(h=a[i],h!=null))switch(i){case"value":o=h;break;case"defaultValue":m=h;break;case"multiple":l=h;default:qe(e,t,i,h,a,null)}t=o,a=m,e.multiple=!!l,t!=null?ml(e,!!l,t,!1):a!=null&&ml(e,!!l,a,!0);return;case"textarea":ke("invalid",e),o=i=l=null;for(m in a)if(a.hasOwnProperty(m)&&(h=a[m],h!=null))switch(m){case"value":l=h;break;case"defaultValue":i=h;break;case"children":o=h;break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(d(91));break;default:qe(e,t,m,h,a,null)}cu(e,l,i,o);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:qe(e,t,N,l,a,null)}return;case"dialog":ke("beforetoggle",e),ke("toggle",e),ke("cancel",e),ke("close",e);break;case"iframe":case"object":ke("load",e);break;case"video":case"audio":for(l=0;l<Wr.length;l++)ke(Wr[l],e);break;case"image":ke("error",e),ke("load",e);break;case"details":ke("toggle",e);break;case"embed":case"source":case"link":ke("error",e),ke("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:qe(e,t,B,l,a,null)}return;default:if(no(t)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&Zc(e,t,K,l,a,void 0));return}}for(h in a)a.hasOwnProperty(h)&&(l=a[h],l!=null&&qe(e,t,h,l,a,null))}function Xx(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,m=null,h=null,N=null,B=null,K=null;for(X in a){var W=a[X];if(a.hasOwnProperty(X)&&W!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":N=W;default:l.hasOwnProperty(X)||qe(e,t,X,null,l,W)}}for(var Q in l){var X=l[Q];if(W=a[Q],l.hasOwnProperty(Q)&&(X!=null||W!=null))switch(Q){case"type":o=X;break;case"name":i=X;break;case"checked":B=X;break;case"defaultChecked":K=X;break;case"value":m=X;break;case"defaultValue":h=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(d(137,t));break;default:X!==W&&qe(e,t,Q,X,l,W)}}lo(e,m,h,N,B,K,o,i);return;case"select":X=m=h=Q=null;for(o in a)if(N=a[o],a.hasOwnProperty(o)&&N!=null)switch(o){case"value":break;case"multiple":X=N;default:l.hasOwnProperty(o)||qe(e,t,o,null,l,N)}for(i in l)if(o=l[i],N=a[i],l.hasOwnProperty(i)&&(o!=null||N!=null))switch(i){case"value":Q=o;break;case"defaultValue":h=o;break;case"multiple":m=o;default:o!==N&&qe(e,t,i,o,l,N)}t=h,a=m,l=X,Q!=null?ml(e,!!a,Q,!1):!!l!=!!a&&(t!=null?ml(e,!!a,t,!0):ml(e,!!a,a?[]:"",!1));return;case"textarea":X=Q=null;for(h in a)if(i=a[h],a.hasOwnProperty(h)&&i!=null&&!l.hasOwnProperty(h))switch(h){case"value":break;case"children":break;default:qe(e,t,h,null,l,i)}for(m in l)if(i=l[m],o=a[m],l.hasOwnProperty(m)&&(i!=null||o!=null))switch(m){case"value":Q=i;break;case"defaultValue":X=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(d(91));break;default:i!==o&&qe(e,t,m,i,l,o)}ou(e,Q,X);return;case"option":for(var ue in a)if(Q=a[ue],a.hasOwnProperty(ue)&&Q!=null&&!l.hasOwnProperty(ue))switch(ue){case"selected":e.selected=!1;break;default:qe(e,t,ue,null,l,Q)}for(N in l)if(Q=l[N],X=a[N],l.hasOwnProperty(N)&&Q!==X&&(Q!=null||X!=null))switch(N){case"selected":e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:qe(e,t,N,Q,l,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)Q=a[xe],a.hasOwnProperty(xe)&&Q!=null&&!l.hasOwnProperty(xe)&&qe(e,t,xe,null,l,Q);for(B in l)if(Q=l[B],X=a[B],l.hasOwnProperty(B)&&Q!==X&&(Q!=null||X!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(d(137,t));break;default:qe(e,t,B,Q,l,X)}return;default:if(no(t)){for(var Be in a)Q=a[Be],a.hasOwnProperty(Be)&&Q!==void 0&&!l.hasOwnProperty(Be)&&Zc(e,t,Be,void 0,l,Q);for(K in l)Q=l[K],X=a[K],!l.hasOwnProperty(K)||Q===X||Q===void 0&&X===void 0||Zc(e,t,K,Q,l,X);return}}for(var U in a)Q=a[U],a.hasOwnProperty(U)&&Q!=null&&!l.hasOwnProperty(U)&&qe(e,t,U,null,l,Q);for(W in l)Q=l[W],X=a[W],!l.hasOwnProperty(W)||Q===X||Q==null&&X==null||qe(e,t,W,Q,l,X)}function ff(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var i=a[l],o=i.transferSize,m=i.initiatorType,h=i.duration;if(o&&h&&ff(m)){for(m=0,h=i.responseEnd,l+=1;l<a.length;l++){var N=a[l],B=N.startTime;if(B>h)break;var K=N.transferSize,W=N.initiatorType;K&&ff(W)&&(N=N.responseEnd,m+=K*(N<h?1:(h-B)/(N-B)))}if(--l,t+=8*(o+m)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Kc=null,Ic=null;function Ci(e){return e.nodeType===9?e:e.ownerDocument}function hf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Jc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $c=null;function Zx(){var e=window.event;return e&&e.type==="popstate"?e===$c?!1:($c=e,!0):($c=null,!1)}var xf=typeof setTimeout=="function"?setTimeout:void 0,Kx=typeof clearTimeout=="function"?clearTimeout:void 0,yf=typeof Promise=="function"?Promise:void 0,Ix=typeof queueMicrotask=="function"?queueMicrotask:typeof yf<"u"?function(e){return yf.resolve(null).then(e).catch(Jx)}:xf;function Jx(e){setTimeout(function(){throw e})}function rs(e){return e==="head"}function pf(e,t){var a=t,l=0;do{var i=a.nextSibling;if(e.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(i),Gl(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")tn(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,tn(a);for(var o=a.firstChild;o;){var m=o.nextSibling,h=o.nodeName;o[br]||h==="SCRIPT"||h==="STYLE"||h==="LINK"&&o.rel.toLowerCase()==="stylesheet"||a.removeChild(o),o=m}}else a==="body"&&tn(e.ownerDocument.body);a=i}while(a);Gl(t)}function bf(e,t){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Pc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Pc(a),ao(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function $x(e,t,a,l){for(;e.nodeType===1;){var i=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[br])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=$t(e.nextSibling),e===null)break}return null}function Px(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=$t(e.nextSibling),e===null))return null;return e}function vf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=$t(e.nextSibling),e===null))return null;return e}function Wc(e){return e.data==="$?"||e.data==="$~"}function ed(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Wx(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function $t(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var td=null;function jf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return $t(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function wf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Nf(e,t,a){switch(t=Ci(a),e){case"html":if(e=t.documentElement,!e)throw Error(d(452));return e;case"head":if(e=t.head,!e)throw Error(d(453));return e;case"body":if(e=t.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function tn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ao(e)}var Pt=new Map,Sf=new Set;function Di(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var za=te.d;te.d={f:ey,r:ty,D:ay,C:sy,L:ly,m:ry,X:iy,S:ny,M:oy};function ey(){var e=za.f(),t=pi();return e||t}function ty(e){var t=cl(e);t!==null&&t.tag===5&&t.type==="form"?B0(t):za.r(e)}var Ql=typeof document>"u"?null:document;function kf(e,t,a){var l=Ql;if(l&&typeof t=="string"&&t){var i=Gt(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof a=="string"&&(i+='[crossorigin="'+a+'"]'),Sf.has(i)||(Sf.add(i),e={rel:e,crossOrigin:a,href:t},l.querySelector(i)===null&&(t=l.createElement("link"),yt(t,"link",e),dt(t),l.head.appendChild(t)))}}function ay(e){za.D(e),kf("dns-prefetch",e,null)}function sy(e,t){za.C(e,t),kf("preconnect",e,t)}function ly(e,t,a){za.L(e,t,a);var l=Ql;if(l&&e&&t){var i='link[rel="preload"][as="'+Gt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(i+='[imagesrcset="'+Gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(i+='[imagesizes="'+Gt(a.imageSizes)+'"]')):i+='[href="'+Gt(e)+'"]';var o=i;switch(t){case"style":o=Yl(e);break;case"script":o=Fl(e)}Pt.has(o)||(e=v({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Pt.set(o,e),l.querySelector(i)!==null||t==="style"&&l.querySelector(an(o))||t==="script"&&l.querySelector(sn(o))||(t=l.createElement("link"),yt(t,"link",e),dt(t),l.head.appendChild(t)))}}function ry(e,t){za.m(e,t);var a=Ql;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+Gt(l)+'"][href="'+Gt(e)+'"]',o=i;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Fl(e)}if(!Pt.has(o)&&(e=v({rel:"modulepreload",href:e},t),Pt.set(o,e),a.querySelector(i)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(sn(o)))return}l=a.createElement("link"),yt(l,"link",e),dt(l),a.head.appendChild(l)}}}function ny(e,t,a){za.S(e,t,a);var l=Ql;if(l&&e){var i=dl(l).hoistableStyles,o=Yl(e);t=t||"default";var m=i.get(o);if(!m){var h={loading:0,preload:null};if(m=l.querySelector(an(o)))h.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Pt.get(o))&&ad(e,a);var N=m=l.createElement("link");dt(N),yt(N,"link",e),N._p=new Promise(function(B,K){N.onload=B,N.onerror=K}),N.addEventListener("load",function(){h.loading|=1}),N.addEventListener("error",function(){h.loading|=2}),h.loading|=4,Ai(m,t,l)}m={type:"stylesheet",instance:m,count:1,state:h},i.set(o,m)}}}function iy(e,t){za.X(e,t);var a=Ql;if(a&&e){var l=dl(a).hoistableScripts,i=Fl(e),o=l.get(i);o||(o=a.querySelector(sn(i)),o||(e=v({src:e,async:!0},t),(t=Pt.get(i))&&sd(e,t),o=a.createElement("script"),dt(o),yt(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(i,o))}}function oy(e,t){za.M(e,t);var a=Ql;if(a&&e){var l=dl(a).hoistableScripts,i=Fl(e),o=l.get(i);o||(o=a.querySelector(sn(i)),o||(e=v({src:e,async:!0,type:"module"},t),(t=Pt.get(i))&&sd(e,t),o=a.createElement("script"),dt(o),yt(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(i,o))}}function Cf(e,t,a,l){var i=(i=ge.current)?Di(i):null;if(!i)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Yl(a.href),a=dl(i).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Yl(a.href);var o=dl(i).hoistableStyles,m=o.get(e);if(m||(i=i.ownerDocument||i,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,m),(o=i.querySelector(an(e)))&&!o._p&&(m.instance=o,m.state.loading=5),Pt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Pt.set(e,a),o||cy(i,e,a,m.state))),t&&l===null)throw Error(d(528,""));return m}if(t&&l!==null)throw Error(d(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Fl(a),a=dl(i).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function Yl(e){return'href="'+Gt(e)+'"'}function an(e){return'link[rel="stylesheet"]['+e+"]"}function Df(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function cy(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),yt(t,"link",a),dt(t),e.head.appendChild(t))}function Fl(e){return'[src="'+Gt(e)+'"]'}function sn(e){return"script[async]"+e}function Af(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Gt(a.href)+'"]');if(l)return t.instance=l,dt(l),l;var i=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),dt(l),yt(l,"style",i),Ai(l,a.precedence,e),t.instance=l;case"stylesheet":i=Yl(a.href);var o=e.querySelector(an(i));if(o)return t.state.loading|=4,t.instance=o,dt(o),o;l=Df(a),(i=Pt.get(i))&&ad(l,i),o=(e.ownerDocument||e).createElement("link"),dt(o);var m=o;return m._p=new Promise(function(h,N){m.onload=h,m.onerror=N}),yt(o,"link",l),t.state.loading|=4,Ai(o,a.precedence,e),t.instance=o;case"script":return o=Fl(a.src),(i=e.querySelector(sn(o)))?(t.instance=i,dt(i),i):(l=a,(i=Pt.get(o))&&(l=v({},a),sd(l,i)),e=e.ownerDocument||e,i=e.createElement("script"),dt(i),yt(i,"link",l),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(d(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Ai(l,a.precedence,e));return t.instance}function Ai(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=l.length?l[l.length-1]:null,o=i,m=0;m<l.length;m++){var h=l[m];if(h.dataset.precedence===t)o=h;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function ad(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function sd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ti=null;function Tf(e,t,a){if(Ti===null){var l=new Map,i=Ti=new Map;i.set(a,l)}else i=Ti,l=i.get(a),l||(l=new Map,i.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),i=0;i<a.length;i++){var o=a[i];if(!(o[br]||o[ft]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var m=o.getAttribute(t)||"";m=e+m;var h=l.get(m);h?h.push(o):l.set(m,[o])}}return l}function Ef(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function dy(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Mf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function uy(e,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var i=Yl(l.href),o=t.querySelector(an(i));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ei.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=o,dt(o);return}o=t.ownerDocument||t,l=Df(l),(i=Pt.get(i))&&ad(l,i),o=o.createElement("link"),dt(o);var m=o;m._p=new Promise(function(h,N){m.onload=h,m.onerror=N}),yt(o,"link",l),a.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Ei.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var ld=0;function my(e,t){return e.stylesheets&&e.count===0&&_i(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&_i(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+t);0<e.imgBytes&&ld===0&&(ld=62500*Vx());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&_i(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>ld?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(i)}}:null}function Ei(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_i(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Mi=null;function _i(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Mi=new Map,t.forEach(fy,e),Mi=null,Ei.call(e))}function fy(e,t){if(!(t.state.loading&4)){var a=Mi.get(e);if(a)var l=a.get(null);else{a=new Map,Mi.set(e,a);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var m=i[o];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),l=m)}l&&a.set(null,l)}i=t.instance,m=i.getAttribute("data-precedence"),o=a.get(m)||l,o===l&&a.set(null,i),a.set(m,i),this.count++,l=Ei.bind(this),i.addEventListener("load",l),i.addEventListener("error",l),o?o.parentNode.insertBefore(i,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var ln={$$typeof:T,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function hy(e,t,a,l,i,o,m,h,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.hiddenUpdates=Pi(null),this.identifierPrefix=l,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function _f(e,t,a,l,i,o,m,h,N,B,K,W){return e=new hy(e,t,a,m,N,B,K,W,h),t=1,o===!0&&(t|=24),o=Lt(3,null,null,t),e.current=o,o.stateNode=e,t=Lo(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:l,isDehydrated:a,cache:t},Qo(o),e}function Of(e){return e?(e=vl,e):vl}function zf(e,t,a,l,i,o){i=Of(i),l.context===null?l.context=i:l.pendingContext=i,l=Ka(t),l.payload={element:a},o=o===void 0?null:o,o!==null&&(l.callback=o),a=Ia(e,l,t),a!==null&&(Tt(a,e,t),Rr(a,e,t))}function Uf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function rd(e,t){Uf(e,t),(e=e.alternate)&&Uf(e,t)}function Rf(e){if(e.tag===13||e.tag===31){var t=zs(e,67108864);t!==null&&Tt(t,e,67108864),rd(e,67108864)}}function Lf(e){if(e.tag===13||e.tag===31){var t=Yt();t=Wi(t);var a=zs(e,t);a!==null&&Tt(a,e,t),rd(e,t)}}var Oi=!0;function gy(e,t,a,l){var i=F.T;F.T=null;var o=te.p;try{te.p=2,nd(e,t,a,l)}finally{te.p=o,F.T=i}}function xy(e,t,a,l){var i=F.T;F.T=null;var o=te.p;try{te.p=8,nd(e,t,a,l)}finally{te.p=o,F.T=i}}function nd(e,t,a,l){if(Oi){var i=id(l);if(i===null)Vc(e,t,l,zi,a),qf(e,l);else if(py(i,e,t,a,l))l.stopPropagation();else if(qf(e,l),t&4&&-1<yy.indexOf(e)){for(;i!==null;){var o=cl(i);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var m=Ts(o.pendingLanes);if(m!==0){var h=o;for(h.pendingLanes|=2,h.entangledLanes|=2;m;){var N=1<<31-Ut(m);h.entanglements[1]|=N,m&=~N}ca(o),(Oe&6)===0&&(xi=Ue()+500,Pr(0))}}break;case 31:case 13:h=zs(o,2),h!==null&&Tt(h,o,2),pi(),rd(o,2)}if(o=id(l),o===null&&Vc(e,t,l,zi,a),o===i)break;i=o}i!==null&&l.stopPropagation()}else Vc(e,t,l,null,a)}}function id(e){return e=oo(e),od(e)}var zi=null;function od(e){if(zi=null,e=ol(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=x(t),e!==null)return e;e=null}else if(a===31){if(e=b(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return zi=e,null}function Hf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xa()){case Ds:return 2;case As:return 8;case Ot:case gr:return 32;case Zd:return 268435456;default:return 32}default:return 32}}var cd=!1,ns=null,is=null,os=null,rn=new Map,nn=new Map,cs=[],yy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qf(e,t){switch(e){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":rn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nn.delete(t.pointerId)}}function on(e,t,a,l,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:o,targetContainers:[i]},t!==null&&(t=cl(t),t!==null&&Rf(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function py(e,t,a,l,i){switch(t){case"focusin":return ns=on(ns,e,t,a,l,i),!0;case"dragenter":return is=on(is,e,t,a,l,i),!0;case"mouseover":return os=on(os,e,t,a,l,i),!0;case"pointerover":var o=i.pointerId;return rn.set(o,on(rn.get(o)||null,e,t,a,l,i)),!0;case"gotpointercapture":return o=i.pointerId,nn.set(o,on(nn.get(o)||null,e,t,a,l,i)),!0}return!1}function Bf(e){var t=ol(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=x(a),t!==null){e.blockedOn=t,Wd(e.priority,function(){Lf(a)});return}}else if(t===31){if(t=b(a),t!==null){e.blockedOn=t,Wd(e.priority,function(){Lf(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ui(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=id(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);io=l,a.target.dispatchEvent(l),io=null}else return t=cl(a),t!==null&&Rf(t),e.blockedOn=a,!1;t.shift()}return!0}function Qf(e,t,a){Ui(e)&&a.delete(t)}function by(){cd=!1,ns!==null&&Ui(ns)&&(ns=null),is!==null&&Ui(is)&&(is=null),os!==null&&Ui(os)&&(os=null),rn.forEach(Qf),nn.forEach(Qf)}function Ri(e,t){e.blockedOn===t&&(e.blockedOn=null,cd||(cd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,by)))}var Li=null;function Yf(e){Li!==e&&(Li=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Li===e&&(Li=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],i=e[t+2];if(typeof l!="function"){if(od(l||a)===null)continue;break}var o=cl(a);o!==null&&(e.splice(t,3),t-=3,ic(o,{pending:!0,data:i,method:a.method,action:l},l,i))}}))}function Gl(e){function t(N){return Ri(N,e)}ns!==null&&Ri(ns,e),is!==null&&Ri(is,e),os!==null&&Ri(os,e),rn.forEach(t),nn.forEach(t);for(var a=0;a<cs.length;a++){var l=cs[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<cs.length&&(a=cs[0],a.blockedOn===null);)Bf(a),a.blockedOn===null&&cs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var i=a[l],o=a[l+1],m=i[Nt]||null;if(typeof o=="function")m||Yf(a);else if(m){var h=null;if(o&&o.hasAttribute("formAction")){if(i=o,m=o[Nt]||null)h=m.formAction;else if(od(i)!==null)continue}else h=m.action;typeof h=="function"?a[l+1]=h:(a.splice(l,3),l-=3),Yf(a)}}}function Ff(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(m){return i=m})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function dd(e){this._internalRoot=e}Hi.prototype.render=dd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(d(409));var a=t.current,l=Yt();zf(a,l,e,t,null,null)},Hi.prototype.unmount=dd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zf(e.current,2,null,e,null,null),pi(),t[il]=null}};function Hi(e){this._internalRoot=e}Hi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pd();e={blockedOn:null,target:e,priority:t};for(var a=0;a<cs.length&&t!==0&&t<cs[a].priority;a++);cs.splice(a,0,e),a===0&&Bf(e)}};var Gf=n.version;if(Gf!=="19.2.0")throw Error(d(527,Gf,"19.2.0"));te.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=y(t),e=e!==null?k(e):null,e=e===null?null:e.stateNode,e};var vy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qi.isDisabled&&qi.supportsFiber)try{xr=qi.inject(vy),zt=qi}catch{}}return dn.createRoot=function(e,t){if(!u(e))throw Error(d(299));var a=!1,l="",i=J0,o=$0,m=P0;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=_f(e,1,!1,null,null,a,l,null,i,o,m,Ff),e[il]=t.current,Xc(e),new dd(t)},dn.hydrateRoot=function(e,t,a){if(!u(e))throw Error(d(299));var l=!1,i="",o=J0,m=$0,h=P0,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(h=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),t=_f(e,1,!0,t,a??null,l,i,N,o,m,h,Ff),t.context=Of(null),a=t.current,l=Yt(),l=Wi(l),i=Ka(l),i.callback=null,Ia(a,i,l),a=l,t.current.lanes=a,pr(t,a),ca(t),e[il]=t.current,Xc(e),new Hi(t)},dn.version="19.2.0",dn}var th;function Ey(){if(th)return hd.exports;th=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),hd.exports=Ty(),hd.exports}var My=Ey();const _y=Lh(My);var wn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Oy={setTimeout:(r,n)=>setTimeout(r,n),clearTimeout:r=>clearTimeout(r),setInterval:(r,n)=>setInterval(r,n),clearInterval:r=>clearInterval(r)},fs,Hd,Dh,zy=(Dh=class{constructor(){ye(this,fs,Oy);ye(this,Hd,!1)}setTimeoutProvider(r){de(this,fs,r)}setTimeout(r,n){return O(this,fs).setTimeout(r,n)}clearTimeout(r){O(this,fs).clearTimeout(r)}setInterval(r,n){return O(this,fs).setInterval(r,n)}clearInterval(r){O(this,fs).clearInterval(r)}},fs=new WeakMap,Hd=new WeakMap,Dh),Zs=new zy;function Uy(r){setTimeout(r,0)}var ll=typeof window>"u"||"Deno"in globalThis;function Mt(){}function Ry(r,n){return typeof r=="function"?r(n):r}function Nd(r){return typeof r=="number"&&r>=0&&r!==1/0}function Hh(r,n){return Math.max(r+(n||0)-Date.now(),0)}function ws(r,n){return typeof r=="function"?r(n):r}function ea(r,n){return typeof r=="function"?r(n):r}function ah(r,n){const{type:c="all",exact:d,fetchStatus:u,predicate:f,queryKey:x,stale:b}=r;if(x){if(d){if(n.queryHash!==Bd(x,n.options))return!1}else if(!fn(n.queryKey,x))return!1}if(c!=="all"){const p=n.isActive();if(c==="active"&&!p||c==="inactive"&&p)return!1}return!(typeof b=="boolean"&&n.isStale()!==b||u&&u!==n.state.fetchStatus||f&&!f(n))}function sh(r,n){const{exact:c,status:d,predicate:u,mutationKey:f}=r;if(f){if(!n.options.mutationKey)return!1;if(c){if(mn(n.options.mutationKey)!==mn(f))return!1}else if(!fn(n.options.mutationKey,f))return!1}return!(d&&n.state.status!==d||u&&!u(n))}function Bd(r,n){return((n==null?void 0:n.queryKeyHashFn)||mn)(r)}function mn(r){return JSON.stringify(r,(n,c)=>kd(c)?Object.keys(c).sort().reduce((d,u)=>(d[u]=c[u],d),{}):c)}function fn(r,n){return r===n?!0:typeof r!=typeof n?!1:r&&n&&typeof r=="object"&&typeof n=="object"?Object.keys(n).every(c=>fn(r[c],n[c])):!1}var Ly=Object.prototype.hasOwnProperty;function qh(r,n){if(r===n)return r;const c=lh(r)&&lh(n);if(!c&&!(kd(r)&&kd(n)))return n;const u=(c?r:Object.keys(r)).length,f=c?n:Object.keys(n),x=f.length,b=c?new Array(x):{};let p=0;for(let y=0;y<x;y++){const k=c?y:f[y],v=r[k],E=n[k];if(v===E){b[k]=v,(c?y<u:Ly.call(r,k))&&p++;continue}if(v===null||E===null||typeof v!="object"||typeof E!="object"){b[k]=E;continue}const S=qh(v,E);b[k]=S,S===v&&p++}return u===x&&p===u?r:b}function Sd(r,n){if(!n||Object.keys(r).length!==Object.keys(n).length)return!1;for(const c in r)if(r[c]!==n[c])return!1;return!0}function lh(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function kd(r){if(!rh(r))return!1;const n=r.constructor;if(n===void 0)return!0;const c=n.prototype;return!(!rh(c)||!c.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function rh(r){return Object.prototype.toString.call(r)==="[object Object]"}function Hy(r){return new Promise(n=>{Zs.setTimeout(n,r)})}function Cd(r,n,c){return typeof c.structuralSharing=="function"?c.structuralSharing(r,n):c.structuralSharing!==!1?qh(r,n):n}function qy(r,n,c=0){const d=[...r,n];return c&&d.length>c?d.slice(1):d}function By(r,n,c=0){const d=[n,...r];return c&&d.length>c?d.slice(0,-1):d}var Qd=Symbol();function Bh(r,n){return!r.queryFn&&(n!=null&&n.initialPromise)?()=>n.initialPromise:!r.queryFn||r.queryFn===Qd?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function Qy(r,n){return typeof r=="function"?r(...n):!!r}var Ks,hs,Vl,Ah,Yy=(Ah=class extends wn{constructor(){super();ye(this,Ks);ye(this,hs);ye(this,Vl);de(this,Vl,n=>{if(!ll&&window.addEventListener){const c=()=>n();return window.addEventListener("visibilitychange",c,!1),()=>{window.removeEventListener("visibilitychange",c)}}})}onSubscribe(){O(this,hs)||this.setEventListener(O(this,Vl))}onUnsubscribe(){var n;this.hasListeners()||((n=O(this,hs))==null||n.call(this),de(this,hs,void 0))}setEventListener(n){var c;de(this,Vl,n),(c=O(this,hs))==null||c.call(this),de(this,hs,n(d=>{typeof d=="boolean"?this.setFocused(d):this.onFocus()}))}setFocused(n){O(this,Ks)!==n&&(de(this,Ks,n),this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(c=>{c(n)})}isFocused(){var n;return typeof O(this,Ks)=="boolean"?O(this,Ks):((n=globalThis.document)==null?void 0:n.visibilityState)!=="hidden"}},Ks=new WeakMap,hs=new WeakMap,Vl=new WeakMap,Ah),Yd=new Yy;function Dd(){let r,n;const c=new Promise((u,f)=>{r=u,n=f});c.status="pending",c.catch(()=>{});function d(u){Object.assign(c,u),delete c.resolve,delete c.reject}return c.resolve=u=>{d({status:"fulfilled",value:u}),r(u)},c.reject=u=>{d({status:"rejected",reason:u}),n(u)},c}var Fy=Uy;function Gy(){let r=[],n=0,c=b=>{b()},d=b=>{b()},u=Fy;const f=b=>{n?r.push(b):u(()=>{c(b)})},x=()=>{const b=r;r=[],b.length&&u(()=>{d(()=>{b.forEach(p=>{c(p)})})})};return{batch:b=>{let p;n++;try{p=b()}finally{n--,n||x()}return p},batchCalls:b=>(...p)=>{f(()=>{b(...p)})},schedule:f,setNotifyFunction:b=>{c=b},setBatchNotifyFunction:b=>{d=b},setScheduler:b=>{u=b}}}var pt=Gy(),Zl,gs,Kl,Th,Xy=(Th=class extends wn{constructor(){super();ye(this,Zl,!0);ye(this,gs);ye(this,Kl);de(this,Kl,n=>{if(!ll&&window.addEventListener){const c=()=>n(!0),d=()=>n(!1);return window.addEventListener("online",c,!1),window.addEventListener("offline",d,!1),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",d)}}})}onSubscribe(){O(this,gs)||this.setEventListener(O(this,Kl))}onUnsubscribe(){var n;this.hasListeners()||((n=O(this,gs))==null||n.call(this),de(this,gs,void 0))}setEventListener(n){var c;de(this,Kl,n),(c=O(this,gs))==null||c.call(this),de(this,gs,n(this.setOnline.bind(this)))}setOnline(n){O(this,Zl)!==n&&(de(this,Zl,n),this.listeners.forEach(d=>{d(n)}))}isOnline(){return O(this,Zl)}},Zl=new WeakMap,gs=new WeakMap,Kl=new WeakMap,Th),Ki=new Xy;function Vy(r){return Math.min(1e3*2**r,3e4)}function Qh(r){return(r??"online")==="online"?Ki.isOnline():!0}var Ad=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Yh(r){let n=!1,c=0,d;const u=Dd(),f=()=>u.status!=="pending",x=j=>{var M;if(!f()){const D=new Ad(j);E(D),(M=r.onCancel)==null||M.call(r,D)}},b=()=>{n=!0},p=()=>{n=!1},y=()=>Yd.isFocused()&&(r.networkMode==="always"||Ki.isOnline())&&r.canRun(),k=()=>Qh(r.networkMode)&&r.canRun(),v=j=>{f()||(d==null||d(),u.resolve(j))},E=j=>{f()||(d==null||d(),u.reject(j))},S=()=>new Promise(j=>{var M;d=D=>{(f()||y())&&j(D)},(M=r.onPause)==null||M.call(r)}).then(()=>{var j;d=void 0,f()||(j=r.onContinue)==null||j.call(r)}),z=()=>{if(f())return;let j;const M=c===0?r.initialPromise:void 0;try{j=M??r.fn()}catch(D){j=Promise.reject(D)}Promise.resolve(j).then(v).catch(D=>{var R;if(f())return;const L=r.retry??(ll?0:3),T=r.retryDelay??Vy,C=typeof T=="function"?T(c,D):T,V=L===!0||typeof L=="number"&&c<L||typeof L=="function"&&L(c,D);if(n||!V){E(D);return}c++,(R=r.onFail)==null||R.call(r,c,D),Hy(C).then(()=>y()?void 0:S()).then(()=>{n?E(D):z()})})};return{promise:u,status:()=>u.status,cancel:x,continue:()=>(d==null||d(),u),cancelRetry:b,continueRetry:p,canStart:k,start:()=>(k()?z():S().then(z),u)}}var Is,Eh,Fh=(Eh=class{constructor(){ye(this,Is)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Nd(this.gcTime)&&de(this,Is,Zs.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(ll?1/0:300*1e3))}clearGcTimeout(){O(this,Is)&&(Zs.clearTimeout(O(this,Is)),de(this,Is,void 0))}},Is=new WeakMap,Eh),Js,Il,Wt,$s,mt,yn,Ps,la,Ra,Mh,Zy=(Mh=class extends Fh{constructor(n){super();ye(this,la);ye(this,Js);ye(this,Il);ye(this,Wt);ye(this,$s);ye(this,mt);ye(this,yn);ye(this,Ps);de(this,Ps,!1),de(this,yn,n.defaultOptions),this.setOptions(n.options),this.observers=[],de(this,$s,n.client),de(this,Wt,O(this,$s).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,de(this,Js,nh(this.options)),this.state=n.state??O(this,Js),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=O(this,mt))==null?void 0:n.promise}setOptions(n){if(this.options={...O(this,yn),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const c=nh(this.options);c.data!==void 0&&(this.setData(c.data,{updatedAt:c.dataUpdatedAt,manual:!0}),de(this,Js,c))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&O(this,Wt).remove(this)}setData(n,c){const d=Cd(this.state.data,n,this.options);return Te(this,la,Ra).call(this,{data:d,type:"success",dataUpdatedAt:c==null?void 0:c.updatedAt,manual:c==null?void 0:c.manual}),d}setState(n,c){Te(this,la,Ra).call(this,{type:"setState",state:n,setStateOptions:c})}cancel(n){var d,u;const c=(d=O(this,mt))==null?void 0:d.promise;return(u=O(this,mt))==null||u.cancel(n),c?c.then(Mt).catch(Mt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(O(this,Js))}isActive(){return this.observers.some(n=>ea(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Qd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>ws(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Hh(this.state.dataUpdatedAt,n)}onFocus(){var c;const n=this.observers.find(d=>d.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(c=O(this,mt))==null||c.continue()}onOnline(){var c;const n=this.observers.find(d=>d.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(c=O(this,mt))==null||c.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),O(this,Wt).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(c=>c!==n),this.observers.length||(O(this,mt)&&(O(this,Ps)?O(this,mt).cancel({revert:!0}):O(this,mt).cancelRetry()),this.scheduleGc()),O(this,Wt).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Te(this,la,Ra).call(this,{type:"invalidate"})}async fetch(n,c){var p,y,k,v,E,S,z,j,M,D,L,T;if(this.state.fetchStatus!=="idle"&&((p=O(this,mt))==null?void 0:p.status())!=="rejected"){if(this.state.data!==void 0&&(c!=null&&c.cancelRefetch))this.cancel({silent:!0});else if(O(this,mt))return O(this,mt).continueRetry(),O(this,mt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const C=this.observers.find(V=>V.options.queryFn);C&&this.setOptions(C.options)}const d=new AbortController,u=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(de(this,Ps,!0),d.signal)})},f=()=>{const C=Bh(this.options,c),R=(()=>{const $={client:O(this,$s),queryKey:this.queryKey,meta:this.meta};return u($),$})();return de(this,Ps,!1),this.options.persister?this.options.persister(C,R,this):C(R)},b=(()=>{const C={fetchOptions:c,options:this.options,queryKey:this.queryKey,client:O(this,$s),state:this.state,fetchFn:f};return u(C),C})();(y=this.options.behavior)==null||y.onFetch(b,this),de(this,Il,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((k=b.fetchOptions)==null?void 0:k.meta))&&Te(this,la,Ra).call(this,{type:"fetch",meta:(v=b.fetchOptions)==null?void 0:v.meta}),de(this,mt,Yh({initialPromise:c==null?void 0:c.initialPromise,fn:b.fetchFn,onCancel:C=>{C instanceof Ad&&C.revert&&this.setState({...O(this,Il),fetchStatus:"idle"}),d.abort()},onFail:(C,V)=>{Te(this,la,Ra).call(this,{type:"failed",failureCount:C,error:V})},onPause:()=>{Te(this,la,Ra).call(this,{type:"pause"})},onContinue:()=>{Te(this,la,Ra).call(this,{type:"continue"})},retry:b.options.retry,retryDelay:b.options.retryDelay,networkMode:b.options.networkMode,canRun:()=>!0}));try{const C=await O(this,mt).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(S=(E=O(this,Wt).config).onSuccess)==null||S.call(E,C,this),(j=(z=O(this,Wt).config).onSettled)==null||j.call(z,C,this.state.error,this),C}catch(C){if(C instanceof Ad){if(C.silent)return O(this,mt).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw Te(this,la,Ra).call(this,{type:"error",error:C}),(D=(M=O(this,Wt).config).onError)==null||D.call(M,C,this),(T=(L=O(this,Wt).config).onSettled)==null||T.call(L,this.state.data,C,this),C}finally{this.scheduleGc()}}},Js=new WeakMap,Il=new WeakMap,Wt=new WeakMap,$s=new WeakMap,mt=new WeakMap,yn=new WeakMap,Ps=new WeakMap,la=new WeakSet,Ra=function(n){const c=d=>{switch(n.type){case"failed":return{...d,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...d,fetchStatus:"paused"};case"continue":return{...d,fetchStatus:"fetching"};case"fetch":return{...d,...Gh(d.data,this.options),fetchMeta:n.meta??null};case"success":const u={...d,data:n.data,dataUpdateCount:d.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return de(this,Il,n.manual?u:void 0),u;case"error":const f=n.error;return{...d,error:f,errorUpdateCount:d.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:d.fetchFailureCount+1,fetchFailureReason:f,fetchStatus:"idle",status:"error"};case"invalidate":return{...d,isInvalidated:!0};case"setState":return{...d,...n.state}}};this.state=c(this.state),pt.batch(()=>{this.observers.forEach(d=>{d.onQueryUpdate()}),O(this,Wt).notify({query:this,type:"updated",action:n})})},Mh);function Gh(r,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Qh(n.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function nh(r){const n=typeof r.initialData=="function"?r.initialData():r.initialData,c=n!==void 0,d=c?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:c?d??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:c?"success":"pending",fetchStatus:"idle"}}var Et,Ee,pn,jt,Ws,Jl,La,xs,bn,$l,Pl,el,tl,ys,Wl,ze,un,Td,Ed,Md,_d,Od,zd,Ud,Xh,_h,Ky=(_h=class extends wn{constructor(n,c){super();ye(this,ze);ye(this,Et);ye(this,Ee);ye(this,pn);ye(this,jt);ye(this,Ws);ye(this,Jl);ye(this,La);ye(this,xs);ye(this,bn);ye(this,$l);ye(this,Pl);ye(this,el);ye(this,tl);ye(this,ys);ye(this,Wl,new Set);this.options=c,de(this,Et,n),de(this,xs,null),de(this,La,Dd()),this.bindMethods(),this.setOptions(c)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(O(this,Ee).addObserver(this),ih(O(this,Ee),this.options)?Te(this,ze,un).call(this):this.updateResult(),Te(this,ze,_d).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Rd(O(this,Ee),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Rd(O(this,Ee),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Te(this,ze,Od).call(this),Te(this,ze,zd).call(this),O(this,Ee).removeObserver(this)}setOptions(n){const c=this.options,d=O(this,Ee);if(this.options=O(this,Et).defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ea(this.options.enabled,O(this,Ee))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Te(this,ze,Ud).call(this),O(this,Ee).setOptions(this.options),c._defaulted&&!Sd(this.options,c)&&O(this,Et).getQueryCache().notify({type:"observerOptionsUpdated",query:O(this,Ee),observer:this});const u=this.hasListeners();u&&oh(O(this,Ee),d,this.options,c)&&Te(this,ze,un).call(this),this.updateResult(),u&&(O(this,Ee)!==d||ea(this.options.enabled,O(this,Ee))!==ea(c.enabled,O(this,Ee))||ws(this.options.staleTime,O(this,Ee))!==ws(c.staleTime,O(this,Ee)))&&Te(this,ze,Td).call(this);const f=Te(this,ze,Ed).call(this);u&&(O(this,Ee)!==d||ea(this.options.enabled,O(this,Ee))!==ea(c.enabled,O(this,Ee))||f!==O(this,ys))&&Te(this,ze,Md).call(this,f)}getOptimisticResult(n){const c=O(this,Et).getQueryCache().build(O(this,Et),n),d=this.createResult(c,n);return Jy(this,d)&&(de(this,jt,d),de(this,Jl,this.options),de(this,Ws,O(this,Ee).state)),d}getCurrentResult(){return O(this,jt)}trackResult(n,c){return new Proxy(n,{get:(d,u)=>(this.trackProp(u),c==null||c(u),u==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&O(this,La).status==="pending"&&O(this,La).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(d,u))})}trackProp(n){O(this,Wl).add(n)}getCurrentQuery(){return O(this,Ee)}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const c=O(this,Et).defaultQueryOptions(n),d=O(this,Et).getQueryCache().build(O(this,Et),c);return d.fetch().then(()=>this.createResult(d,c))}fetch(n){return Te(this,ze,un).call(this,{...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),O(this,jt)))}createResult(n,c){var ie;const d=O(this,Ee),u=this.options,f=O(this,jt),x=O(this,Ws),b=O(this,Jl),y=n!==d?n.state:O(this,pn),{state:k}=n;let v={...k},E=!1,S;if(c._optimisticResults){const H=this.hasListeners(),P=!H&&ih(n,c),I=H&&oh(n,d,c,u);(P||I)&&(v={...v,...Gh(k.data,n.options)}),c._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:z,errorUpdatedAt:j,status:M}=v;S=v.data;let D=!1;if(c.placeholderData!==void 0&&S===void 0&&M==="pending"){let H;f!=null&&f.isPlaceholderData&&c.placeholderData===(b==null?void 0:b.placeholderData)?(H=f.data,D=!0):H=typeof c.placeholderData=="function"?c.placeholderData((ie=O(this,Pl))==null?void 0:ie.state.data,O(this,Pl)):c.placeholderData,H!==void 0&&(M="success",S=Cd(f==null?void 0:f.data,H,c),E=!0)}if(c.select&&S!==void 0&&!D)if(f&&S===(x==null?void 0:x.data)&&c.select===O(this,bn))S=O(this,$l);else try{de(this,bn,c.select),S=c.select(S),S=Cd(f==null?void 0:f.data,S,c),de(this,$l,S),de(this,xs,null)}catch(H){de(this,xs,H)}O(this,xs)&&(z=O(this,xs),S=O(this,$l),j=Date.now(),M="error");const L=v.fetchStatus==="fetching",T=M==="pending",C=M==="error",V=T&&L,R=S!==void 0,se={status:M,fetchStatus:v.fetchStatus,isPending:T,isSuccess:M==="success",isError:C,isInitialLoading:V,isLoading:V,data:S,dataUpdatedAt:v.dataUpdatedAt,error:z,errorUpdatedAt:j,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>y.dataUpdateCount||v.errorUpdateCount>y.errorUpdateCount,isFetching:L,isRefetching:L&&!T,isLoadingError:C&&!R,isPaused:v.fetchStatus==="paused",isPlaceholderData:E,isRefetchError:C&&R,isStale:Fd(n,c),refetch:this.refetch,promise:O(this,La),isEnabled:ea(c.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const H=Y=>{se.status==="error"?Y.reject(se.error):se.data!==void 0&&Y.resolve(se.data)},P=()=>{const Y=de(this,La,se.promise=Dd());H(Y)},I=O(this,La);switch(I.status){case"pending":n.queryHash===d.queryHash&&H(I);break;case"fulfilled":(se.status==="error"||se.data!==I.value)&&P();break;case"rejected":(se.status!=="error"||se.error!==I.reason)&&P();break}}return se}updateResult(){const n=O(this,jt),c=this.createResult(O(this,Ee),this.options);if(de(this,Ws,O(this,Ee).state),de(this,Jl,this.options),O(this,Ws).data!==void 0&&de(this,Pl,O(this,Ee)),Sd(c,n))return;de(this,jt,c);const d=()=>{if(!n)return!0;const{notifyOnChangeProps:u}=this.options,f=typeof u=="function"?u():u;if(f==="all"||!f&&!O(this,Wl).size)return!0;const x=new Set(f??O(this,Wl));return this.options.throwOnError&&x.add("error"),Object.keys(O(this,jt)).some(b=>{const p=b;return O(this,jt)[p]!==n[p]&&x.has(p)})};Te(this,ze,Xh).call(this,{listeners:d()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Te(this,ze,_d).call(this)}},Et=new WeakMap,Ee=new WeakMap,pn=new WeakMap,jt=new WeakMap,Ws=new WeakMap,Jl=new WeakMap,La=new WeakMap,xs=new WeakMap,bn=new WeakMap,$l=new WeakMap,Pl=new WeakMap,el=new WeakMap,tl=new WeakMap,ys=new WeakMap,Wl=new WeakMap,ze=new WeakSet,un=function(n){Te(this,ze,Ud).call(this);let c=O(this,Ee).fetch(this.options,n);return n!=null&&n.throwOnError||(c=c.catch(Mt)),c},Td=function(){Te(this,ze,Od).call(this);const n=ws(this.options.staleTime,O(this,Ee));if(ll||O(this,jt).isStale||!Nd(n))return;const d=Hh(O(this,jt).dataUpdatedAt,n)+1;de(this,el,Zs.setTimeout(()=>{O(this,jt).isStale||this.updateResult()},d))},Ed=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(O(this,Ee)):this.options.refetchInterval)??!1},Md=function(n){Te(this,ze,zd).call(this),de(this,ys,n),!(ll||ea(this.options.enabled,O(this,Ee))===!1||!Nd(O(this,ys))||O(this,ys)===0)&&de(this,tl,Zs.setInterval(()=>{(this.options.refetchIntervalInBackground||Yd.isFocused())&&Te(this,ze,un).call(this)},O(this,ys)))},_d=function(){Te(this,ze,Td).call(this),Te(this,ze,Md).call(this,Te(this,ze,Ed).call(this))},Od=function(){O(this,el)&&(Zs.clearTimeout(O(this,el)),de(this,el,void 0))},zd=function(){O(this,tl)&&(Zs.clearInterval(O(this,tl)),de(this,tl,void 0))},Ud=function(){const n=O(this,Et).getQueryCache().build(O(this,Et),this.options);if(n===O(this,Ee))return;const c=O(this,Ee);de(this,Ee,n),de(this,pn,n.state),this.hasListeners()&&(c==null||c.removeObserver(this),n.addObserver(this))},Xh=function(n){pt.batch(()=>{n.listeners&&this.listeners.forEach(c=>{c(O(this,jt))}),O(this,Et).getQueryCache().notify({query:O(this,Ee),type:"observerResultsUpdated"})})},_h);function Iy(r,n){return ea(n.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&n.retryOnMount===!1)}function ih(r,n){return Iy(r,n)||r.state.data!==void 0&&Rd(r,n,n.refetchOnMount)}function Rd(r,n,c){if(ea(n.enabled,r)!==!1&&ws(n.staleTime,r)!=="static"){const d=typeof c=="function"?c(r):c;return d==="always"||d!==!1&&Fd(r,n)}return!1}function oh(r,n,c,d){return(r!==n||ea(d.enabled,r)===!1)&&(!c.suspense||r.state.status!=="error")&&Fd(r,c)}function Fd(r,n){return ea(n.enabled,r)!==!1&&r.isStaleByTime(ws(n.staleTime,r))}function Jy(r,n){return!Sd(r.getCurrentResult(),n)}function ch(r){return{onFetch:(n,c)=>{var k,v,E,S,z;const d=n.options,u=(E=(v=(k=n.fetchOptions)==null?void 0:k.meta)==null?void 0:v.fetchMore)==null?void 0:E.direction,f=((S=n.state.data)==null?void 0:S.pages)||[],x=((z=n.state.data)==null?void 0:z.pageParams)||[];let b={pages:[],pageParams:[]},p=0;const y=async()=>{let j=!1;const M=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(n.signal.aborted?j=!0:n.signal.addEventListener("abort",()=>{j=!0}),n.signal)})},D=Bh(n.options,n.fetchOptions),L=async(T,C,V)=>{if(j)return Promise.reject();if(C==null&&T.pages.length)return Promise.resolve(T);const $=(()=>{const P={client:n.client,queryKey:n.queryKey,pageParam:C,direction:V?"backward":"forward",meta:n.options.meta};return M(P),P})(),se=await D($),{maxPages:ie}=n.options,H=V?By:qy;return{pages:H(T.pages,se,ie),pageParams:H(T.pageParams,C,ie)}};if(u&&f.length){const T=u==="backward",C=T?$y:dh,V={pages:f,pageParams:x},R=C(d,V);b=await L(V,R,T)}else{const T=r??f.length;do{const C=p===0?x[0]??d.initialPageParam:dh(d,b);if(p>0&&C==null)break;b=await L(b,C),p++}while(p<T)}return b};n.options.persister?n.fetchFn=()=>{var j,M;return(M=(j=n.options).persister)==null?void 0:M.call(j,y,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},c)}:n.fetchFn=y}}}function dh(r,{pages:n,pageParams:c}){const d=n.length-1;return n.length>0?r.getNextPageParam(n[d],n,c[d],c):void 0}function $y(r,{pages:n,pageParams:c}){var d;return n.length>0?(d=r.getPreviousPageParam)==null?void 0:d.call(r,n[0],n,c[0],c):void 0}var vn,da,wt,al,ua,ms,Oh,Py=(Oh=class extends Fh{constructor(n){super();ye(this,ua);ye(this,vn);ye(this,da);ye(this,wt);ye(this,al);de(this,vn,n.client),this.mutationId=n.mutationId,de(this,wt,n.mutationCache),de(this,da,[]),this.state=n.state||Wy(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){O(this,da).includes(n)||(O(this,da).push(n),this.clearGcTimeout(),O(this,wt).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){de(this,da,O(this,da).filter(c=>c!==n)),this.scheduleGc(),O(this,wt).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){O(this,da).length||(this.state.status==="pending"?this.scheduleGc():O(this,wt).remove(this))}continue(){var n;return((n=O(this,al))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var x,b,p,y,k,v,E,S,z,j,M,D,L,T,C,V,R,$,se,ie;const c=()=>{Te(this,ua,ms).call(this,{type:"continue"})},d={client:O(this,vn),meta:this.options.meta,mutationKey:this.options.mutationKey};de(this,al,Yh({fn:()=>this.options.mutationFn?this.options.mutationFn(n,d):Promise.reject(new Error("No mutationFn found")),onFail:(H,P)=>{Te(this,ua,ms).call(this,{type:"failed",failureCount:H,error:P})},onPause:()=>{Te(this,ua,ms).call(this,{type:"pause"})},onContinue:c,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>O(this,wt).canRun(this)}));const u=this.state.status==="pending",f=!O(this,al).canStart();try{if(u)c();else{Te(this,ua,ms).call(this,{type:"pending",variables:n,isPaused:f}),await((b=(x=O(this,wt).config).onMutate)==null?void 0:b.call(x,n,this,d));const P=await((y=(p=this.options).onMutate)==null?void 0:y.call(p,n,d));P!==this.state.context&&Te(this,ua,ms).call(this,{type:"pending",context:P,variables:n,isPaused:f})}const H=await O(this,al).start();return await((v=(k=O(this,wt).config).onSuccess)==null?void 0:v.call(k,H,n,this.state.context,this,d)),await((S=(E=this.options).onSuccess)==null?void 0:S.call(E,H,n,this.state.context,d)),await((j=(z=O(this,wt).config).onSettled)==null?void 0:j.call(z,H,null,this.state.variables,this.state.context,this,d)),await((D=(M=this.options).onSettled)==null?void 0:D.call(M,H,null,n,this.state.context,d)),Te(this,ua,ms).call(this,{type:"success",data:H}),H}catch(H){try{throw await((T=(L=O(this,wt).config).onError)==null?void 0:T.call(L,H,n,this.state.context,this,d)),await((V=(C=this.options).onError)==null?void 0:V.call(C,H,n,this.state.context,d)),await(($=(R=O(this,wt).config).onSettled)==null?void 0:$.call(R,void 0,H,this.state.variables,this.state.context,this,d)),await((ie=(se=this.options).onSettled)==null?void 0:ie.call(se,void 0,H,n,this.state.context,d)),H}finally{Te(this,ua,ms).call(this,{type:"error",error:H})}}finally{O(this,wt).runNext(this)}}},vn=new WeakMap,da=new WeakMap,wt=new WeakMap,al=new WeakMap,ua=new WeakSet,ms=function(n){const c=d=>{switch(n.type){case"failed":return{...d,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...d,isPaused:!0};case"continue":return{...d,isPaused:!1};case"pending":return{...d,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...d,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...d,data:void 0,error:n.error,failureCount:d.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=c(this.state),pt.batch(()=>{O(this,da).forEach(d=>{d.onMutationUpdate(n)}),O(this,wt).notify({mutation:this,type:"updated",action:n})})},Oh);function Wy(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ha,ra,jn,zh,ep=(zh=class extends wn{constructor(n={}){super();ye(this,Ha);ye(this,ra);ye(this,jn);this.config=n,de(this,Ha,new Set),de(this,ra,new Map),de(this,jn,0)}build(n,c,d){const u=new Py({client:n,mutationCache:this,mutationId:++Bi(this,jn)._,options:n.defaultMutationOptions(c),state:d});return this.add(u),u}add(n){O(this,Ha).add(n);const c=Qi(n);if(typeof c=="string"){const d=O(this,ra).get(c);d?d.push(n):O(this,ra).set(c,[n])}this.notify({type:"added",mutation:n})}remove(n){if(O(this,Ha).delete(n)){const c=Qi(n);if(typeof c=="string"){const d=O(this,ra).get(c);if(d)if(d.length>1){const u=d.indexOf(n);u!==-1&&d.splice(u,1)}else d[0]===n&&O(this,ra).delete(c)}}this.notify({type:"removed",mutation:n})}canRun(n){const c=Qi(n);if(typeof c=="string"){const d=O(this,ra).get(c),u=d==null?void 0:d.find(f=>f.state.status==="pending");return!u||u===n}else return!0}runNext(n){var d;const c=Qi(n);if(typeof c=="string"){const u=(d=O(this,ra).get(c))==null?void 0:d.find(f=>f!==n&&f.state.isPaused);return(u==null?void 0:u.continue())??Promise.resolve()}else return Promise.resolve()}clear(){pt.batch(()=>{O(this,Ha).forEach(n=>{this.notify({type:"removed",mutation:n})}),O(this,Ha).clear(),O(this,ra).clear()})}getAll(){return Array.from(O(this,Ha))}find(n){const c={exact:!0,...n};return this.getAll().find(d=>sh(c,d))}findAll(n={}){return this.getAll().filter(c=>sh(n,c))}notify(n){pt.batch(()=>{this.listeners.forEach(c=>{c(n)})})}resumePausedMutations(){const n=this.getAll().filter(c=>c.state.isPaused);return pt.batch(()=>Promise.all(n.map(c=>c.continue().catch(Mt))))}},Ha=new WeakMap,ra=new WeakMap,jn=new WeakMap,zh);function Qi(r){var n;return(n=r.options.scope)==null?void 0:n.id}var ma,Uh,tp=(Uh=class extends wn{constructor(n={}){super();ye(this,ma);this.config=n,de(this,ma,new Map)}build(n,c,d){const u=c.queryKey,f=c.queryHash??Bd(u,c);let x=this.get(f);return x||(x=new Zy({client:n,queryKey:u,queryHash:f,options:n.defaultQueryOptions(c),state:d,defaultOptions:n.getQueryDefaults(u)}),this.add(x)),x}add(n){O(this,ma).has(n.queryHash)||(O(this,ma).set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const c=O(this,ma).get(n.queryHash);c&&(n.destroy(),c===n&&O(this,ma).delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){pt.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return O(this,ma).get(n)}getAll(){return[...O(this,ma).values()]}find(n){const c={exact:!0,...n};return this.getAll().find(d=>ah(c,d))}findAll(n={}){const c=this.getAll();return Object.keys(n).length>0?c.filter(d=>ah(n,d)):c}notify(n){pt.batch(()=>{this.listeners.forEach(c=>{c(n)})})}onFocus(){pt.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){pt.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},ma=new WeakMap,Uh),We,ps,bs,er,tr,vs,ar,sr,Rh,ap=(Rh=class{constructor(r={}){ye(this,We);ye(this,ps);ye(this,bs);ye(this,er);ye(this,tr);ye(this,vs);ye(this,ar);ye(this,sr);de(this,We,r.queryCache||new tp),de(this,ps,r.mutationCache||new ep),de(this,bs,r.defaultOptions||{}),de(this,er,new Map),de(this,tr,new Map),de(this,vs,0)}mount(){Bi(this,vs)._++,O(this,vs)===1&&(de(this,ar,Yd.subscribe(async r=>{r&&(await this.resumePausedMutations(),O(this,We).onFocus())})),de(this,sr,Ki.subscribe(async r=>{r&&(await this.resumePausedMutations(),O(this,We).onOnline())})))}unmount(){var r,n;Bi(this,vs)._--,O(this,vs)===0&&((r=O(this,ar))==null||r.call(this),de(this,ar,void 0),(n=O(this,sr))==null||n.call(this),de(this,sr,void 0))}isFetching(r){return O(this,We).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return O(this,ps).findAll({...r,status:"pending"}).length}getQueryData(r){var c;const n=this.defaultQueryOptions({queryKey:r});return(c=O(this,We).get(n.queryHash))==null?void 0:c.state.data}ensureQueryData(r){const n=this.defaultQueryOptions(r),c=O(this,We).build(this,n),d=c.state.data;return d===void 0?this.fetchQuery(r):(r.revalidateIfStale&&c.isStaleByTime(ws(n.staleTime,c))&&this.prefetchQuery(n),Promise.resolve(d))}getQueriesData(r){return O(this,We).findAll(r).map(({queryKey:n,state:c})=>{const d=c.data;return[n,d]})}setQueryData(r,n,c){const d=this.defaultQueryOptions({queryKey:r}),u=O(this,We).get(d.queryHash),f=u==null?void 0:u.state.data,x=Ry(n,f);if(x!==void 0)return O(this,We).build(this,d).setData(x,{...c,manual:!0})}setQueriesData(r,n,c){return pt.batch(()=>O(this,We).findAll(r).map(({queryKey:d})=>[d,this.setQueryData(d,n,c)]))}getQueryState(r){var c;const n=this.defaultQueryOptions({queryKey:r});return(c=O(this,We).get(n.queryHash))==null?void 0:c.state}removeQueries(r){const n=O(this,We);pt.batch(()=>{n.findAll(r).forEach(c=>{n.remove(c)})})}resetQueries(r,n){const c=O(this,We);return pt.batch(()=>(c.findAll(r).forEach(d=>{d.reset()}),this.refetchQueries({type:"active",...r},n)))}cancelQueries(r,n={}){const c={revert:!0,...n},d=pt.batch(()=>O(this,We).findAll(r).map(u=>u.cancel(c)));return Promise.all(d).then(Mt).catch(Mt)}invalidateQueries(r,n={}){return pt.batch(()=>(O(this,We).findAll(r).forEach(c=>{c.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},n)))}refetchQueries(r,n={}){const c={...n,cancelRefetch:n.cancelRefetch??!0},d=pt.batch(()=>O(this,We).findAll(r).filter(u=>!u.isDisabled()&&!u.isStatic()).map(u=>{let f=u.fetch(void 0,c);return c.throwOnError||(f=f.catch(Mt)),u.state.fetchStatus==="paused"?Promise.resolve():f}));return Promise.all(d).then(Mt)}fetchQuery(r){const n=this.defaultQueryOptions(r);n.retry===void 0&&(n.retry=!1);const c=O(this,We).build(this,n);return c.isStaleByTime(ws(n.staleTime,c))?c.fetch(n):Promise.resolve(c.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(Mt).catch(Mt)}fetchInfiniteQuery(r){return r.behavior=ch(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(Mt).catch(Mt)}ensureInfiniteQueryData(r){return r.behavior=ch(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return Ki.isOnline()?O(this,ps).resumePausedMutations():Promise.resolve()}getQueryCache(){return O(this,We)}getMutationCache(){return O(this,ps)}getDefaultOptions(){return O(this,bs)}setDefaultOptions(r){de(this,bs,r)}setQueryDefaults(r,n){O(this,er).set(mn(r),{queryKey:r,defaultOptions:n})}getQueryDefaults(r){const n=[...O(this,er).values()],c={};return n.forEach(d=>{fn(r,d.queryKey)&&Object.assign(c,d.defaultOptions)}),c}setMutationDefaults(r,n){O(this,tr).set(mn(r),{mutationKey:r,defaultOptions:n})}getMutationDefaults(r){const n=[...O(this,tr).values()],c={};return n.forEach(d=>{fn(r,d.mutationKey)&&Object.assign(c,d.defaultOptions)}),c}defaultQueryOptions(r){if(r._defaulted)return r;const n={...O(this,bs).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return n.queryHash||(n.queryHash=Bd(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===Qd&&(n.enabled=!1),n}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...O(this,bs).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){O(this,We).clear(),O(this,ps).clear()}},We=new WeakMap,ps=new WeakMap,bs=new WeakMap,er=new WeakMap,tr=new WeakMap,vs=new WeakMap,ar=new WeakMap,sr=new WeakMap,Rh),Vh=g.createContext(void 0),sp=r=>{const n=g.useContext(Vh);if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n},lp=({client:r,children:n})=>(g.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),s.jsx(Vh.Provider,{value:r,children:n})),Zh=g.createContext(!1),rp=()=>g.useContext(Zh);Zh.Provider;function np(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var ip=g.createContext(np()),op=()=>g.useContext(ip),cp=(r,n)=>{(r.suspense||r.throwOnError||r.experimental_prefetchInRender)&&(n.isReset()||(r.retryOnMount=!1))},dp=r=>{g.useEffect(()=>{r.clearReset()},[r])},up=({result:r,errorResetBoundary:n,throwOnError:c,query:d,suspense:u})=>r.isError&&!n.isReset()&&!r.isFetching&&d&&(u&&r.data===void 0||Qy(c,[r.error,d])),mp=r=>{if(r.suspense){const c=u=>u==="static"?u:Math.max(u??1e3,1e3),d=r.staleTime;r.staleTime=typeof d=="function"?(...u)=>c(d(...u)):c(d),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3))}},fp=(r,n)=>r.isLoading&&r.isFetching&&!n,hp=(r,n)=>(r==null?void 0:r.suspense)&&n.isPending,uh=(r,n,c)=>n.fetchOptimistic(r).catch(()=>{c.clearReset()});function gp(r,n,c){var v,E,S,z,j;const d=rp(),u=op(),f=sp(),x=f.defaultQueryOptions(r);(E=(v=f.getDefaultOptions().queries)==null?void 0:v._experimental_beforeQuery)==null||E.call(v,x),x._optimisticResults=d?"isRestoring":"optimistic",mp(x),cp(x,u),dp(u);const b=!f.getQueryCache().get(x.queryHash),[p]=g.useState(()=>new n(f,x)),y=p.getOptimisticResult(x),k=!d&&r.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(M=>{const D=k?p.subscribe(pt.batchCalls(M)):Mt;return p.updateResult(),D},[p,k]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),g.useEffect(()=>{p.setOptions(x)},[x,p]),hp(x,y))throw uh(x,p,u);if(up({result:y,errorResetBoundary:u,throwOnError:x.throwOnError,query:f.getQueryCache().get(x.queryHash),suspense:x.suspense}))throw y.error;if((z=(S=f.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||z.call(S,x,y),x.experimental_prefetchInRender&&!ll&&fp(y,d)){const M=b?uh(x,p,u):(j=f.getQueryCache().get(x.queryHash))==null?void 0:j.promise;M==null||M.catch(Mt).finally(()=>{p.updateResult()})}return x.notifyOnChangeProps?y:p.trackResult(y)}function mh(r,n){return gp(r,Ky)}var ne=(r=>(r.Admin="admin",r.Doctor="doctor",r.Secretary="secretary",r.SubManager="sub_manager",r))(ne||{}),et=(r=>(r.Male="male",r.Female="female",r))(et||{}),sl=(r=>(r.Create="create",r.Update="update",r.Delete="delete",r))(sl||{});const hn="https://flixvr.alwaysdata.net/sara-api/public/";class rl extends Error{constructor(n,c,d){super(n),this.name="ApiError",this.status=c,this.errors=d}}let xp=[{id:"admin1",name:"د. مدير",email:"admin@example.com",role:ne.Admin,password:"1"},{id:"sub1",name:"مدير فرعي",email:"sub@example.com",role:ne.SubManager,password:"1"},{id:"doc1",name:"د. سميث",email:"smith@clinic.com",role:ne.Doctor,password:"1",specialty:"أسنان",is_diagnosis_doctor:!0},{id:"doc2",name:"د. جونز",email:"jones@clinic.com",role:ne.Doctor,password:"1",specialty:"قلب",is_diagnosis_doctor:!1},{id:"sec1",name:"سارة كونور",email:"sarah@clinic.com",role:ne.Secretary,password:"1"}],qa=null,Ua=null;const yp=r=>new Promise(n=>setTimeout(()=>n(r),500)),Ne=async(r,n={})=>{const c=localStorage.getItem("authToken");if(!c)throw console.error("No auth token found for API request"),new Error("Authentication token not found.");const d={Authorization:`Bearer ${c}`,Accept:"application/json",...n.body instanceof FormData?{}:{"Content-Type":"application/json"},...n.headers},u=await fetch(`${hn}${r}`,{...n,headers:d});if(!u.ok){let f=`خطأ في الخادم: ${u.status} ${u.statusText}`,x;try{const b=await u.json();if(b.message&&(f=b.message),b.errors)x=b.errors;else if(typeof b=="object"&&!Array.isArray(b)&&b!==null){const p=Object.keys(b)[0];p&&Array.isArray(b[p])&&(x=b,f="خطأ في التحقق من البيانات")}}catch{const p=await u.text();p&&(f=p)}throw console.error(`API call to ${r} failed with status ${u.status}:`,f,x),new rl(f,u.status,x)}return u.json()},pp=async(r,n)=>{try{const c=new FormData;c.append("email",r),c.append("password",n);const d=await fetch(`${hn}login`,{method:"POST",body:c});if(!d.ok){try{const x=await d.json();console.error("Login failed:",d.status,d.statusText,x)}catch{const b=await d.text();console.error("Login failed with non-JSON response:",d.status,d.statusText,b)}return null}const u=await d.json(),f=u.user;if(f&&f.id&&f.name&&f.role){const x={id:String(f.id),name:f.name,email:f.email,role:f.role,specialty:f.specialty,is_diagnosis_doctor:f.is_diagnosis_doctor==1};return u.token&&localStorage.setItem("authToken",u.token),x}return console.error("Invalid user data received from API:",u),null}catch(c){return console.error("An error occurred during the login API call:",c),null}},bp=async()=>{const r=localStorage.getItem("authToken");if(r)try{const n=await fetch(`${hn}logout`,{method:"POST",headers:{Authorization:`Bearer ${r}`,Accept:"application/json"}});n.ok||console.error("Logout API call failed:",n.status,n.statusText)}catch(n){console.error("An error occurred during the logout API call:",n)}},vp=async()=>{if(!localStorage.getItem("authToken"))return null;try{const n=await Ne("me",{method:"POST"});return n&&n.id&&n.name&&n.role?{id:String(n.id),name:n.name,email:n.email,role:n.role,specialty:n.specialty,is_diagnosis_doctor:n.is_diagnosis_doctor==1}:(console.error("Invalid user data received from /me API:",n),localStorage.removeItem("authToken"),null)}catch(n){return console.error("An error occurred during the /me API call:",n),localStorage.removeItem("authToken"),null}},jp=async(r=!1)=>{if(qa&&!r)return qa;try{const n=await Ne("users/all",{method:"POST"});return Array.isArray(n)?(qa=n.map(c=>({id:String(c.id),name:c.name,email:c.email,role:c.role,specialty:c.specialty,is_diagnosis_doctor:c.is_diagnosis_doctor==1})),qa):(console.error("Expected an array of users from API, but got:",n),qa=[],[])}catch(n){return console.error("Failed to fetch all users:",n),[]}},Yi=r=>({getAll:async()=>(await jp()).filter(c=>c.role===r),getById:n=>yp(xp.find(c=>c.id===n&&c.role===r)||null),create:async n=>{const c=new FormData;if(c.append("name",n.name),c.append("email",n.email),!n.password)throw new Error("Password is required to create a new user.");c.append("password",n.password),c.append("role",n.role),n.role===ne.Doctor&&(n.specialty&&c.append("specialty",n.specialty),n.is_diagnosis_doctor!==void 0&&c.append("is_diagnosis_doctor",n.is_diagnosis_doctor?"1":"0"));const d=await Ne("users/add",{method:"POST",body:c}),u=d.data;if(!u||!u.id){console.error("Invalid API response after creating user. Full response:",d);const x=d.message||"Invalid API response after creating user.";throw new Error(x)}const f={id:String(u.id),name:u.name,email:u.email,role:u.role,specialty:u.specialty,is_diagnosis_doctor:u.is_diagnosis_doctor==1};return qa=null,f},update:async(n,c)=>{const d=new FormData;d.append("id",n),c.name&&d.append("name",c.name),c.email&&d.append("email",c.email),c.password&&c.password.length>0&&d.append("password",c.password),c.specialty!==void 0&&d.append("specialty",c.specialty),c.is_diagnosis_doctor!==void 0&&d.append("is_diagnosis_doctor",c.is_diagnosis_doctor?"1":"0");const u=await Ne("users/edit",{method:"POST",body:d}),f=u.data;if(!f||!f.id)throw console.error("Invalid API response after updating user. Full response:",u),new Error(u.message||"Invalid API response after updating user.");const x={id:String(f.id),name:f.name,email:f.email,role:f.role,specialty:f.specialty,is_diagnosis_doctor:f.is_diagnosis_doctor==1};return qa=null,x},delete:async(n,c)=>{const d=new FormData;let u="users/delete";return r===ne.Doctor?(u="users/delete-doctor",d.append("doctor_id",n),c&&d.append("new_doctor_id",c)):d.append("id",n),await Ne(u,{method:"POST",body:d}),qa=null,!0}}),Fi=r=>({id:String(r.id),code:r.code,name:r.name,age:r.age,phone:r.phone,notes:r.notes??void 0,doctorIds:r.doctors?r.doctors.map(n=>String(n.id)):[],gender:r.gender==="female"?et.Female:et.Male,isSmoker:r.is_smoker==1,isPregnant:r.is_pregnant==1,drugAllergy:r.drug_allergy??void 0,chronicDiseases:r.chronic_diseases??void 0,createdAt:r.created_at,completed:r.completed==1,payment_completed:r.payment_completed==1}),Gi=r=>({id:String(r.id),patientId:String(r.patient_id),amount:parseFloat(r.amount),date:r.date.split("T")[0]}),pd=r=>({id:String(r.id),name:r.name,price:parseFloat(r.price),notes:r.notes??void 0}),bd=r=>{let n="00:00";if(r.time&&typeof r.time=="string"){const c=r.time.match(/(\d{2}):(\d{2})/);c&&(n=`${c[1]}:${c[2]}`)}return{id:String(r.id),patientId:String(r.patient_id),doctorId:String(r.doctor_id),date:r.date.split("T")[0],time:n,notes:r.notes??void 0,createdBy:r.created_by?String(r.created_by):void 0}},wp=(r,n)=>{const c=n.get(r.treatment_name);return c?{...c,instanceId:String(r.id),sessionId:String(r.session_id),sessionPrice:parseFloat(r.treatment_price),sessionNotes:r.treatment_notes??void 0,completed:r.completed==1,treatmentDate:r.treatment_date?new Date(r.treatment_date).toISOString().split("T")[0]:void 0,additionalCosts:r.additional_costs?parseFloat(r.additional_costs):void 0}:(console.warn(`Base treatment named "${r.treatment_name}" not found for session_treatment ID ${r.id}. Skipping.`),null)},vd=r=>({id:String(r.id),patientId:String(r.patient_id),doctorId:String(r.doctor_id),title:r.title??"",date:r.date,notes:r.notes??"",treatments:[],completed:r.completed==1}),fh=r=>{if(!r)return"09:00";try{const n=new Date(r),c=n.getUTCHours().toString().padStart(2,"0"),d=n.getUTCMinutes().toString().padStart(2,"0");return`${c}:${d}`}catch(n){return console.error("Invalid date string for time formatting:",r,n),"00:00"}},Np=r=>({id:String(r.id),day:r.day_of_week,isWorkDay:r.is_work_day==1,startTime:fh(r.start_time),endTime:fh(r.end_time)}),Sp=r=>({id:String(r.id),patientId:String(r.patient_id),imageUrl:r.image_url,caption:r.caption??"",date:r.date.split("T")[0]}),hh=r=>{const n=r.split(","),c=n[0].match(/:(.*?);/);if(!c)throw new Error("Invalid data URL format");const d=c[1],u=atob(n[1].trim());let f=u.length;const x=new Uint8Array(f);for(;f--;)x[f]=u.charCodeAt(f);return new Blob([x],{type:d})},gh=async()=>{try{const[r,n]=await Promise.all([Ne("treatments/all",{method:"POST"}),ae.treatmentSettings.getAll()]);if(!Array.isArray(r))return console.error("Expected an array of session treatments from API, but got:",r),{};const c=new Map(n.map(u=>[u.name,u]));return r.reduce((u,f)=>{const x=String(f.session_id);u[x]||(u[x]=[]);const b=wp(f,c);return b&&u[x].push(b),u},{})}catch(r){return console.error("Failed to get grouped session treatments:",r),{}}},xh=r=>{var n,c;return{id:String(r.id),userId:String(((n=r.user)==null?void 0:n.id)??r.user_id??""),patientId:String(r.patient_id??""),actionType:r.action_type,description:r.description,timestamp:r.timestamp,userName:((c=r.user)==null?void 0:c.name)??"مستخدم غير معروف"}},ae={cache:{invalidateAll:()=>{qa=null,Ua=null}},doctors:Yi(ne.Doctor),secretaries:Yi(ne.Secretary),admins:Yi(ne.Admin),subManagers:Yi(ne.SubManager),patients:{getAll:async r=>{try{const n=new FormData;n.append("page",String(r.page)),n.append("per_page",String(r.per_page)),r.search&&n.append("search",r.search),r.doctorId&&n.append("doctor_id",r.doctorId),r.completed!==void 0&&n.append("completed",r.completed),r.payment_completed!==void 0&&n.append("payment_completed",r.payment_completed);const c=await Ne("patients/all",{method:"POST",body:n});return!c||typeof c!="object"||!Array.isArray(c.data)?(console.error('Expected a paginated object with a "data" array from API, but got:',c),{patients:[],total:0,last_page:1}):{patients:c.data.map(Fi),total:c.total||0,last_page:c.last_page||1}}catch(n){throw console.error("Failed to fetch paginated patients:",n),n}},getById:async r=>{try{const n=new FormData;n.append("id",r);const d=(await Ne("patients/one",{method:"POST",body:n})).patient;return d?Fi(d):null}catch(n){return console.error(`Failed to fetch patient with id ${r}:`,n),null}},create:async(r,n)=>{try{const c=new FormData;if(c.append("user_id",n),c.append("name",r.name),c.append("age",String(r.age)),c.append("phone",r.phone),r.doctorIds&&r.doctorIds.length>0)r.doctorIds.forEach(f=>c.append("doctor_ids[]",f));else throw new Error("لا يمكن إنشاء مريض بدون طبيب مسؤول.");c.append("gender",r.gender),c.append("is_smoker",r.isSmoker?"1":"0"),c.append("is_pregnant",r.isPregnant?"1":"0"),r.notes&&c.append("notes",r.notes),r.drugAllergy&&c.append("drug_allergy",r.drugAllergy),r.chronicDiseases&&c.append("chronic_diseases",r.chronicDiseases);const u=(await Ne("patients/add",{method:"POST",body:c})).patient;if(!u||!u.id)throw new Error("Invalid API response after creating patient.");return Fi(u)}catch(c){throw console.error("Failed to create patient via API:",c),c}},update:async(r,n,c)=>{try{const d=new FormData;d.append("user_id",c),d.append("id",r),n.name&&d.append("name",n.name),n.age!==void 0&&d.append("age",String(n.age)),n.phone&&d.append("phone",n.phone),n.doctorIds&&n.doctorIds.length>0&&n.doctorIds.forEach(x=>d.append("doctor_ids[]",x)),n.gender&&d.append("gender",n.gender),n.isSmoker!==void 0&&d.append("is_smoker",n.isSmoker?"1":"0"),n.isPregnant!==void 0&&d.append("is_pregnant",n.isPregnant?"1":"0"),n.notes&&d.append("notes",n.notes),n.drugAllergy&&d.append("drug_allergy",n.drugAllergy),n.chronicDiseases&&d.append("chronic_diseases",n.chronicDiseases),n.completed!==void 0&&d.append("completed",n.completed?"1":"0");const u=await Ne("patients/edit",{method:"POST",body:d});if(u.message!=="Patient updated successfully"){const x=u.message||"An unexpected response was received from the server during update.";throw new Error(x)}const f=u.patient;if(!f||!f.id)throw new Error("Patient data was not returned in the API response after update.");return Fi(f)}catch(d){throw console.error(`Failed to update patient with ID ${r} via API:`,d),d}},delete:async(r,n)=>{try{const c=new FormData;c.append("user_id",n),c.append("id",r);const d=await Ne("patients/delete",{method:"POST",body:c});if(d.message==="Patient deleted successfully")return!0;const u=d.message||"An unexpected response was received from the server.";throw new Error(u)}catch(c){throw console.error(`Failed to delete patient with ID ${r}:`,c),c}}},treatmentSettings:{getAll:async(r=!1)=>{if(Ua&&!r)return Ua;try{const n=await Ne("treatments_setting/all",{method:"POST"});return Array.isArray(n)?(Ua=n.map(pd),Ua):(console.error("Expected an array of treatments from API, but got:",n),Ua=[],[])}catch(n){return console.error("Failed to fetch treatments:",n),[]}},create:async r=>{try{const n=new FormData;n.append("name",r.name),n.append("price",String(r.price)),r.notes&&n.append("notes",r.notes);const c=await Ne("treatments_setting/add",{method:"POST",body:n});if(c.message!=="Treatment created successfully")throw new Error(c.message||"Failed to create treatment.");const d=c.treatment;if(!d||!d.id)throw new Error("Treatment data was not returned in the API response after creation.");return Ua=null,pd(d)}catch(n){throw console.error("Failed to create treatment via API:",n),n}},update:async(r,n)=>{try{const c=new FormData;c.append("id",r),n.name&&c.append("name",n.name),n.price!==void 0&&c.append("price",String(n.price)),n.notes&&c.append("notes",n.notes);const d=await Ne("treatments_setting/edit",{method:"POST",body:c});if(d.message!=="Treatment updated successfully")throw new Error(d.message||"Failed to update treatment.");const u=d.treatment;if(!u)throw new Error("Treatment data not returned after update.");return Ua=null,pd(u)}catch(c){throw console.error(`Failed to update treatment with ID ${r}:`,c),c}},delete:async r=>{try{const n=new FormData;n.append("id",r);const c=await Ne("treatments_setting/delete",{method:"POST",body:n});if(c.message==="Treatment deleted successfully")return Ua=null,!0;throw new Error(c.message||"An unexpected response was received from the server.")}catch(n){throw console.error(`Failed to delete treatment with ID ${r}:`,n),n}}},sessionTreatments:{create:async r=>{const n=new FormData;return n.append("session_id",r.session_id),n.append("treatment_name",r.treatment_name),n.append("treatment_price",String(r.treatment_price)),n.append("treatment_date",r.treatment_date),n.append("completed",r.completed?"1":"0"),r.additional_costs&&n.append("additional_costs",String(r.additional_costs)),r.treatment_notes&&n.append("treatment_notes",r.treatment_notes),Ne("treatments/add",{method:"POST",body:n})},update:async(r,n)=>{const c=new FormData;return c.append("id",r),n.sessionPrice!==void 0&&c.append("treatment_price",String(n.sessionPrice)),n.additionalCosts!==void 0&&c.append("additional_costs",String(n.additionalCosts)),n.sessionNotes!==void 0&&c.append("treatment_notes",n.sessionNotes),n.treatmentDate!==void 0&&c.append("treatment_date",n.treatmentDate),n.completed!==void 0&&c.append("completed",n.completed?"1":"0"),Ne("treatments/edit",{method:"POST",body:c})},delete:async r=>{const n=new FormData;return n.append("id",r),Ne("treatments/delete",{method:"POST",body:n})}},sessions:{getAll:async()=>{try{const[r,n]=await Promise.all([Ne("sessions/all",{method:"POST"}),gh()]);return Array.isArray(r)?r.map(c=>{const d=vd(c);return d.treatments=n[d.id]||[],d}):(console.error("Expected an array of sessions from API, but got:",r),[])}catch(r){return console.error("Failed to fetch sessions with treatments:",r),[]}},getById:async r=>{try{const n=new FormData;n.append("id",r);const[c,d]=await Promise.all([Ne("sessions/one",{method:"POST",body:n}),gh()]),u=c.session;if(!u)return null;const f=vd(u);return f.treatments=d[f.id]||[],f}catch(n){return console.error(`Failed to fetch session with id ${r}:`,n),null}},create:async r=>{try{const n=new FormData;n.append("patient_id",r.patientId),n.append("doctor_id",r.doctorId),n.append("title",r.title),n.append("date",r.date.split("T")[0]),n.append("notes",r.notes);const c=await Ne("sessions/add",{method:"POST",body:n});if(c.message!=="Session created successfully")throw new Error(c.message||"Failed to create session.");const d=c.session;if(!d||!d.id)throw new Error("Session data was not returned in the API response after creation.");return vd(d)}catch(n){throw console.error("Failed to create session via API:",n),n}},update:async(r,n)=>{try{const c=new FormData;c.append("id",r),n.title!==void 0&&c.append("title",n.title),n.date&&c.append("date",n.date.split("T")[0]),n.notes!==void 0&&c.append("notes",n.notes),n.completed!==void 0&&c.append("completed",n.completed?"1":"0"),n.doctorId&&c.append("doctor_id",n.doctorId);const d=await Ne("sessions/edit",{method:"POST",body:c});if(d.message!=="Session updated successfully")throw new Error(d.message||"Failed to update session.");if(!d.session)throw new Error("Session data not returned after update.");return await ae.sessions.getById(r)}catch(c){throw console.error(`Failed to update session with ID ${r}:`,c),c}},delete:async r=>{try{const n=new FormData;n.append("id",r);const c=await Ne("sessions/delete",{method:"POST",body:n});if(c.message==="Session deleted successfully")return!0;throw new Error(c.message||"An unexpected response was received from the server.")}catch(n){throw console.error(`Failed to delete session with ID ${r}:`,n),n}}},appointments:{getAll:async()=>{try{const r=await Ne("appointments/all",{method:"POST"});return Array.isArray(r)?r.map(bd):(console.error("Expected an array of appointments from API, but got:",r),[])}catch(r){return console.error("Failed to fetch appointments:",r),[]}},create:async r=>{try{const n=new FormData;n.append("patient_id",r.patientId),n.append("doctor_id",r.doctorId),n.append("date",r.date),n.append("time",`${r.time}:00`),r.createdBy&&n.append("created_by",r.createdBy),r.notes&&n.append("notes",r.notes);const c=await Ne("appointments/add",{method:"POST",body:n});if(c.message!=="Appointment created and notification sent to assigned doctor")throw new Error(c.message||"Failed to create appointment.");const d=c.data;if(!d||!d.id)throw new Error("Appointment data was not returned after creation.");return bd(d)}catch(n){throw console.error("Failed to create appointment via API:",n),n}},update:async(r,n)=>{try{const c=new FormData;c.append("id",r),n.patientId&&c.append("patient_id",n.patientId),n.doctorId&&c.append("doctor_id",n.doctorId),n.date&&c.append("date",n.date),n.time&&c.append("time",`${n.time}:00`),n.notes&&c.append("notes",n.notes);const d=await Ne("appointments/edit",{method:"POST",body:c});if(d.message!=="Appointment updated")throw new Error(d.message||"Failed to update appointment.");const u=d.data;if(!u)throw new Error("Appointment data not returned after update.");return bd(u)}catch(c){throw console.error(`Failed to update appointment with ID ${r}:`,c),c}},delete:async r=>{try{const n=new FormData;n.append("id",r);const c=await Ne("appointments/delete",{method:"POST",body:n});if(c.message==="Appointment deleted successfully")return!0;throw new Error(c.message||"An unexpected response was received from the server.")}catch(n){throw console.error(`Failed to delete appointment with ID ${r}:`,n),n}}},payments:{getAll:async r=>{try{const n=new FormData;n.append("page",String(r.page)),n.append("per_page",String(r.per_page)),r.search&&n.append("search",r.search);const c=await Ne("payments/all",{method:"POST",body:n});return!c||typeof c!="object"||!Array.isArray(c.data)?Array.isArray(c)?{payments:c.map(Gi),total:c.length,last_page:1}:(console.error('Expected a paginated object with a "data" array from API, but got:',c),{payments:[],total:0,last_page:1}):{payments:c.data.map(Gi),total:c.total||0,last_page:c.last_page||1}}catch(n){throw console.error("Failed to fetch paginated payments:",n),n}},create:async r=>{try{const n=new FormData;n.append("patient_id",r.patientId),n.append("amount",String(r.amount)),n.append("date",r.date);const c=await Ne("payments/add",{method:"POST",body:n});if(c.message!=="Payment created successfully")throw new Error(c.message||"Failed to create payment.");const d=c.payment;if(!d||!d.id)throw new Error("Payment data was not returned in the API response after creation.");return Gi(d)}catch(n){throw console.error("Failed to create payment via API:",n),n}},update:async(r,n)=>{try{const c=new FormData;c.append("id",r),n.patientId&&c.append("patient_id",n.patientId),n.amount!==void 0&&c.append("amount",String(n.amount)),n.date&&c.append("date",n.date);const d=await Ne("payments/edit",{method:"POST",body:c});if(d.message!=="Payment updated successfully")throw new Error(d.message||"Failed to update payment.");const u=d.payment;if(!u)throw new Error("Payment data not returned after update.");return Gi(u)}catch(c){throw console.error(`Failed to update payment with ID ${r}:`,c),c}},delete:async r=>{try{const n=new FormData;n.append("id",r);const c=await Ne("payments/delete",{method:"POST",body:n});if(c.message==="Payment deleted successfully")return!0;throw new Error(c.message||"An unexpected response was received from the server.")}catch(n){throw console.error(`Failed to delete payment with ID ${r}:`,n),n}}},patientPhotos:{getAll:async()=>{try{const r=await Ne("patient_photos/all",{method:"POST"});return Array.isArray(r)?r.map(Sp):(console.error("Expected an array of photos from API, but got:",r),[])}catch(r){return console.error("Failed to fetch patient photos:",r),[]}},create:async r=>{const n=new FormData;n.append("patient_id",r.patientId),r.imageUrls.forEach((c,d)=>{if(c.startsWith("data:image")){const u=hh(c);n.append("images[]",u,`upload_${d}.${u.type.split("/")[1]||"jpg"}`)}}),r.captions.forEach(c=>{n.append("captions[]",c||"")}),await Ne("patient_photos/add",{method:"POST",body:n})},update:async(r,n)=>{const c=new FormData;if(c.append("id",r),n.patientId)c.append("patient_id",n.patientId);else throw new Error("Patient ID is required to update a photo.");if(n.caption!==void 0&&c.append("captions[0]",n.caption),n.imageUrl&&n.imageUrl.startsWith("data:image")){const u=hh(n.imageUrl);c.append("images[0]",u,`upload.${u.type.split("/")[1]||"jpg"}`)}const d=await Ne("patient_photos/edit",{method:"POST",body:c});if(d.message!=="تم التعديل بنجاح")throw new Error(d.message||"API did not confirm photo update.")},delete:async r=>{const n=new FormData;n.append("id",r);const c=await Ne("patient_photos/delete",{method:"POST",body:n});if(c.message!=="تم الحذف بنجاح")throw new Error(c.message||"An unexpected response was received from the server.");return!0}},activityLogs:{getAll:async r=>{try{const n=new FormData;n.append("page",String(r.page)),n.append("per_page",String(r.per_page)),r.search&&n.append("search",r.search),r.date&&n.append("date",r.date);const c=await Ne("activity_logs/all",{method:"POST",body:n}),d=c;return!d||typeof d!="object"||!Array.isArray(d.data)?(console.error('Expected a paginated object with a "data" array from API, but got:',c),Array.isArray(c)?{logs:c.map(xh),hasMore:!1}:{logs:[],hasMore:!1}):{logs:d.data.map(xh),hasMore:d.current_page<d.last_page}}catch(n){throw console.error("Failed to fetch activity logs:",n),n}}},doctorSchedules:{getForDoctor:async r=>{try{const n=await Ne("doctor_schedules/all",{method:"POST"});return Array.isArray(n)?n.filter(d=>String(d.doctor_id)===r).map(Np):(console.error("Expected an array of schedules, got:",n),[])}catch(n){throw console.error("Failed to fetch doctor schedules:",n),n}},setForDoctor:async(r,n)=>{const c=n.map(async d=>{const u=new FormData;u.append("doctor_id",r),u.append("day_of_week",String(d.day)),u.append("is_work_day",d.isWorkDay?"1":"0"),u.append("start_time",d.startTime),u.append("end_time",d.endTime),d.id?(u.append("id",d.id),await Ne("doctor_schedules/edit",{method:"POST",body:u})):d.isWorkDay&&await Ne("doctor_schedules/add",{method:"POST",body:u})});await Promise.all(c)}}},Zi=async(r,n)=>{try{const d=(await ae.sessions.getAll()).filter(x=>x.patientId===r),u=d.length>0&&d.every(x=>x.completed),f=await ae.patients.getById(r);if(!f||f.completed===u)return;await ae.patients.update(r,{completed:u},n)}catch(c){console.error(`Failed to update completion status for patient ${r}:`,c)}},yh=async r=>(await ae.sessions.getAll()).filter(c=>c.patientId===r),Kh=g.createContext(void 0),kp=({children:r})=>{const[n,c]=g.useState(null),[d,u]=g.useState(!0),[f,x]=g.useState(null);g.useEffect(()=>{(async()=>{const v=await vp();c(v),u(!1)})()},[]);const b=async(k,v)=>{const E=await pp(k,v);return E&&(x("تم تسجيل الدخول بنجاح!"),c(E)),E},p=async()=>{await bp(),c(null),localStorage.removeItem("authToken")},y=g.useMemo(()=>({user:n,isLoading:d,login:b,logout:p,loginSuccessMessage:f,setLoginSuccessMessage:x,setUser:c}),[n,d,f]);return nr.createElement(Kh.Provider,{value:y},r)},ir=()=>{const r=g.useContext(Kh);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},Ih=g.createContext(void 0),Cp=({children:r})=>{const[n,c]=g.useState(()=>{const f=localStorage.getItem("theme");return f||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});g.useEffect(()=>{const f=window.document.documentElement;n==="dark"?f.classList.add("dark"):f.classList.remove("dark"),localStorage.setItem("theme",n)},[n]);const d=()=>{c(f=>f==="light"?"dark":"light")},u=g.useMemo(()=>({theme:n,toggleTheme:d}),[n]);return nr.createElement(Ih.Provider,{value:u},r)},Dp=()=>{const r=g.useContext(Ih);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r},Jh=g.createContext(void 0),Ap=()=>{const r={appName:"Sara dental clinic",appLogo:"/assets/logo.svg"};try{const n=localStorage.getItem("appSettings");if(n){const c=JSON.parse(n);return{appName:c.appName||r.appName,appLogo:c.appLogo||r.appLogo}}}catch(n){console.error("Could not parse app settings from localStorage",n)}return r},Tp=({children:r})=>{const[n,c]=g.useState(Ap);g.useEffect(()=>{try{localStorage.setItem("appSettings",JSON.stringify(n)),document.title=n.appName}catch(x){console.error("Could not save app settings to localStorage",x)}},[n]);const d=x=>{c(b=>({...b,appName:x}))},u=x=>{c(b=>({...b,appLogo:x}))},f=g.useMemo(()=>({settings:n,setAppName:d,setAppLogo:u}),[n]);return nr.createElement(Jh.Provider,{value:f},r)},Gd=()=>{const r=g.useContext(Jh);if(r===void 0)throw new Error("useAppSettings must be used within an AppSettingsProvider");return r},Xi=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),lr=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-6v-1a6 6 0 00-9-5.197"})}),js=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.502 2.72a3 3 0 01-4.682-2.72m-7.5-2.998A4.5 4.5 0 005.625 7.5h8.75a4.5 4.5 0 005.625 3.228m-1.397 9.536A4.5 4.5 0 0112 15h-.008a4.5 4.5 0 01-3.34-1.574m-4.502 0a4.5 4.5 0 00-3.34-1.574H4.5"})}),gn=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 14.5M14.25 3.104c.251.023.501.05.75.082M19.8 14.5L14.25 10m-8.75 4.5L10 10m0 0h4.5m-4.5 0v6.125a2.25 2.25 0 002.25 2.25h.075l.354-1.18a2.25 2.25 0 012.17-1.418h.75a2.25 2.25 0 012.17 1.418l.354 1.18h.075a2.25 2.25 0 002.25-2.25V10m-11.25 0h11.25"})}),Ld=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),Ns=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01M12 12v.01M12 12c-1.11 0-2.08-.402-2.599-1M12 12V7m0 5v.01M12 16v-1m0-1c-1.11 0-2.08-.402-2.599-1M12 16c1.657 0 3-.895 3-2s-1.343-2-3-2"})}),fa=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),$h=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Ve=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),_t=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),Ze=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),Ep=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),Mp=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),Ke=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Ss=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"})}),$i=({className:r})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.432 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),_p=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.243 4.243L6.228 6.228"})}),ks=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),Ii=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ph=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ji=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),rr=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),Op=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0 4.142-3.358 7.5-7.5 7.5S4.5 16.142 4.5 12 7.858 4.5 12 4.5c2.396 0 4.532 1.107 5.864 2.822M15 4.5v5.25h5.25"})}),Xd=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Xl=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),zp=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})}),ph=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.143 5.902a4.5 4.5 0 017.714 0A8.967 8.967 0 0118 9.75v.75c0 .592.052 1.174.15 1.742m-1.5-2.492a5.992 5.992 0 00-5.992-5.992m0 0A5.992 5.992 0 003.158 9.75v.75c0 1.25.325 2.44.893 3.5m0 0a23.848 23.848 0 015.454-1.31M13.5 17.082a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0M3 3l18 18"})}),Up=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 8.25H7.5a2.25 2.25 0 00-2.25 2.25v9a2.25 2.25 0 002.25 2.25h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25H15M9 12l3 3m0 0l3-3m-3 3V2.25"})}),Rp=()=>{const[r,n]=g.useState(""),[c,d]=g.useState(""),[u,f]=g.useState(!1),[x,b]=g.useState(""),[p,y]=g.useState(!1),[k,v]=g.useState(!1),{login:E}=ir(),{settings:S}=Gd();g.useEffect(()=>{const j=localStorage.getItem("rememberedEmail"),M=localStorage.getItem("rememberedPassword");j&&M&&(n(j),d(M),f(!0))},[]);const z=async j=>{j.preventDefault(),b(""),y(!0);try{await E(r,c)?u?(localStorage.setItem("rememberedEmail",r),localStorage.setItem("rememberedPassword",c)):(localStorage.removeItem("rememberedEmail"),localStorage.removeItem("rememberedPassword")):b("البريد الإلكتروني أو كلمة المرور غير صالحة.")}catch{b("حدث خطأ. يرجى المحاولة مرة أخرى.")}finally{y(!1)}};return s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900",children:s.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:S.appLogo,alt:"شعار التطبيق",className:"mx-auto h-16 w-16"}),s.jsx("h1",{className:"mt-2 text-3xl font-bold text-primary",children:S.appName}),s.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"مرحباً بعودتك! الرجاء تسجيل الدخول إلى حسابك."})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:z,children:[x&&s.jsx("div",{className:"p-3 text-sm text-red-700 bg-red-100 dark:bg-red-900/30 dark:text-red-300 rounded-lg",role:"alert",children:x}),s.jsxs("div",{className:"space-y-4 rounded-md",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"البريد الإلكتروني"}),s.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"relative block w-full px-3 py-2 text-black dark:text-white placeholder-gray-500 dark:placeholder-gray-400 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus:z-10 sm:text-sm",placeholder:"البريد الإلكتروني",value:r,onChange:j=>n(j.target.value)})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"كلمة المرور"}),s.jsx("input",{id:"password",name:"password",type:k?"text":"password",autoComplete:"current-password",required:!0,className:"relative block w-full px-3 pr-10 py-2 text-black dark:text-white placeholder-gray-500 dark:placeholder-gray-400 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus:z-10 sm:text-sm",placeholder:"كلمة المرور",value:c,onChange:j=>d(j.target.value)}),s.jsx("button",{type:"button",onClick:()=>v(!k),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 focus:outline-none","aria-label":k?"إخفاء كلمة المرور":"إظهار كلمة المرور",children:k?s.jsx(_p,{className:"h-5 w-5"}):s.jsx($i,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:u,onChange:j=>f(j.target.checked),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700"}),s.jsx("label",{htmlFor:"remember-me",className:"mr-2 block text-sm text-gray-900 dark:text-gray-300",children:"تذكرني"})]})}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:p,className:"relative flex justify-center w-full px-4 py-2 text-sm font-medium text-white border border-transparent rounded-md group bg-primary hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:bg-primary-300",children:p?"جاري تسجيل الدخول...":"تسجيل الدخول"})})]})]})})},or=({className:r="h-8 w-8"})=>s.jsx("div",{className:`animate-spin rounded-full border-4 border-primary border-t-transparent ${r}`,role:"status",children:s.jsx("span",{className:"sr-only",children:"Loading..."})}),st=({containerClassName:r="py-16"})=>s.jsx("div",{className:`flex justify-center items-center ${r}`,children:s.jsx(or,{})}),Vi=({title:r,value:n,icon:c})=>s.jsxs("div",{className:"p-4 sm:p-6 bg-white dark:bg-slate-800 rounded-xl shadow-md flex items-center space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"p-3 bg-primary-100 dark:bg-primary-900/40 rounded-full",children:s.jsx(c,{className:"h-6 w-6 text-primary dark:text-primary-300"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg sm:text-xl font-medium text-black dark:text-white",children:n}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})]}),Lp=({action:r})=>{const n={className:"h-5 w-5"};switch(r){case sl.Create:return s.jsx("div",{className:"bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400 rounded-full p-2",children:s.jsx(Ve,{...n})});case sl.Update:return s.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-400 rounded-full p-2",children:s.jsx(_t,{...n})});case sl.Delete:return s.jsx("div",{className:"bg-red-100 dark:bg-red-900/40 text-red-600 dark:text-red-400 rounded-full p-2",children:s.jsx(Ze,{...n})});default:return s.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full p-2",children:s.jsx(lr,{...n})})}},jd=5,Hp=({user:r,refreshTrigger:n})=>{const[c,d]=g.useState({doctors:0,patients:0,appointments:0,revenue:0}),[u,f]=g.useState([]),[x,b]=g.useState(1),[p,y]=g.useState(!0),[k,v]=g.useState(!0),[E,S]=g.useState(!1),[z,j]=g.useState(null),[M,D]=g.useState(""),[L,T]=g.useState(""),C=g.useRef(!0);g.useEffect(()=>{(async()=>{v(!0),j(null);try{const[$,se,ie,H]=await Promise.all([ae.doctors.getAll(),ae.patients.getAll({page:1,per_page:1}),ae.appointments.getAll(),ae.payments.getAll({page:1,per_page:9999})]),P=H.payments.reduce((F,te)=>F+te.amount,0),I=new Date,Y=`${I.getFullYear()}-${String(I.getMonth()+1).padStart(2,"0")}-${String(I.getDate()).padStart(2,"0")}`,ce=ie.filter(F=>F.date===Y).length;d({doctors:$.length,patients:se.total,appointments:ce,revenue:P});const pe=await ae.activityLogs.getAll({page:1,per_page:jd,search:"",date:""});f(pe.logs),y(pe.hasMore),b(1),D(""),T("")}catch($){$ instanceof Error&&$.message.includes("Failed to fetch")?j("فشل جلب البيانات الرجاء التأكد من اتصالك بالانترنت واعادة تحميل البيانات"):(j("حدث خطأ غير متوقع."),console.error("Failed to fetch admin dashboard data:",$))}finally{v(!1),C.current=!1}})()},[n]),g.useEffect(()=>{if(C.current)return;const R=setTimeout(async()=>{v(!0);try{const{logs:$,hasMore:se}=await ae.activityLogs.getAll({page:1,per_page:jd,search:M,date:L});f($),y(se),b(1)}catch{j("فشل في جلب سجل النشاط.")}finally{v(!1)}},500);return()=>clearTimeout(R)},[M,L]);const V=async()=>{if(!(E||!p)){S(!0);try{const R=x+1,{logs:$,hasMore:se}=await ae.activityLogs.getAll({page:R,per_page:jd,search:M,date:L});f(ie=>[...ie,...$]),y(se),b(R)}catch{j("فشل في تحميل المزيد من السجلات.")}finally{S(!1)}}};return k&&u.length===0?s.jsx(st,{}):z&&u.length===0?s.jsx("div",{className:"text-center py-16 text-red-500 dark:text-red-400 bg-white dark:bg-slate-800 rounded-xl shadow-md",children:s.jsx("p",{children:z})}):s.jsxs("div",{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:gap-6 lg:grid-cols-4",children:[s.jsx(Vi,{title:"إجمالي الأطباء",value:c.doctors,icon:lr}),s.jsx(Vi,{title:"إجمالي المرضى",value:c.patients,icon:js}),s.jsx(Vi,{title:"مواعيد اليوم",value:c.appointments,icon:fa}),s.jsx(Vi,{title:"إجمالي الإيرادات",value:`SYP ${c.revenue.toLocaleString()}`,icon:Ns})]}),s.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 dark:text-gray-100",children:"النشاط الأخير"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[s.jsxs("div",{className:"relative flex-grow",children:[s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:s.jsx(ks,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),s.jsx("input",{type:"text",value:M,onChange:R=>D(R.target.value),placeholder:"ابحث بالوصف، اسم المريض أو المستخدم...",className:"w-full pl-3 pr-10 py-2 bg-white dark:bg-gray-700 text-black dark:text-white border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary"})]}),s.jsx("input",{type:"date",value:L,onChange:R=>T(R.target.value),className:"px-3 py-2 bg-white dark:bg-gray-700 text-black dark:text-white border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary"})]}),k&&u.length===0?s.jsx(st,{}):u.length>0?s.jsx("div",{className:"space-y-4",children:u.map(R=>s.jsxs("div",{className:"flex items-start space-x-4 rtl:space-x-reverse p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[s.jsx(Lp,{action:R.actionType}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:R.description}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["بواسطة ",R.userName," • ",new Date(R.timestamp).toLocaleString("ar-SA",{dateStyle:"medium",timeStyle:"short"})]})]})]},R.id))}):s.jsx("div",{className:"text-center py-10 text-gray-500 dark:text-gray-400",children:s.jsx("p",{children:"لا يوجد نشاط يطابق بحثك."})}),z&&s.jsx("p",{className:"text-center text-sm text-red-500 mt-4",children:z}),p&&s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:V,disabled:E,className:"px-6 py-2 bg-primary text-white font-semibold rounded-lg shadow-md hover:bg-primary-700 transition-colors disabled:bg-primary-300 disabled:cursor-not-allowed",children:E?"جاري التحميل...":"عرض المزيد"})})]})]})},qp=r=>{if(!r||!r.includes(":"))return r;try{const[n,c]=r.split(":").map(Number),d=n>=12?"مساءً":"صباحًا",f=(n%12||12).toString().padStart(2,"0"),x=c.toString().padStart(2,"0");return`${f}:${x} ${d}`}catch(n){return console.error("Failed to format time:",r,n),r}},Wh=({user:r,refreshTrigger:n})=>{const[c,d]=g.useState([]),[u,f]=g.useState([]),[x,b]=g.useState(!0),[p,y]=g.useState(null),[k,v]=g.useState(""),[E,S]=g.useState("today"),z=g.useCallback(async()=>{b(!0),y(null);try{const[T,C]=await Promise.all([ae.appointments.getAll(),ae.patients.getAll({page:1,per_page:9999})]),V=T.filter(R=>R.doctorId===r.id);d(V),f(C.patients)}catch(T){T instanceof Error&&T.message.includes("Failed to fetch")?y("فشل جلب البيانات الرجاء التأكد من اتصالك بالانترنت واعادة تحميل البيانات"):(y("حدث خطأ غير متوقع."),console.error("Failed to fetch schedule data:",T))}finally{b(!1)}},[r.id]);g.useEffect(()=>{z()},[z,n]);const j=T=>{var C;return((C=u.find(V=>V.id===T))==null?void 0:C.name)||"غير معروف"},M=g.useMemo(()=>{const T=new Date;T.setHours(0,0,0,0);const C=new Date(T);C.setDate(T.getDate()-T.getDay());const V=new Date(C);V.setDate(C.getDate()+6),V.setHours(23,59,59,999);const R=new Date(T.getFullYear(),T.getMonth()+1,0);R.setHours(23,59,59,999);let $=0,se=0;return c.forEach(ie=>{const H=new Date(ie.date);H.setMinutes(H.getMinutes()+H.getTimezoneOffset()),H.setHours(0,0,0,0),H>T&&H<=V&&$++,H>V&&H<=R&&se++}),{weekIndicatorCount:$,monthIndicatorCount:se}},[c]),D=g.useMemo(()=>{const T=new Date;T.setHours(0,0,0,0);const C=new Date(T);C.setDate(T.getDate()-T.getDay());const V=new Date(C);V.setDate(C.getDate()+6),V.setHours(23,59,59,999),new Date(T.getFullYear(),T.getMonth(),1);const R=new Date(T.getFullYear(),T.getMonth()+1,0);return R.setHours(23,59,59,999),c.filter($=>{const se=new Date($.date);switch(se.setMinutes(se.getMinutes()+se.getTimezoneOffset()),se.setHours(0,0,0,0),E){case"today":return se.getTime()===T.getTime();case"week":return se>T&&se<=V;case"month":return se>T&&se<=R;case"finished":return se.getTime()<T.getTime();case"all":default:return!0}}).filter($=>j($.patientId).toLowerCase().includes(k.toLowerCase())).sort(($,se)=>new Date($.date).getTime()-new Date(se.date).getTime()||$.time.localeCompare(se.time))},[c,u,k,E]),L=({filter:T,text:C,indicator:V})=>{const R=E===T;return s.jsxs("button",{onClick:()=>S(T),className:`relative px-4 py-2 text-sm font-semibold rounded-full transition-colors ${R?"bg-primary text-white shadow":"bg-white dark:bg-slate-700 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-600 border border-gray-200 dark:border-gray-600"}`,children:[C,V&&V>0&&s.jsx("span",{className:"absolute top-0 right-0 block h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-white dark:ring-slate-700"})]})};return s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:s.jsxs("div",{className:"relative w-full max-w-sm",children:[s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:s.jsx(ks,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),s.jsx("input",{type:"text",value:k,onChange:T=>v(T.target.value),placeholder:"ابحث عن مريض...",className:"w-full pl-3 pr-10 py-2 bg-white dark:bg-gray-700 text-black dark:text-white border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary"})]})}),s.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[s.jsx(L,{filter:"today",text:"اليوم"}),s.jsx(L,{filter:"week",text:"هذا الأسبوع",indicator:M.weekIndicatorCount}),s.jsx(L,{filter:"month",text:"هذا الشهر",indicator:M.monthIndicatorCount}),s.jsx(L,{filter:"finished",text:"مواعيد منتهية"}),s.jsx(L,{filter:"all",text:"الكل"})]}),s.jsx("div",{className:"min-h-[200px]",children:x?s.jsx(st,{}):p?s.jsx("div",{className:"text-center py-16 text-red-500 dark:text-red-400 bg-white dark:bg-slate-800 rounded-xl shadow-md",children:s.jsx("p",{children:p})}):D.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:D.map(T=>s.jsx("div",{className:"bg-white dark:bg-slate-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 flex flex-col shadow-md transition-shadow hover:shadow-lg",children:s.jsxs("div",{className:"flex-grow",children:[s.jsx("h3",{className:"text-xl font-bold text-primary",children:j(T.patientId)}),s.jsxs("div",{className:"mt-3 space-y-2 text-gray-700 dark:text-gray-300",children:[s.jsxs("p",{className:"flex items-center",children:[s.jsx(fa,{className:"h-5 w-5 ml-2 text-gray-500 dark:text-gray-400"})," ",new Date(T.date).toLocaleDateString()]}),s.jsxs("p",{className:"flex items-center",children:[s.jsx(Ph,{className:"h-5 w-5 ml-2 text-gray-500 dark:text-gray-400"})," ",qp(T.time)]})]}),T.notes&&s.jsxs("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 p-3 rounded-md border dark:border-gray-600",children:["ملاحظات: ",T.notes]})]})},T.id))}):s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 py-16 bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"لا توجد مواعيد"}),s.jsx("p",{className:"mt-2",children:"لم يتم العثور على مواعيد تطابق الفلترة الحالية."})]})})]})},bh=({title:r,value:n,icon:c})=>s.jsxs("div",{className:"p-4 sm:p-6 bg-white dark:bg-slate-800 rounded-xl shadow-md flex items-center space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"p-3 bg-primary-100 dark:bg-primary-900/40 rounded-full",children:s.jsx(c,{className:"h-6 w-6 text-primary dark:text-primary-300"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg sm:text-xl font-medium text-black dark:text-white",children:n}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})]}),Bp=({user:r,refreshTrigger:n})=>{const[c,d]=g.useState(0),[u,f]=g.useState(0),[x,b]=g.useState(!0);return g.useEffect(()=>{(async()=>{b(!0);try{const[y,k]=await Promise.all([ae.patients.getAll({page:1,per_page:1,doctorId:r.id}),ae.appointments.getAll()]);d(y.total);const v=new Date,E=`${v.getFullYear()}-${String(v.getMonth()+1).padStart(2,"0")}-${String(v.getDate()).padStart(2,"0")}`,S=k.filter(z=>z.doctorId===r.id&&z.date===E).length;f(S)}catch(y){console.error("Failed to fetch doctor dashboard stats:",y)}finally{b(!1)}})()},[r.id,n]),s.jsxs("div",{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:gap-6 mb-8",children:[s.jsx(bh,{title:"مرضاي",value:x?"...":c,icon:js}),s.jsx(bh,{title:"مواعيد اليوم",value:x?"...":u,icon:fa})]}),s.jsx(Wh,{user:r,refreshTrigger:n})]})},xn=r=>{if(!r||!r.includes(":"))return r;try{const[n,c]=r.split(":").map(Number),d=n>=12?"مساءً":"صباحًا",f=(n%12||12).toString().padStart(2,"0"),x=c.toString().padStart(2,"0");return`${f}:${x} ${d}`}catch(n){return console.error("Failed to format time:",r,n),r}},Qp=({onConfirm:r,onCancel:n,title:c,message:d,isDeleting:u})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-sm transform transition-all",role:"dialog",onClick:f=>f.stopPropagation(),children:[s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30",children:s.jsx(Ze,{className:"h-6 w-6 text-red-600 dark:text-red-400","aria-hidden":"true"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:c}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 px-4",children:d})]})}),s.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-2xl flex justify-center gap-4",children:[s.jsx("button",{type:"button",onClick:r,disabled:u,className:"w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-400 disabled:cursor-not-allowed",children:u?"جاري الحذف...":"نعم، قم بالحذف"}),s.jsx("button",{type:"button",onClick:n,disabled:u,className:"w-full rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"إلغاء"})]})]})}),Yp=({appointment:r,patientName:n,doctorName:c,onClose:d})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:d,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:u=>u.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"تفاصيل الموعد"}),s.jsx("button",{onClick:d,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"المريض"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"الطبيب"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:c})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"التاريخ"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:new Date(r.date).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"الوقت"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:xn(r.time)})]}),r.notes&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"ملاحظات"}),s.jsx("p",{className:"text-md text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 p-2 rounded-md",children:r.notes})]})]}),s.jsx("div",{className:"flex justify-end p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:s.jsx("button",{onClick:d,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-700",children:"إغلاق"})})]})}),eg=(r,n,c)=>{const d=[];try{const[u,f]=r.split(":").map(Number),[x,b]=n.split(":").map(Number),p=new Date;p.setHours(u,f,0,0);const y=new Date;for(y.setHours(x,b,0,0);p<y;)d.push(`${p.getHours().toString().padStart(2,"0")}:${p.getMinutes().toString().padStart(2,"0")}`),p.setMinutes(p.getMinutes()+c)}catch(u){console.error("Error generating time slots",u)}return d},Fp=({appointment:r,patients:n,doctors:c,onSave:d,onClose:u,user:f,initialData:x})=>{const[b,p]=g.useState({patientId:(r==null?void 0:r.patientId)||(x==null?void 0:x.patientId)||"",doctorId:(r==null?void 0:r.doctorId)||(x==null?void 0:x.doctorId)||"",date:(r!=null&&r.date?new Date(r.date):x!=null&&x.date?new Date(x.date):new Date).toISOString().split("T")[0],time:(r==null?void 0:r.time)||(x==null?void 0:x.time)||"",notes:(r==null?void 0:r.notes)||(x==null?void 0:x.notes)||""}),[y,k]=g.useState(!1),[v,E]=g.useState(!1),[S,z]=g.useState({name:"",phone:"",age:"",gender:et.Male,isSmoker:!1,isPregnant:!1}),[j,M]=g.useState(""),[D,L]=g.useState(!1),T=g.useRef(null),[C,V]=g.useState([]),[R,$]=g.useState(!1),[se,ie]=g.useState("");g.useEffect(()=>{if(r&&n.length>0){const G=n.find(oe=>oe.id===r.patientId);G&&M(G.name)}x!=null&&x.doctorId&&c.length>0&&c.find(G=>G.id===x.doctorId)},[r,x,n,c]);const H=g.useMemo(()=>j?n.filter(G=>G.name.toLowerCase().includes(j.toLowerCase())||G.code.includes(j)):n,[n,j]),P=G=>{p(oe=>{const fe={...oe,patientId:G.id};return x!=null&&x.time||(fe.time=""),G.doctorIds.includes(fe.doctorId)||(fe.doctorId=""),fe}),M(G.name),L(!1)};g.useEffect(()=>{const G=oe=>{T.current&&!T.current.contains(oe.target)&&L(!1)};return document.addEventListener("mousedown",G),()=>document.removeEventListener("mousedown",G)},[]);const I=G=>{const{name:oe,value:fe}=G.target;p(A=>{const w={...A,[oe]:fe};return(oe==="doctorId"||oe==="date")&&(x!=null&&x.time||(w.time="")),w})};g.useEffect(()=>{(async()=>{if($(!0),V([]),ie(""),b.doctorId&&b.date)try{const oe=ae.doctorSchedules.getForDoctor(b.doctorId),fe=ae.appointments.getAll(),[A,w]=await Promise.all([oe,fe]),Z=new Date(b.date);Z.setMinutes(Z.getMinutes()+Z.getTimezoneOffset());const ee=Z.getDay(),le=A.find(ot=>ot.day===ee);if(!le||!le.isWorkDay){ie("الطبيب غير متاح في هذا اليوم.");return}const ge=eg(le.startTime,le.endTime,30),Ie=w.filter(ot=>ot.doctorId===b.doctorId&&ot.date===b.date&&ot.id!==(r==null?void 0:r.id)).map(ot=>ot.time),Qe=ge.filter(ot=>!Ie.includes(ot));Qe.length===0&&ie("لا توجد أوقات متاحة في هذا اليوم.");const re=Qe.map(ot=>({value:ot,label:xn(ot)}));b.time&&!Qe.includes(b.time)&&re.unshift({value:b.time,label:`${xn(b.time)} (محجوز)`}),V(re)}catch(oe){console.error("Failed to fetch available slots:",oe),ie("فشل في تحميل الأوقات المتاحة.")}finally{$(!1)}else $(!1)})()},[b.doctorId,b.date,r==null?void 0:r.id,b.time]);const Y=g.useMemo(()=>{if(!b.patientId)return c;const G=n.find(oe=>oe.id===b.patientId);return G?c.filter(oe=>G.doctorIds.includes(oe.id)):[]},[b.patientId,n,c]),ce=G=>{const{name:oe,value:fe,type:A}=G.target;z(w=>{const Z={...w,[oe]:A==="checkbox"?G.target.checked:fe};return oe==="gender"&&fe===et.Male&&(Z.isPregnant=!1),Z})},pe=async G=>{G.preventDefault(),k(!0);try{let oe=b.patientId,fe=!1;if(v){if(!S.name||!S.phone||!S.age||!b.doctorId)throw new Error("يرجى ملء اسم المريض الجديد ورقم هاتفه وعمره واختيار طبيب.");oe=(await ae.patients.create({name:S.name,phone:S.phone,doctorIds:[b.doctorId],age:parseInt(S.age,10)||0,gender:S.gender,isSmoker:S.isSmoker,isPregnant:S.gender===et.Female?S.isPregnant:!1,notes:"مريض جديد تم إنشاؤه من صفحة المواعيد",createdAt:new Date().toISOString()},f.id)).id,fe=!0}if(!oe)throw new Error("يرجى اختيار مريض.");if(!b.time)throw new Error("يرجى اختيار وقت للموعد.");const A={...b,patientId:oe,createdBy:f.id},w=r?{...r,...A}:A;await d(w,fe)}catch(oe){alert(`فشل الحفظ: ${oe instanceof Error?oe.message:"خطأ غير معروف"}`)}finally{k(!1)}},F=!!r,te="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white";return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:u,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg",role:"dialog",onClick:G=>G.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:F?"تعديل الموعد":"إضافة موعد جديد"}),s.jsx("button",{onClick:u,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:pe,children:[s.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[70vh] overflow-y-auto",children:[s.jsx("div",{className:"md:col-span-2",children:v?s.jsxs("div",{className:"p-4 border dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"text-md font-semibold text-gray-800 dark:text-gray-100",children:"إضافة مريض جديد"}),s.jsx("button",{type:"button",onClick:()=>E(!1),className:"text-sm text-primary hover:underline font-medium",children:"العودة لاختيار مريض"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newPatientName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"اسم المريض"}),s.jsx("input",{type:"text",id:"newPatientName",name:"name",value:S.name,onChange:ce,required:!0,className:te,placeholder:"الاسم الكامل"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newPatientPhone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"هاتف المريض"}),s.jsx("input",{type:"tel",id:"newPatientPhone",name:"phone",value:S.phone,onChange:ce,required:!0,className:te,placeholder:"رقم الهاتف"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newPatientAge",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"العمر"}),s.jsx("input",{type:"number",id:"newPatientAge",name:"age",value:S.age,onChange:ce,required:!0,className:te,placeholder:"العمر"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newPatientGender",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الجنس"}),s.jsxs("select",{id:"newPatientGender",name:"gender",value:S.gender,onChange:ce,className:te,children:[s.jsx("option",{value:et.Male,children:"ذكر"}),s.jsx("option",{value:et.Female,children:"أنثى"})]})]}),s.jsxs("div",{className:"md:col-span-2 flex items-center space-x-4 pt-2",children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"isSmoker",checked:S.isSmoker,onChange:ce,className:"h-4 w-4 text-primary rounded border-gray-300 dark:border-gray-500 focus:ring-primary"}),s.jsx("span",{className:"mr-2 text-sm text-gray-700 dark:text-gray-300",children:"مدخن"})]}),S.gender===et.Female&&s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"isPregnant",checked:S.isPregnant,onChange:ce,className:"h-4 w-4 text-primary rounded border-gray-300 dark:border-gray-500 focus:ring-primary"}),s.jsx("span",{className:"mr-2 text-sm text-gray-700 dark:text-gray-300",children:"حامل"})]})]})]})]}):s.jsxs("div",{ref:T,className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("label",{htmlFor:"patientSearch",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"المريض"}),s.jsxs("button",{type:"button",onClick:()=>E(!0),className:"flex items-center text-sm font-medium text-primary hover:text-primary-700 transition-colors",children:[s.jsx(Ve,{className:"h-4 w-4 ml-1"}),"مريض جديد"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(ks,{className:"absolute top-1/2 right-3 -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{id:"patientSearch",type:"text",value:j,onChange:G=>{var oe;M(G.target.value),b.patientId&&((oe=n.find(fe=>fe.id===b.patientId))==null?void 0:oe.name)!==G.target.value&&p(fe=>({...fe,patientId:""})),L(!0)},onFocus:()=>L(!0),placeholder:"ابحث عن مريض بالاسم أو الكود...",required:!b.patientId,autoComplete:"off",className:te+" pr-10"})]}),D&&s.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-y-auto",children:H.length>0?H.map(G=>s.jsx("div",{onClick:()=>P(G),className:"px-4 py-2 cursor-pointer hover:bg-primary-100 dark:hover:bg-primary-900/40 text-gray-900 dark:text-gray-200",children:G.name},G.id)):s.jsx("div",{className:"px-4 py-2 text-gray-500",children:"لا يوجد مرضى مطابقون"})})]})}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{htmlFor:"doctorId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الطبيب"}),s.jsxs("select",{id:"doctorId",name:"doctorId",value:b.doctorId,onChange:I,required:!0,className:te,disabled:!!(x!=null&&x.doctorId)&&!b.patientId,children:[s.jsx("option",{value:"",children:"اختر طبيب..."}),Y.map(G=>s.jsx("option",{value:G.id,children:G.name},G.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"التاريخ"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"date",id:"date",name:"date",value:b.date,onChange:I,required:!0,className:`${te} pr-10`}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx(fa,{className:"h-5 w-5 text-black dark:text-white"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"time",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الوقت"}),R?s.jsx("div",{className:"h-10 flex items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:"جاري تحميل الأوقات..."}):s.jsxs("div",{className:"relative",children:[s.jsxs("select",{id:"time",name:"time",value:b.time,onChange:I,required:!0,className:`${te} pr-10`,disabled:!b.doctorId||!b.date,children:[s.jsx("option",{value:"",children:"اختر وقت..."}),C.length>0?C.map(G=>s.jsx("option",{value:G.value,children:G.label},G.value)):s.jsx("option",{disabled:!0,children:se||"اختر طبيب وتاريخ"})]}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx(Ph,{className:"h-5 w-5 text-black dark:text-white"})})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ملاحظات"}),s.jsx("textarea",{id:"notes",name:"notes",value:b.notes,onChange:I,rows:3,className:te})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:y,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:y?"جاري الحفظ...":"حفظ"})]})]})]})})},Gp=({doctors:r,allAppointments:n,onClose:c,onSlotSelect:d})=>{const[u,f]=g.useState({}),[x,b]=g.useState(!0);g.useEffect(()=>{const E=async()=>{b(!0);try{const S=r.map(M=>ae.doctorSchedules.getForDoctor(M.id)),z=await Promise.all(S),j=r.reduce((M,D,L)=>(M[D.id]=z[L],M),{});f(j)}catch(S){console.error("Failed to fetch doctor schedules",S)}finally{b(!1)}};r.length>0&&E()},[r]);const p=new Date,y=p.toISOString().split("T")[0],k=p.getDay(),v=E=>{const S=u[E.id];if(!S)return null;const z=S.find(L=>L.day===k);if(!z||!z.isWorkDay)return s.jsxs("div",{className:"p-4 border-b dark:border-gray-700",children:[s.jsx("h3",{className:"font-bold text-lg dark:text-gray-200",children:E.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"غير متاح اليوم."})]},E.id);const j=eg(z.startTime,z.endTime,30),M=n.filter(L=>L.doctorId===E.id&&L.date===y).map(L=>L.time),D=j.filter(L=>!M.includes(L));return s.jsxs("div",{className:"p-4 border-b dark:border-gray-700",children:[s.jsx("h3",{className:"font-bold text-lg dark:text-gray-200 mb-2",children:E.name}),D.length>0?s.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(L=>s.jsx("button",{onClick:()=>d(E.id,L),className:"px-3 py-1.5 bg-primary-100 dark:bg-primary-900/40 text-primary-700 dark:text-primary-300 font-semibold rounded-md hover:bg-primary-200 dark:hover:bg-primary-900/60 transition-colors text-sm",children:xn(L)},L))}):s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"لا توجد مواعيد متاحة."})]},E.id)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:c,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-3xl",role:"dialog",onClick:E=>E.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:["المواعيد المتاحة لهذا اليوم (",p.toLocaleDateString("ar-EG"),")"]}),s.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsx("div",{className:"p-2 max-h-[70vh] overflow-y-auto",children:x?s.jsx(st,{}):r.map(v)})]})})},tg=({user:r,refreshTrigger:n})=>{const[c,d]=g.useState([]),[u,f]=g.useState([]),[x,b]=g.useState([]),[p,y]=g.useState(!0),[k,v]=g.useState(null),[E,S]=g.useState(!1),[z,j]=g.useState(null),[M,D]=g.useState(null),[L,T]=g.useState(null),[C,V]=g.useState(!1),[R,$]=g.useState(""),[se,ie]=g.useState("today"),[H,P]=g.useState(!1),[I,Y]=g.useState(null),ce=g.useCallback(async()=>{y(!0),v(null);try{const[w,Z,ee]=await Promise.all([ae.appointments.getAll(),ae.doctors.getAll(),ae.patients.getAll({page:1,per_page:9999})]);d(w),b(Z),f(ee.patients)}catch(w){w instanceof Error&&w.message.includes("Failed to fetch")?v("فشل جلب البيانات الرجاء التأكد من اتصالك بالانترنت واعادة تحميل البيانات"):(v("حدث خطأ غير متوقع."),console.error("Failed to fetch data:",w))}finally{y(!1)}},[]);g.useEffect(()=>{ce()},[ce,n]);const pe=(w,Z)=>{P(!1),Y({doctorId:w,time:Z,date:new Date().toISOString().split("T")[0]}),S(!0)},F=async(w,Z)=>{try{const ee={...w,createdBy:r.id};"id"in ee?await ae.appointments.update(ee.id,ee):await ae.appointments.create(ee),S(!1),j(null),await ce()}catch(ee){throw console.error("Failed to save appointment:",ee),ee}},te=async()=>{if(L){V(!0);try{await ae.appointments.delete(L.id),T(null),await ce()}catch(w){console.error("Failed to delete appointment:",w),alert(`فشل حذف الموعد: ${w instanceof Error?w.message:"خطأ غير معروف"}`)}finally{V(!1)}}},G=w=>{var Z;return((Z=u.find(ee=>ee.id===w))==null?void 0:Z.name)||"مريض غير معروف"},oe=w=>{var Z;return((Z=x.find(ee=>ee.id===w))==null?void 0:Z.name)||"طبيب غير معروف"},fe=g.useMemo(()=>{const w=new Date;w.setHours(0,0,0,0);const Z=new Date(w.getFullYear(),w.getMonth()+1,0);return Z.setHours(23,59,59,999),c.filter(ee=>{const le=new Date(ee.date);switch(le.setMinutes(le.getMinutes()+le.getTimezoneOffset()),le.setHours(0,0,0,0),se){case"today":return le.getTime()===w.getTime();case"month":return le>w&&le<=Z;case"finished":return le.getTime()<w.getTime();case"all":default:return le.getTime()>=w.getTime()}}).filter(ee=>G(ee.patientId).toLowerCase().includes(R.toLowerCase())||oe(ee.doctorId).toLowerCase().includes(R.toLowerCase())).sort((ee,le)=>new Date(ee.date).getTime()-new Date(le.date).getTime()||ee.time.localeCompare(le.time))},[c,u,x,R,se]),A=({tab:w,text:Z})=>{const ee=se===w;return s.jsx("button",{onClick:()=>ie(w),className:`px-4 py-2 text-sm font-semibold rounded-full transition-colors ${ee?"bg-primary text-white shadow":"bg-white dark:bg-slate-700 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-600 border border-gray-200 dark:border-gray-600"}`,children:Z})};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[s.jsxs("div",{className:"relative w-full max-w-sm",children:[s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:s.jsx(ks,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),s.jsx("input",{type:"text",value:R,onChange:w=>$(w.target.value),placeholder:"ابحث عن مريض أو طبيب...",className:"w-full pl-3 pr-10 py-2 bg-white dark:bg-gray-700 text-black dark:text-white border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>P(!0),className:"hidden lg:flex items-center bg-teal-600 text-white px-4 py-2 rounded-lg shadow hover:bg-teal-700 transition-colors",children:[s.jsx(fa,{className:"h-5 w-5 ml-2"}),"المواعيد المتاحة"]}),(r.role===ne.Admin||r.role===ne.Secretary)&&s.jsxs("button",{onClick:()=>S(!0),className:"hidden lg:flex items-center bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-primary-700 transition-colors",children:[s.jsx(Ve,{className:"h-5 w-5 ml-2"}),"موعد جديد"]})]})]}),s.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-2",children:[s.jsx(A,{tab:"all",text:"كل المواعيد"}),s.jsx(A,{tab:"today",text:"مواعيد اليوم"}),s.jsx(A,{tab:"month",text:"هذا الشهر"}),s.jsx(A,{tab:"finished",text:"المنتهية"})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md min-h-[200px]",children:p?s.jsx(st,{}):k?s.jsx("div",{className:"text-center py-16 text-red-500 dark:text-red-400",children:s.jsx("p",{children:k})}):fe.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:fe.map(w=>{const Z=new Date;Z.setHours(0,0,0,0);const ee=new Date(w.date);ee.setMinutes(ee.getMinutes()+ee.getTimezoneOffset()),ee.setHours(0,0,0,0);const le=ee.getTime()<Z.getTime();return s.jsxs("div",{className:`border rounded-xl p-4 flex flex-col transition-shadow hover:shadow-lg ${le?"bg-gray-200 dark:bg-slate-900 opacity-75 border-gray-300 dark:border-gray-700":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:[s.jsxs("div",{className:"flex-grow",children:[s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("h3",{className:`text-lg font-bold ${le?"text-gray-600 dark:text-gray-400":"text-primary"}`,children:G(w.patientId)}),s.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${le?"bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:new Date(w.date).toLocaleDateString()})]}),s.jsx("p",{className:`font-bold text-3xl my-2 ${le?"text-gray-700 dark:text-gray-300":"text-gray-800 dark:text-gray-100"}`,children:xn(w.time)}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["مع الطبيب: ",oe(w.doctorId)]}),w.notes&&s.jsx("p",{className:`mt-2 text-sm p-2 rounded-md ${le?"bg-gray-300 dark:bg-gray-800 text-gray-700 dark:text-gray-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:w.notes})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600 flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>D(w),className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",title:"عرض التفاصيل",children:s.jsx($i,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),(r.role===ne.Admin||r.role===ne.Secretary)&&!le&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>j(w),className:"p-2 rounded-full text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/40",title:"تعديل",children:s.jsx(_t,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>T(w),className:"p-2 rounded-full text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40",title:"حذف",children:s.jsx(Ze,{className:"h-5 w-5"})})]})]})]},w.id)})}):s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-16",children:"لا توجد مواعيد تطابق الفلترة الحالية."})}),s.jsxs("div",{className:"lg:hidden fixed bottom-20 right-4 flex flex-col gap-3 z-20",children:[s.jsx("button",{onClick:()=>P(!0),className:"bg-teal-600 text-white p-4 rounded-full shadow-lg hover:bg-teal-700 transition-colors","aria-label":"المواعيد المتاحة",children:s.jsx(fa,{className:"h-6 w-6"})}),(r.role===ne.Admin||r.role===ne.Secretary)&&s.jsx("button",{onClick:()=>S(!0),className:"bg-primary text-white p-4 rounded-full shadow-lg hover:bg-primary-700 transition-colors","aria-label":"موعد جديد",children:s.jsx(Ve,{className:"h-6 w-6"})})]}),H&&s.jsx(Gp,{doctors:x,allAppointments:c,onClose:()=>P(!1),onSlotSelect:pe}),(E||z)&&s.jsx(Fp,{appointment:z||void 0,patients:u,doctors:x,onSave:F,onClose:()=>{S(!1),j(null),Y(null)},user:r,initialData:I},(z==null?void 0:z.id)||"add"),M&&s.jsx(Yp,{appointment:M,patientName:G(M.patientId),doctorName:oe(M.doctorId),onClose:()=>D(null)}),L&&s.jsx(Qp,{title:"حذف موعد",message:`هل أنت متأكد من حذف موعد ${G(L.patientId)}؟`,onConfirm:te,onCancel:()=>!C&&T(null),isDeleting:C})]})},vh=({title:r,value:n,icon:c})=>s.jsxs("div",{className:"p-4 sm:p-6 bg-white dark:bg-slate-800 rounded-xl shadow-md flex items-center space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"p-3 bg-primary-100 dark:bg-primary-900/40 rounded-full",children:s.jsx(c,{className:"h-6 w-6 text-primary dark:text-primary-300"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg sm:text-xl font-medium text-black dark:text-white",children:n}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})]}),Xp=({user:r,refreshTrigger:n})=>{const[c,d]=g.useState({appointments:0,patients:0}),[u,f]=g.useState(!0);return g.useEffect(()=>{(async()=>{f(!0);try{const[b,p]=await Promise.all([ae.appointments.getAll(),ae.patients.getAll({page:1,per_page:1})]),y=new Date,k=y.getFullYear(),v=String(y.getMonth()+1).padStart(2,"0"),E=String(y.getDate()).padStart(2,"0"),S=`${k}-${v}-${E}`,z=b.filter(j=>j.date===S).length;d({appointments:z,patients:p.total})}catch(b){console.error("Failed to fetch secretary dashboard stats:",b)}finally{f(!1)}})()},[n]),s.jsxs("div",{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:gap-6 mb-8",children:[s.jsx(vh,{title:"مواعيد اليوم",value:u?"...":c.appointments,icon:fa}),s.jsx(vh,{title:"إجمالي المرضى",value:u?"...":c.patients,icon:js})]}),s.jsx(tg,{user:r,refreshTrigger:n})]})},jh=({user:r,refreshTrigger:n})=>{const c=()=>{switch(r.role){case ne.Admin:return s.jsx(Hp,{user:r,refreshTrigger:n});case ne.Doctor:return s.jsx(Bp,{user:r,refreshTrigger:n});case ne.Secretary:return s.jsx(Xp,{user:r,refreshTrigger:n});default:return s.jsx("div",{children:"مرحباً!"})}};return s.jsx("div",{children:c()})},Vp=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),Zp=({className:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),Kp=()=>{const{theme:r,toggleTheme:n}=Dp();return s.jsx("button",{onClick:n,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-800 focus:ring-primary","aria-label":`Switch to ${r==="light"?"dark":"light"} mode`,children:r==="light"?s.jsx(Zp,{className:"h-6 w-6"}):s.jsx(Vp,{className:"h-6 w-6"})})},Ip=({user:r,setSidebarOpen:n,onRefresh:c,pageName:d,isInstallable:u,onInstallClick:f})=>s.jsx(s.Fragment,{children:s.jsxs("header",{className:"relative flex items-center justify-between p-4 bg-white dark:bg-slate-800 border-b dark:border-gray-700",children:[s.jsx("button",{onClick:()=>n(!0),className:"text-gray-500 dark:text-gray-400 focus:outline-none lg:hidden",children:s.jsx(Mp,{className:"h-6 w-6"})}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:s.jsx("h1",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 truncate pointer-events-none",children:d})}),s.jsxs("div",{className:"flex items-center",children:[u&&s.jsx("button",{onClick:f,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-800 focus:ring-primary","aria-label":"تثبيت التطبيق",title:"تثبيت التطبيق",children:s.jsx(Up,{className:"h-6 w-6"})}),s.jsx(Kp,{}),s.jsx("button",{onClick:c,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-800 focus:ring-primary","aria-label":"إعادة تحميل البيانات",children:s.jsx(Op,{className:"h-6 w-6"})})]})]})}),Vd={[ne.Admin]:[{name:"الملف الشخصي",icon:Xl,page:"profile"},{name:"لوحة التحكم",icon:Xi,page:"dashboard"},{name:"المستخدمين",icon:lr,page:"users"},{name:"المرضى",icon:js,page:"patients"},{name:"المواعيد",icon:fa,page:"appointments"},{name:"المدفوعات",icon:Ns,page:"payments"},{name:"الاحصائيات",icon:Ld,page:"statistics"}],[ne.SubManager]:[{name:"الملف الشخصي",icon:Xl,page:"profile"},{name:"لوحة التحكم",icon:Xi,page:"dashboard"},{name:"المستخدمين",icon:lr,page:"users"},{name:"المرضى",icon:js,page:"patients"},{name:"المواعيد",icon:fa,page:"appointments"},{name:"المدفوعات",icon:Ns,page:"payments"},{name:"الاحصائيات",icon:Ld,page:"statistics"}],[ne.Doctor]:[{name:"الملف الشخصي",icon:Xl,page:"profile"},{name:"لوحة التحكم",icon:Xi,page:"dashboard"},{name:"مرضاي",icon:js,page:"patients"}],[ne.Secretary]:[{name:"الملف الشخصي",icon:Xl,page:"profile"},{name:"لوحة التحكم",icon:Xi,page:"dashboard"},{name:"المرضى",icon:js,page:"patients"},{name:"المدفوعات",icon:Ns,page:"payments"}]},wh=["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],Jp={[ne.Admin]:"مدير",[ne.Doctor]:"طبيب",[ne.Secretary]:"سكرتير",[ne.SubManager]:"مدير فرعي"},$p="BHaNdTdoCkF0IzrmmhbuuggJllWdP3JQIKdpChIhangVyCWH0rcMs3XXH8YsI61_lkrZ23RpwWW8V5hafK7hYnA";function Pp(r){const n="=".repeat((4-r.length%4)%4),c=(r+n).replace(/\-/g,"+").replace(/_/g,"/"),d=atob(c);return Uint8Array.from([...d].map(u=>u.charCodeAt(0)))}const Wp=({user:r,currentPage:n,setCurrentPage:c,sidebarOpen:d,setSidebarOpen:u})=>{const f=Vd[r.role],{settings:x}=Gd(),[b,p]=g.useState("default"),[y,k]=g.useState(!1),[v,E]=g.useState(!0),[S,z]=g.useState(!1);g.useEffect(()=>{"serviceWorker"in navigator&&"PushManager"in window?(z(!0),p(Notification.permission),navigator.serviceWorker.ready.then(C=>{C.pushManager.getSubscription().then(V=>{V&&!(V.expirationTime&&Date.now()>V.expirationTime-300*1e3)&&k(!0),E(!1)})})):E(!1)},[]);const j=async()=>{if(Notification.permission==="denied"){alert("تم حظر الإشعارات. يرجى تغيير الإعدادات في متصفحك.");return}E(!0);try{const C=await navigator.serviceWorker.ready,V=await C.pushManager.getSubscription();if(V)await V.unsubscribe(),await fetch(`${hn}delete-subscription`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:V.endpoint})}),console.log("Unsubscribed successfully."),k(!1);else{const R=await C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Pp($p)}),$=await fetch(`${hn}save-subscription`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:R.endpoint,keys:{p256dh:btoa(String.fromCharCode(...new Uint8Array(R.getKey("p256dh")))),auth:btoa(String.fromCharCode(...new Uint8Array(R.getKey("auth"))))},user_id:r.id,encoding:"aesgcm"})});if(!$.ok)throw new Error(`Failed to save subscription on server: ${$.statusText}`);if(!(await $.json()).success)throw new Error("Backend failed to save subscription.");console.log("Subscribed successfully:",JSON.stringify(R)),k(!0)}}catch(C){console.error("Failed to subscribe/unsubscribe",C),alert("فشل في تحديث حالة الإشعارات. الرجاء المحاولة مرة أخرى.")}finally{E(!1)}},M=()=>{if(!S)return null;if(v)return s.jsxs("div",{className:"flex items-center mt-4 py-2 px-6 text-gray-600 dark:text-gray-300",children:[s.jsx(or,{className:"h-6 w-6"}),s.jsx("span",{className:"mx-3",children:"جاري التحميل..."})]});if(b==="denied")return s.jsxs("div",{className:"flex items-center mt-4 py-2 px-6 text-red-600 dark:text-red-400 cursor-help",title:"تم حظر الإشعارات. يرجى تغيير الإعدادات في متصفحك.",children:[s.jsx(ph,{className:"h-6 w-6"}),s.jsx("span",{className:"mx-3",children:"الإشعارات محظورة"})]});const C=y?"إيقاف الإشعارات":"تفعيل الإشعارات",V=y?ph:zp,R=y?"hover:bg-red-100 dark:hover:bg-red-900/40 text-red-600 dark:text-red-400":"hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300";return s.jsxs("a",{href:"#",onClick:$=>{$.preventDefault(),j()},className:`flex items-center mt-4 py-2 px-6 rounded-md transition-colors duration-200 ${R}`,children:[s.jsx(V,{className:"h-6 w-6"}),s.jsx("span",{className:"mx-3",children:C})]})},D=C=>{c(C),u(!1)},L=s.jsxs("div",{className:"flex items-center justify-center h-20 border-b dark:border-gray-700 px-4 space-x-2 rtl:space-x-reverse",children:[s.jsx("img",{src:x.appLogo,alt:"شعار التطبيق",className:"h-10 w-10"}),s.jsx("h1",{className:"text-xl font-bold text-primary truncate",children:x.appName})]}),T=s.jsxs("nav",{className:"mt-8 px-2",children:[f.map(C=>s.jsxs("a",{href:"#",onClick:V=>{V.preventDefault(),D(C.page)},className:`flex items-center mt-4 py-2 px-6 rounded-md transition-colors duration-200 ${n===C.page?"bg-primary-100 text-primary-700 dark:bg-primary-900/40 dark:text-primary-300":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[s.jsx(C.icon,{className:"h-6 w-6"}),s.jsx("span",{className:"mx-3",children:C.name})]},C.name)),S&&s.jsx("div",{className:"pt-4 mt-4 border-t border-gray-200 dark:border-gray-700",children:M()})]});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`fixed inset-0 z-30 flex transition-transform duration-300 lg:hidden ${d?"translate-x-0":"translate-x-full"}`,children:[s.jsxs("div",{className:"relative flex w-64 max-w-xs flex-1 flex-col bg-white dark:bg-slate-800",children:[s.jsx("div",{className:"absolute top-0 left-0 -ml-12 pt-2",children:s.jsxs("button",{type:"button",className:"mr-1 flex h-10 w-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>u(!1),children:[s.jsx("span",{className:"sr-only",children:"إغلاق الشريط الجانبي"}),s.jsx(Ke,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})}),L,T]}),s.jsx("div",{className:"w-14 flex-shrink-0","aria-hidden":"true"})]}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:()=>u(!1)}),s.jsxs("aside",{className:"hidden lg:flex lg:flex-col w-64 bg-white dark:bg-slate-800 border-r dark:border-gray-700",children:[L,s.jsx("div",{className:"flex-1 overflow-y-auto",children:T})]})]})},eb=({user:r,currentPage:n,setCurrentPage:c})=>{const d=Vd[r.role].filter(u=>u.page!=="profile");return s.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 z-10 w-full h-16 bg-white dark:bg-slate-800 border-t border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"flex h-full max-w-lg mx-auto font-medium",children:d.slice(0,5).map(u=>s.jsxs("button",{type:"button",onClick:()=>c(u.page),className:`flex-1 inline-flex flex-col items-center justify-center p-2 hover:bg-gray-50 dark:hover:bg-gray-700 group ${n===u.page?"text-primary":"text-gray-500 dark:text-gray-400"}`,children:[s.jsx(u.icon,{className:"w-6 h-6 mb-1"}),s.jsx("span",{className:"text-xs text-center",children:u.name})]},u.name))})})},tb=({user:r,currentPage:n,setCurrentPage:c,onRefresh:d,children:u})=>{const[f,x]=g.useState(!1),{loginSuccessMessage:b,setLoginSuccessMessage:p}=ir(),[y,k]=g.useState(null),[v,E]=g.useState(!1);g.useEffect(()=>{if(b){const j=setTimeout(()=>{p(null)},5e3);return()=>clearTimeout(j)}},[b,p]),g.useEffect(()=>{const j=M=>{M.preventDefault(),k(M),E(!0)};return window.addEventListener("beforeinstallprompt",j),window.addEventListener("appinstalled",()=>{E(!1),k(null),console.log("PWA was installed")}),()=>{window.removeEventListener("beforeinstallprompt",j),window.removeEventListener("appinstalled",()=>{})}},[]);const S=async()=>{if(!y)return;y.prompt();const{outcome:j}=await y.userChoice;(j==="accepted"||j==="dismissed")&&(E(!1),k(null))},z=g.useMemo(()=>{const j={sessions:"جلسات المريض",plan:"خطة العلاج",details:"تفاصيل المريض",financial:"البيان المالي للمريض",photos:"معرض صور المريض",activity:"سجل نشاط المريض"};if(j[n])return j[n];const D=Object.values(Vd).flat().find(L=>L.page===n);return D?D.name:""},[n]);return s.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[b&&s.jsxs("div",{className:"fixed top-5 left-1/2 -translate-x-1/2 z-50 flex items-center w-full max-w-xs p-4 space-x-4 rtl:space-x-reverse text-gray-500 bg-white rounded-lg shadow-lg dark:text-gray-400 dark:bg-gray-800",role:"alert",children:[s.jsxs("div",{className:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-green-500 bg-green-100 rounded-lg dark:bg-green-800 dark:text-green-200",children:[s.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})}),s.jsx("span",{className:"sr-only",children:"Check icon"})]}),s.jsx("div",{className:"text-sm font-normal",children:b}),s.jsxs("button",{type:"button",onClick:()=>p(null),className:"ms-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700","aria-label":"Close",children:[s.jsx("span",{className:"sr-only",children:"Close"}),s.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:s.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})})]})]}),s.jsx(Wp,{user:r,currentPage:n,setCurrentPage:c,sidebarOpen:f,setSidebarOpen:x}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(Ip,{user:r,setSidebarOpen:x,onRefresh:d,pageName:z,isInstallable:v,onInstallClick:S}),s.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 dark:bg-gray-900 p-4 md:p-6 pb-20 lg:pb-6",children:u}),s.jsx(eb,{user:r,currentPage:n,setCurrentPage:c})]})]})},ab=({onConfirm:r,onCancel:n,title:c,message:d,isDeleting:u})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-sm transform transition-all",role:"dialog",onClick:f=>f.stopPropagation(),children:[s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30",children:s.jsx(Ze,{className:"h-6 w-6 text-red-600 dark:text-red-400","aria-hidden":"true"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:c}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 px-4",children:d})]})}),s.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-2xl flex justify-center gap-4",children:[s.jsx("button",{type:"button",onClick:r,disabled:u,className:"w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-400 disabled:cursor-not-allowed",children:u?"جاري الحذف...":"نعم، قم بالحذف"}),s.jsx("button",{type:"button",onClick:n,disabled:u,className:"w-full rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"إلغاء"})]})]})}),sb=({onSave:r,onClose:n,doctors:c,user:d})=>{const[u,f]=g.useState({name:"",age:"",phone:"",notes:"",gender:et.Male,isSmoker:!1,isPregnant:!1,drugAllergy:"",chronicDiseases:"",doctorIds:d.role===ne.Doctor?[d.id]:[]}),[x,b]=g.useState(!1),p="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white",y=d.role===ne.Admin||d.role===ne.Secretary||d.role===ne.Doctor&&d.is_diagnosis_doctor,k=S=>{f(z=>{const j=z.doctorIds,M=j.includes(S)?j.filter(D=>D!==S):[...j,S];return{...z,doctorIds:M}})},v=S=>{const{name:z,value:j,type:M}=S.target;if(M==="checkbox"){const{checked:D}=S.target;f(L=>({...L,[z]:D}))}else f(D=>({...D,[z]:j})),z==="gender"&&j===et.Male&&f(D=>({...D,isPregnant:!1}))},E=async S=>{if(S.preventDefault(),u.doctorIds.length===0){alert("يرجى اختيار طبيب واحد على الأقل.");return}b(!0);const z={...u,age:parseInt(u.age,10)||0,isPregnant:u.gender===et.Female?u.isPregnant:!1,createdAt:new Date().toISOString()};try{await r(z)}catch(j){const M=j instanceof Error?j.message:"خطأ غير معروف";alert(`فشل الحفظ: ${M}`),b(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg",role:"dialog",onClick:S=>S.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"إضافة مريض جديد"}),s.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:E,children:[s.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الاسم"}),s.jsx("input",{type:"text",id:"name",name:"name",value:u.name,onChange:v,required:!0,className:p})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"العمر"}),s.jsx("input",{type:"number",id:"age",name:"age",value:u.age,onChange:v,required:!0,className:p})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الهاتف"}),s.jsx("input",{type:"tel",id:"phone",name:"phone",value:u.phone,onChange:v,required:!0,className:p})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الجنس"}),s.jsxs("select",{id:"gender",name:"gender",value:u.gender,onChange:v,className:p,children:[s.jsx("option",{value:et.Male,children:"ذكر"}),s.jsx("option",{value:et.Female,children:"أنثى"})]})]}),y&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الأطباء المسؤولون"}),s.jsx("div",{className:"mt-2 p-3 border border-gray-800 dark:border-gray-600 rounded-md h-32 overflow-y-auto space-y-2 bg-white dark:bg-gray-700",children:c.map(S=>s.jsxs("label",{className:"flex items-center space-x-3 rtl:space-x-reverse cursor-pointer p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-600",children:[s.jsx("input",{type:"checkbox",checked:u.doctorIds.includes(S.id),onChange:()=>k(S.id),className:"h-4 w-4 text-primary rounded border-gray-300 dark:border-gray-500 focus:ring-primary"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:S.name}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 block",children:S.specialty||"لا يوجد تخصص"})]})]},S.id))})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{htmlFor:"drugAllergy",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الحساسية الدوائية"}),s.jsx("textarea",{id:"drugAllergy",name:"drugAllergy",value:u.drugAllergy,onChange:v,rows:2,className:p})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{htmlFor:"chronicDiseases",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الأمراض المزمنة"}),s.jsx("textarea",{id:"chronicDiseases",name:"chronicDiseases",value:u.chronicDiseases,onChange:v,rows:2,className:p})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ملاحظات عامة"}),s.jsx("textarea",{id:"notes",name:"notes",value:u.notes,onChange:v,rows:2,className:p})]}),s.jsxs("div",{className:"md:col-span-2 flex items-center space-x-4 pt-2",children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"isSmoker",checked:u.isSmoker,onChange:v,className:"h-4 w-4 text-primary rounded border-gray-300 dark:border-gray-500 focus:ring-primary"}),s.jsx("span",{className:"mr-2 text-sm text-gray-700 dark:text-gray-300",children:"مدخن"})]}),u.gender===et.Female&&s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"isPregnant",checked:u.isPregnant,onChange:v,className:"h-4 w-4 text-primary rounded border-gray-300 dark:border-gray-500 focus:ring-primary"}),s.jsx("span",{className:"mr-2 text-sm text-gray-700 dark:text-gray-300",children:"حامل"})]})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700 rounded-b-lg gap-4",children:[s.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300",children:x?"جاري الحفظ...":"حفظ"})]})]})]})})},lb=({patient:r,onSave:n,onClose:c,doctors:d,user:u})=>{const[f,x]=g.useState({name:r.name,age:r.age.toString(),phone:r.phone,notes:r.notes,gender:r.gender||et.Male,isSmoker:r.isSmoker||!1,isPregnant:r.isPregnant||!1,drugAllergy:r.drugAllergy||"",chronicDiseases:r.chronicDiseases||"",doctorIds:r.doctorIds||[]}),[b,p]=g.useState(!1),y="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white",k=u.role===ne.Secretary,v=u.role===ne.Admin||u.role===ne.Secretary||u.role===ne.Doctor&&u.is_diagnosis_doctor,E=j=>{x(M=>{const D=M.doctorIds,L=D.includes(j)?D.filter(T=>T!==j):[...D,j];return{...M,doctorIds:L}})},S=j=>{const{name:M,value:D,type:L}=j.target;if(L==="checkbox"){const{checked:T}=j.target;x(C=>({...C,[M]:T}))}else x(T=>({...T,[M]:D})),M==="gender"&&D===et.Male&&x(T=>({...T,isPregnant:!1}))},z=async j=>{j.preventDefault(),p(!0);const M={...r,name:f.name,age:parseInt(f.age,10)||0,phone:f.phone,notes:f.notes,gender:f.gender,isSmoker:f.isSmoker,isPregnant:f.gender===et.Female?f.isPregnant:!1,drugAllergy:f.drugAllergy,chronicDiseases:f.chronicDiseases,doctorIds:f.doctorIds};try{await n(M)}catch(D){const L=D instanceof Error?D.message:"خطأ غير معروف";alert(`فشل الحفظ: ${L}`),p(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:c,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg",role:"dialog",onClick:j=>j.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"تعديل بيانات المريض"}),s.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:z,children:[s.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto grid grid-cols-1 md:grid-cols-2 gap-4",children:[!k&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"كود المريض"}),s.jsx("p",{className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md text-gray-600 dark:text-gray-400",children:r.code})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الاسم"}),s.jsx("input",{type:"text",id:"name",name:"name",value:f.name,onChange:S,required:!0,className:y})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"العمر"}),s.jsx("input",{type:"number",id:"age",name:"age",value:f.age,onChange:S,required:!0,className:y})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الهاتف"}),s.jsx("input",{type:"tel",id:"phone",name:"phone",value:f.phone,onChange:S,required:!0,className:y})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الجنس"}),s.jsxs("select",{id:"gender",name:"gender",value:f.gender,onChange:S,className:y,children:[s.jsx("option",{value:et.Male,children:"ذكر"}),s.jsx("option",{value:et.Female,children:"أنثى"})]})]}),v&&!k&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الأطباء المسؤولون"}),s.jsx("div",{className:"mt-2 p-3 border border-gray-800 dark:border-gray-600 rounded-md h-32 overflow-y-auto space-y-2 bg-white dark:bg-gray-700",children:d.map(j=>s.jsxs("label",{className:"flex items-center space-x-3 rtl:space-x-reverse cursor-pointer p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-600",children:[s.jsx("input",{type:"checkbox",checked:f.doctorIds.includes(j.id),onChange:()=>E(j.id),className:"h-4 w-4 text-primary rounded border-gray-300 dark:border-gray-500 focus:ring-primary"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:j.name}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 block",children:j.specialty||"لا يوجد تخصص"})]})]},j.id))})]}),!k&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{htmlFor:"drugAllergyEdit",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الحساسية الدوائية"}),s.jsx("textarea",{id:"drugAllergyEdit",name:"drugAllergy",value:f.drugAllergy,onChange:S,rows:2,className:y})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{htmlFor:"chronicDiseasesEdit",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الأمراض المزمنة"}),s.jsx("textarea",{id:"chronicDiseasesEdit",name:"chronicDiseases",value:f.chronicDiseases,onChange:S,rows:2,className:y})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ملاحظات عامة"}),s.jsx("textarea",{id:"notes",name:"notes",value:f.notes,onChange:S,rows:2,className:y})]})]}),s.jsxs("div",{className:"md:col-span-2 flex items-center space-x-4 pt-2",children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"isSmoker",checked:f.isSmoker,onChange:S,className:"h-4 w-4 text-primary rounded border-gray-300 dark:border-gray-500 focus:ring-primary"}),s.jsx("span",{className:"mr-2 text-sm text-gray-700 dark:text-gray-300",children:"مدخن"})]}),f.gender===et.Female&&s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"isPregnant",checked:f.isPregnant,onChange:S,className:"h-4 w-4 text-primary rounded border-gray-300 dark:border-gray-500 focus:ring-primary"}),s.jsx("span",{className:"mr-2 text-sm text-gray-700 dark:text-gray-300",children:"حامل"})]})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700 rounded-b-lg gap-4",children:[s.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:b,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300",children:b?"جاري الحفظ...":"حفظ"})]})]})]})})},rb=({currentPage:r,totalPages:n,onPageChange:c})=>n<=1?null:s.jsxs("nav",{className:"flex items-center justify-center mt-8","aria-label":"Pagination",children:[s.jsx("button",{onClick:()=>c(r-1),disabled:r===1,className:"px-4 py-2 mx-1 leading-tight text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"السابق"}),s.jsx("div",{className:"flex items-center mx-4",children:s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-400",children:["صفحة ",s.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:r})," من ",s.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:n})]})}),s.jsx("button",{onClick:()=>c(r+1),disabled:r===n,className:"px-4 py-2 mx-1 leading-tight text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"التالي"})]}),nb=({patientName:r,onConfirm:n,onCancel:c,user:d})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity",onClick:c,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-md transform transition-all",role:"dialog",onClick:u=>u.stopPropagation(),children:[s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-primary-100 dark:bg-primary-900/30",children:s.jsx(Xd,{className:"h-6 w-6 text-primary-600 dark:text-primary-400","aria-hidden":"true"})}),s.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:["طباعة تقرير لـ ",r]}),d.role!==ne.Doctor&&s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 px-4",children:"هل ترغب في تضمين الملخص المالي في التقرير؟"})]})}),s.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-2xl flex flex-col sm:flex-row justify-center gap-3",children:[d.role!==ne.Doctor?s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",onClick:()=>n(!0),className:"w-full sm:w-auto inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"نعم، تضمين الملخص"}),s.jsx("button",{type:"button",onClick:()=>n(!1),className:"w-full sm:w-auto inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400",children:"لا، بدون ملخص"})]}):s.jsx("button",{type:"button",onClick:()=>n(!1),className:"w-full sm:w-auto inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"طباعة التقرير"}),s.jsx("button",{type:"button",onClick:c,className:"mt-2 sm:mt-0 w-full sm:w-auto inline-flex justify-center rounded-md px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-white focus:outline-none",children:"إلغاء"})]})]})}),Nh=({user:r,onViewSessions:n,onViewPlan:c,onViewDetails:d,onViewFinancial:u,onViewPhotos:f,onViewActivity:x})=>{const[b,p]=g.useState(!1),[y,k]=g.useState(null),[v,E]=g.useState(null),[S,z]=g.useState(!1),[j,M]=g.useState(""),[D,L]=g.useState(""),[T,C]=g.useState("incomplete_unpaid"),[V,R]=g.useState(1),[$,se]=g.useState(null),[ie,H]=g.useState(null),[P,I]=g.useState(j),{settings:Y}=Gd(),ce=10;g.useEffect(()=>{const re=setTimeout(()=>{I(j),R(1)},300);return()=>clearTimeout(re)},[j]);const{data:pe,isLoading:F}=mh({queryKey:["doctors"],queryFn:()=>ae.doctors.getAll()}),te=pe||[],{data:G,isLoading:oe,refetch:fe}=mh({queryKey:["patients",V,P,D,T,r.id,r.role],queryFn:async()=>{const re={page:V,per_page:ce,search:P};switch(r.role===ne.Doctor?re.doctorId=r.id:D&&(re.doctorId=D),T){case"incomplete_unpaid":re.completed="0",re.payment_completed="0";break;case"complete_unpaid":re.completed="1",re.payment_completed="0";break;case"complete_paid":re.completed="1",re.payment_completed="1";break}return ae.patients.getAll(re)},refetchInterval:6e4,placeholderData:re=>re}),A=(G==null?void 0:G.patients)||[],w=(G==null?void 0:G.total)||0,Z=(G==null?void 0:G.last_page)||1,ee=oe||F,le=re=>{re>=1&&re<=Z&&R(re)},ge=async(re,ot)=>{H(null),se(re.id);const[cr]=await Promise.all([ae.sessions.getAll()]),nl=cr.filter(Je=>Je.patientId===re.id).sort((Je,Ue)=>new Date(Ue.date).getTime()-new Date(Je.date).getTime()),ha=Je=>{var Ue;return((Ue=te.find(xa=>xa.id===Je))==null?void 0:Ue.name)||"غير معروف"},dr=te.filter(Je=>re.doctorIds.includes(Je.id)),Cs=r.role!==ne.Doctor&&ot;let Nn="";const ur=nl.reduce((Je,Ue)=>{const xa=Ue.treatments.reduce((Ds,As)=>Ds+As.sessionPrice+(As.additionalCosts||0),0);return Je+xa},0);if(Cs){const xa=(await ae.payments.getAll({page:1,per_page:9999})).payments.filter(Ot=>Ot.patientId===re.id).sort((Ot,gr)=>new Date(gr.date).getTime()-new Date(Ot.date).getTime()),Ds=xa.reduce((Ot,gr)=>Ot+gr.amount,0),As=ur-Ds;Nn=`
                <section class="mt-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">الملخص المالي</h2>
                     ${xa.length>0?`
                         <div class="mb-4 break-inside-avoid">
                            <h3 class="font-semibold mb-2">الدفعات المسجلة</h3>
                            <table class="w-full text-right text-sm">
                                <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                                    <tr><th class="px-2 py-1">التاريخ</th><th class="px-2 py-1">المبلغ</th></tr>
                                </thead>
                                <tbody>
                                ${xa.map(Ot=>`
                                    <tr class="border-b">
                                        <td class="px-2 py-1">${new Date(Ot.date).toLocaleDateString()}</td>
                                        <td class="px-2 py-1">SYP ${Ot.amount.toFixed(2)}</td>
                                    </tr>
                                `).join("")}
                                </tbody>
                            </table>
                         </div>
                     `:""}
                    <div class="border-t border-gray-300 pt-4 space-y-2 text-md">
                         <div class="flex justify-between"><span class="font-medium text-gray-600">إجمالي التكاليف:</span><span class="font-bold">SYP ${ur.toFixed(2)}</span></div>
                         <div class="flex justify-between"><span class="font-medium text-gray-600">إجمالي المدفوعات:</span><span class="font-bold text-green-600">SYP ${Ds.toFixed(2)}</span></div>
                         <div class="flex justify-between text-lg"><span class="font-bold">الرصيد المتبقي:</span><span class="font-bold">SYP ${As.toFixed(2)}</span></div>
                    </div>
                </section>
            `}const mr=`
            <div class="flex flex-wrap -mx-2 text-sm mb-2">
                <div class="px-2 mb-2">
                    <span class="font-medium text-gray-500">الاسم: </span>
                    <span class="text-gray-900 font-semibold">${re.name}</span>
                </div>
                <div class="px-2 mb-2">
                    <span class="font-medium text-gray-500">الكود: </span>
                    <span class="text-gray-900 font-semibold">${re.code}</span>
                </div>
                <div class="px-2 mb-2">
                    <span class="font-medium text-gray-500">العمر: </span>
                    <span class="text-gray-900 font-semibold">${re.age}</span>
                </div>
                <div class="px-2 mb-2">
                    <span class="font-medium text-gray-500">الهاتف: </span>
                    <span class="text-gray-900 font-semibold">${re.phone}</span>
                </div>
                <div class="px-2 mb-2">
                    <span class="font-medium text-gray-500">الجنس: </span>
                    <span class="text-gray-900 font-semibold">${re.gender==="female"?"أنثى":"ذكر"}</span>
                </div>
                ${re.isSmoker?'<div class="px-2 mb-2"><span class="font-medium text-gray-500">مدخن: </span><span class="text-gray-900 font-semibold">نعم</span></div>':""}
                ${re.gender==="female"&&re.isPregnant?'<div class="px-2 mb-2"><span class="font-medium text-gray-500">حامل: </span><span class="text-gray-900 font-semibold">نعم</span></div>':""}
            </div>
            <dl class="text-sm">
                <div class="py-2 border-t border-gray-200 grid grid-cols-3 gap-4">
                    <dt class="font-medium text-gray-500">الأطباء</dt>
                    <dd class="text-gray-900 sm:mt-0 col-span-2">${dr.map(Je=>Je.name).join(", ")}</dd>
                </div>
                <div class="py-2 border-t border-gray-200 grid grid-cols-3 gap-4">
                    <dt class="font-medium text-gray-500">الحساسية الدوائية</dt>
                    <dd class="text-gray-900 sm:mt-0 col-span-2">${re.drugAllergy||"لا يوجد"}</dd>
                </div>
                <div class="py-2 border-t border-gray-200 grid grid-cols-3 gap-4">
                    <dt class="font-medium text-gray-500">الأمراض المزمنة</dt>
                    <dd class="text-gray-900 sm:mt-0 col-span-2">${re.chronicDiseases||"لا يوجد"}</dd>
                </div>
                <div class="py-2 border-t border-gray-200 grid grid-cols-3 gap-4">
                    <dt class="font-medium text-gray-500">ملاحظات عامة</dt>
                    <dd class="text-gray-900 sm:mt-0 col-span-2">${re.notes||"لا يوجد"}</dd>
                </div>
            </dl>
        `,fr=nl.length>0?`
            <section class="mt-8">
                <h2 class="text-xl font-bold text-gray-800 mb-4">سجل الجلسات</h2>
                <div class="space-y-4">
                    ${nl.map(Je=>`
                        <div class="border border-gray-200 rounded-lg p-4 break-inside-avoid">
                            <h3 class="font-semibold">${Je.title||`جلسة بتاريخ ${new Date(Je.date).toLocaleDateString()}`} - الطبيب: ${ha(Je.doctorId)}</h3>
                            ${Je.notes?`<p class="text-sm text-gray-600 mt-1">ملاحظات الجلسة: ${Je.notes}</p>`:""}
                            ${Je.treatments.length>0?`
                                 <table class="w-full text-right text-sm mt-2">
                                    <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                                        <tr>
                                            <th class="px-2 py-1">العلاج</th>
                                            <th class="px-2 py-1">التاريخ</th>
                                            ${Cs?'<th class="px-2 py-1">السعر</th>':""}
                                            <th class="px-2 py-1">ملاحظات</th>
                                            <th class="px-2 py-1">مكتمل</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    ${Je.treatments.map(Ue=>`
                                        <tr class="border-b">
                                            <td class="px-2 py-1">${Ue.name}</td>
                                            <td class="px-2 py-1">${Ue.treatmentDate?new Date(Ue.treatmentDate).toLocaleDateString():"-"}</td>
                                            ${Cs?`<td class="px-2 py-1">SYP ${(Ue.sessionPrice+(Ue.additionalCosts||0)).toFixed(2)}</td>`:""}
                                            <td class="px-2 py-1">${Ue.sessionNotes||"-"}</td>
                                            <td class="px-2 py-1">${Ue.completed?"نعم":"لا"}</td>
                                        </tr>
                                    `).join("")}
                                    </tbody>
                                 </table>
                            `:'<p class="text-sm text-gray-500 mt-2">لا توجد علاجات لهذه الجلسة.</p>'}
                        </div>
                    `).join("")}
                </div>
            </section>
        `:"",hr=`
          <!DOCTYPE html>
          <html lang="ar" dir="rtl">
            <head>
              <meta charset="UTF-8" />
              <title>تقرير - ${re.name}</title>
              <script src="https://cdn.tailwindcss.com"><\/script>
              <script>
                tailwind.config = {
                  theme: {
                    extend: {
                      colors: {
                        primary: {
                          DEFAULT: '#06b6d4', '50': '#ecfeff', '100': '#cffafe', '200': '#a5f3fd',
                          '300': '#67e8f9', '400': '#22d3ee', '500': '#06b6d4', '600': '#0891b2',
                          '700': '#0e7490', '800': '#155e75', '900': '#164e63', '950': '#083344',
                        },
                      }
                    }
                  }
                }
              <\/script>
              <style>
                @media print {
                  @page { size: A4; margin: 20mm; }
                  body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
                  .no-print { display: none !important; }
                }
                body { font-family: sans-serif; }
              </style>
            </head>
            <body class="bg-white">
              <div id="printable-report" class="p-6 md:p-8">
                <header class="flex justify-between items-start border-b border-gray-300 pb-4 mb-6">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-800">${Y.appName}</h1>
                        <p class="text-gray-500">تقرير المريض</p>
                    </div>
                     <img src="${Y.appLogo}" alt="شعار التطبيق" class="h-16 w-16" />
                </header>
                <section>
                    <h2 class="text-xl font-bold text-gray-800 mb-2">معلومات المريض</h2>
                    ${mr}
                </section>
                ${fr}
                ${Nn}
                <footer class="text-center text-xs text-gray-400 mt-8 pt-4 border-t border-gray-300">
                    تاريخ الطباعة: ${new Date().toLocaleString()}
                </footer>
              </div>
            </body>
          </html>
        `,ga=window.open("","_blank");ga&&(ga.document.open(),ga.document.write(hr),ga.document.close(),ga.onload=()=>{ga.focus(),ga.print()}),se(null)},be=async re=>{await ae.patients.create(re,r.id),p(!1),R(1),fe()},Ie=async re=>{await ae.patients.update(re.id,re,r.id),k(null),fe()},Qe=async()=>{if(v){z(!0);try{await ae.patients.delete(v.id,r.id),E(null),fe()}catch(re){alert(`فشل في حذف المريض: ${re instanceof Error?re.message:"خطأ غير معروف"}`)}finally{z(!1)}}};return s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:s.jsx(ks,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),s.jsx("input",{type:"text",value:j,onChange:re=>M(re.target.value),placeholder:"ابحث بالاسم، الكود، أو الهاتف...",className:"w-full sm:w-64 pl-3 pr-10 py-2 bg-white dark:bg-gray-700 text-black dark:text-white border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary"})]}),r.role!==ne.Doctor&&s.jsx("div",{className:"relative",children:s.jsxs("select",{value:D,onChange:re=>{L(re.target.value),R(1)},className:"w-full sm:w-48 px-3 py-2 pr-8 bg-white dark:bg-gray-700 text-black dark:text-white border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary appearance-none","aria-label":"Filter by doctor",children:[s.jsx("option",{value:"",children:"كل الأطباء"}),te.map(re=>s.jsx("option",{value:re.id,children:re.name},re.id))]})}),s.jsx("div",{className:"relative",children:s.jsxs("select",{value:T,onChange:re=>{C(re.target.value),R(1)},className:"w-full sm:w-48 px-3 py-2 pr-8 bg-white dark:bg-gray-700 text-black dark:text-white border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary appearance-none","aria-label":"تصفية حسب الحالة",children:[s.jsx("option",{value:"all",children:"كل الحالات"}),s.jsx("option",{value:"incomplete_unpaid",children:"غير مكتمل وغير مسدد"}),s.jsx("option",{value:"complete_unpaid",children:"مكتمل وغير مسدد"}),s.jsx("option",{value:"complete_paid",children:"مكتمل ومسدد"})]})}),(r.role===ne.Admin||r.role===ne.SubManager||r.role===ne.Secretary||r.role===ne.Doctor)&&s.jsxs("button",{onClick:()=>p(!0),className:"hidden lg:flex items-center bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-primary-700 transition-colors",children:[s.jsx(Ve,{className:"h-5 w-5 ml-2"}),"إضافة مريض"]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md min-h-[200px]",children:ee?s.jsx(st,{}):A.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:A.map(re=>s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 flex flex-col justify-between transition-shadow hover:shadow-lg",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:re.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[re.completed&&s.jsx("div",{className:"p-1 bg-green-100 dark:bg-green-900/40 rounded-full",title:"جميع الجلسات مكتملة",children:s.jsx(Ii,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),re.payment_completed&&s.jsx("div",{className:"p-1 bg-blue-100 dark:bg-blue-900/40 rounded-full",title:"مدفوع بالكامل",children:s.jsx(Ns,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),s.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded-full",children:re.code})]})]}),s.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-300",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"العمر:"})," ",re.age]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"الهاتف:"})," ",re.phone]})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>k(re),className:"p-2 rounded-full text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/40",title:"تعديل",children:s.jsx(_t,{className:"h-5 w-5"})}),(r.role===ne.Admin||r.role===ne.SubManager)&&s.jsx("button",{onClick:()=>E(re),className:"p-2 rounded-full text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40",title:"حذف",children:s.jsx(Ze,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>d(re),className:"p-2 rounded-full text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600",title:"تفاصيل",children:s.jsx($i,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"flex items-center flex-wrap justify-end gap-2",children:[s.jsxs("button",{onClick:()=>n(re),className:"flex items-center gap-1 text-xs px-2 py-1 bg-teal-100 dark:bg-teal-900/40 text-teal-800 dark:text-teal-300 rounded-md hover:bg-teal-200 dark:hover:bg-teal-900/60",children:[s.jsx(gn,{className:"h-4 w-4"}),s.jsx("span",{children:"الجلسات"})]}),s.jsxs("button",{onClick:()=>u(re),className:"flex items-center gap-1 text-xs px-2 py-1 bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300 rounded-md hover:bg-green-200 dark:hover:bg-green-900/60",children:[s.jsx(Ns,{className:"h-4 w-4"}),s.jsx("span",{children:"المالية"})]}),s.jsxs("button",{onClick:()=>f(re),className:"flex items-center gap-1 text-xs px-2 py-1 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300 rounded-md hover:bg-purple-200 dark:hover:bg-purple-900/60",children:[s.jsx(Ji,{className:"h-4 w-4"}),s.jsx("span",{children:"الصور"})]}),s.jsxs("button",{onClick:()=>c(re),className:"flex items-center gap-1 text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300 rounded-md hover:bg-blue-200 dark:hover:bg-blue-900/60",children:[s.jsx(rr,{className:"h-4 w-4"}),s.jsx("span",{children:"الخطة"})]}),(r.role===ne.Admin||r.role===ne.SubManager)&&s.jsxs("button",{onClick:()=>x(re),className:"flex items-center gap-1 text-xs px-2 py-1 bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 rounded-md hover:bg-yellow-200 dark:hover:bg-yellow-900/60",children:[s.jsx(rr,{className:"h-4 w-4"}),s.jsx("span",{children:"السجل"})]}),s.jsxs("button",{onClick:()=>H(re),className:"flex items-center gap-1 text-xs px-2 py-1 bg-gray-100 dark:bg-gray-900/40 text-gray-800 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-900/60",children:[$===re.id?s.jsx(or,{className:"h-4 w-4"}):s.jsx(Xd,{className:"h-4 w-4"}),s.jsx("span",{children:"طباعة"})]})]})]})})]},re.id))}),s.jsxs("div",{className:"mt-8 flex justify-between items-center flex-wrap gap-4",children:[s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["عرض ",A.length," من أصل ",w," مرضى"]}),s.jsx(rb,{currentPage:V,totalPages:Z,onPageChange:le})]})]}):s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-16",children:"لم يتم العثور على مرضى."})}),(r.role===ne.Admin||r.role===ne.SubManager||r.role===ne.Secretary||r.role===ne.Doctor)&&s.jsx("button",{onClick:()=>p(!0),className:"lg:hidden fixed bottom-20 right-4 bg-primary text-white p-4 rounded-full shadow-lg hover:bg-primary-700 transition-colors z-20","aria-label":"إضافة مريض",children:s.jsx(Ve,{className:"h-6 w-6"})}),b&&s.jsx(sb,{onSave:be,onClose:()=>p(!1),doctors:te,user:r}),y&&s.jsx(lb,{patient:y,onSave:Ie,onClose:()=>k(null),doctors:te,user:r}),v&&s.jsx(ab,{title:"حذف المريض",message:`هل أنت متأكد من رغبتك في حذف المريض ${v.name}؟ لا يمكن التراجع عن هذا الإجراء.`,onConfirm:Qe,onCancel:()=>!S&&E(null),isDeleting:S}),ie&&s.jsx(nb,{patientName:ie.name,onConfirm:re=>ge(ie,re),onCancel:()=>H(null),user:r})]})},ib=({onConfirm:r,onCancel:n,doctorToDelete:c,otherDoctors:d,targetDoctorId:u,setTargetDoctorId:f,isDeleting:x})=>{const b=d.length>0;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-md transform transition-all",role:"dialog",onClick:p=>p.stopPropagation(),children:[s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30",children:s.jsx(Ze,{className:"h-6 w-6 text-red-600 dark:text-red-400","aria-hidden":"true"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:"حذف الطبيب"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 px-4",children:b?`لحذف الطبيب ${c.name}، يجب أولاً نقل مرضاه إلى طبيب آخر.`:`هل أنت متأكد من رغبتك في حذف الطبيب ${c.name}؟ لا يمكن التراجع عن هذا الإجراء.`})]}),b&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{htmlFor:"targetDoctor",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"نقل المرضى إلى"}),s.jsx("select",{id:"targetDoctor",value:u,onChange:p=>f(p.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:d.map(p=>s.jsx("option",{value:p.id,children:p.name},p.id))})]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-2xl flex justify-center gap-4",children:[s.jsx("button",{type:"button",onClick:r,disabled:x,className:"w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-400 disabled:cursor-not-allowed",children:x?"جاري الحذف...":b?"تأكيد النقل والحذف":"نعم، قم بالحذف"}),s.jsx("button",{type:"button",onClick:n,disabled:x,className:"w-full rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"إلغاء"})]})]})})},ob=({onSave:r,onClose:n})=>{const[c,d]=g.useState({name:"",email:"",password:"",specialty:"",is_diagnosis_doctor:!1}),[u,f]=g.useState(!1),[x,b]=g.useState({}),[p,y]=g.useState({email:"",password:""}),k=z=>{const{name:j,value:M,type:D,checked:L}=z.target;d(T=>({...T,[j]:D==="checkbox"?L:M})),x[j]&&b(T=>{const C={...T};return delete C[j],C}),p[j]&&y(T=>({...T,[j]:""}))},v=()=>{const z={email:"",password:""};return/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(c.email)||(z.email="الرجاء إدخال بريد إلكتروني صحيح."),c.password?c.password.length<6&&(z.password="يجب أن تكون كلمة المرور 6 أحرف على الأقل."):z.password="كلمة المرور مطلوبة.",y(z),!z.email&&!z.password},E=async z=>{if(z.preventDefault(),!!v()){f(!0),b({});try{await r(c)}catch(j){f(!1),j instanceof rl&&j.errors?b(j.errors):alert(`فشل في إنشاء الطبيب: ${j instanceof Error?j.message:"خطأ غير معروف"}`)}}},S="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white";return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:z=>z.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"إضافة طبيب جديد"}),s.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:E,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nameAdd",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الاسم"}),s.jsx("input",{type:"text",id:"nameAdd",name:"name",value:c.name,onChange:k,required:!0,className:S})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"specialtyAdd",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"التخصص"}),s.jsx("input",{type:"text",id:"specialtyAdd",name:"specialty",value:c.specialty,onChange:k,required:!0,className:S})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"emailAdd",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"البريد الإلكتروني"}),s.jsx("input",{type:"email",id:"emailAdd",name:"email",value:c.email,onChange:k,required:!0,className:S}),x.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:"هذا الايميل موجود بالفعل"}),p.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"passwordAdd",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"كلمة المرور"}),s.jsx("input",{type:"password",id:"passwordAdd",name:"password",value:c.password,onChange:k,required:!0,className:S}),p.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p.password})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-3 rtl:space-x-reverse cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"is_diagnosis_doctor",checked:c.is_diagnosis_doctor,onChange:k,className:"h-4 w-4 text-primary rounded border-gray-300 dark:border-gray-500 focus:ring-primary"}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"طبيب تشخيص"})]})})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:u?"جاري الحفظ...":"حفظ"})]})]})]})})},cb=({doctor:r,onSave:n,onClose:c})=>{const[d,u]=g.useState({name:r.name,email:r.email,password:"",specialty:r.specialty||"",is_diagnosis_doctor:r.is_diagnosis_doctor||!1}),[f,x]=g.useState(!1),[b,p]=g.useState({}),[y,k]=g.useState({email:"",password:""}),v=j=>{const{name:M,value:D,type:L,checked:T}=j.target;u(C=>({...C,[M]:L==="checkbox"?T:D})),b[M]&&p(C=>{const V={...C};return delete V[M],V}),y[M]&&k(C=>({...C,[M]:""}))},E=()=>{const j={email:"",password:""};return/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(d.email)||(j.email="الرجاء إدخال بريد إلكتروني صحيح."),d.password&&d.password.length<6&&(j.password="يجب أن تكون كلمة المرور 6 أحرف على الأقل."),k(j),!j.email&&!j.password},S=async j=>{if(j.preventDefault(),!!E()){x(!0),p({});try{const M={name:d.name,email:d.email,specialty:d.specialty,is_diagnosis_doctor:d.is_diagnosis_doctor};d.password&&(M.password=d.password),await n({...r,...M})}catch(M){x(!1),M instanceof rl&&M.errors?p(M.errors):alert(`فشل في تعديل الطبيب: ${M instanceof Error?M.message:"خطأ غير معروف"}`)}}},z="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white";return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:c,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:j=>j.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"تعديل بيانات الطبيب"}),s.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:S,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nameEdit",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الاسم"}),s.jsx("input",{type:"text",id:"nameEdit",name:"name",value:d.name,onChange:v,required:!0,className:z})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"specialtyEdit",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"التخصص"}),s.jsx("input",{type:"text",id:"specialtyEdit",name:"specialty",value:d.specialty,onChange:v,required:!0,className:z})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"emailEdit",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"البريد الإلكتروني"}),s.jsx("input",{type:"email",id:"emailEdit",name:"email",value:d.email,onChange:v,required:!0,className:z}),b.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:"هذا الايميل موجود بالفعل"}),y.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"passwordEdit",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"كلمة المرور (اتركها فارغة لعدم التغيير)"}),s.jsx("input",{type:"password",id:"passwordEdit",name:"password",value:d.password,onChange:v,className:z}),y.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.password})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-3 rtl:space-x-reverse cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"is_diagnosis_doctor",checked:d.is_diagnosis_doctor,onChange:v,className:"h-4 w-4 text-primary rounded border-gray-300 dark:border-gray-500 focus:ring-primary"}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"طبيب تشخيص"})]})})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:f?"جاري الحفظ...":"حفظ"})]})]})]})})},Sh=({refreshTrigger:r})=>{const[n,c]=g.useState([]),[d,u]=g.useState(!0),[f,x]=g.useState(null),[b,p]=g.useState(!1),[y,k]=g.useState(null),[v,E]=g.useState(null),[S,z]=g.useState(!1),[j,M]=g.useState(""),D=g.useCallback(async()=>{u(!0),x(null);try{const R=await ae.doctors.getAll();c(R)}catch(R){R instanceof Error&&R.message.includes("Failed to fetch")?x("فشل جلب البيانات الرجاء التأكد من اتصالك بالانترنت واعادة تحميل البيانات"):(x("حدث خطأ غير متوقع."),console.error("Failed to fetch doctors:",R))}finally{u(!1)}},[]);g.useEffect(()=>{D()},[D,r]);const L=async R=>{try{await ae.doctors.create({...R,role:ne.Doctor}),p(!1),await D()}catch($){throw console.error("Failed to create doctor:",$),$}},T=async R=>{try{await ae.doctors.update(R.id,R),k(null),await D()}catch($){throw console.error("Failed to update doctor:",$),$}},C=R=>{const $=n.filter(se=>se.id!==R.id);$.length>0?M($[0].id):M(""),E(R)},V=async()=>{if(v){z(!0);try{if(n.filter($=>$.id!==v.id).length>0&&!j){alert("يرجى تحديد طبيب لنقل المرضى إليه."),z(!1);return}await ae.doctors.delete(v.id,j||void 0),E(null),await D()}catch(R){alert(`فشل حذف الطبيب: ${R instanceof Error?R.message:"خطأ غير معروف"}`)}finally{z(!1)}}};return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"قائمة الأطباء"}),s.jsxs("button",{onClick:()=>p(!0),className:"hidden lg:flex items-center bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-primary-700 transition-colors",children:[s.jsx(Ve,{className:"h-5 w-5 ml-2"}),"إضافة طبيب"]})]}),s.jsx("div",{className:"min-h-[200px]",children:d?s.jsx(st,{}):f?s.jsx("div",{className:"text-center py-16 text-red-500 dark:text-red-400",children:s.jsx("p",{children:f})}):n.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(R=>s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 flex flex-col justify-between transition-shadow hover:shadow-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:R.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("p",{className:"text-primary dark:text-primary-300 font-semibold",children:R.specialty}),R.is_diagnosis_doctor&&s.jsx("span",{className:"px-2 py-0.5 bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-300 text-xs font-bold rounded-full",children:"طبيب تشخيص"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2 text-sm",children:R.email})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600 flex flex-wrap items-center justify-end gap-x-2 gap-y-1",children:[s.jsxs("button",{onClick:()=>k(R),className:"flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 p-1 rounded hover:bg-blue-100 dark:hover:bg-blue-900/40 text-sm",children:[s.jsx(_t,{className:"h-4 w-4"}),s.jsx("span",{className:"mr-1",children:"تعديل"})]}),s.jsxs("button",{onClick:()=>C(R),className:"flex items-center text-red-600 dark:text-red-400 hover:text-red-800 p-1 rounded hover:bg-red-100 dark:hover:bg-red-900/40 text-sm",children:[s.jsx(Ze,{className:"h-4 w-4"}),s.jsx("span",{className:"mr-1",children:"حذف"})]})]})]},R.id))}):s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"لم يتم العثور على أطباء."})}),s.jsx("button",{onClick:()=>p(!0),className:"lg:hidden fixed bottom-20 right-4 bg-primary text-white p-4 rounded-full shadow-lg hover:bg-primary-700 transition-colors z-20","aria-label":"إضافة طبيب",children:s.jsx(Ve,{className:"h-6 w-6"})}),b&&s.jsx(ob,{onClose:()=>p(!1),onSave:L}),y&&s.jsx(cb,{doctor:y,onClose:()=>k(null),onSave:T}),v&&s.jsx(ib,{doctorToDelete:v,otherDoctors:n.filter(R=>R.id!==v.id),targetDoctorId:j,setTargetDoctorId:M,onConfirm:V,onCancel:()=>!S&&E(null),isDeleting:S})]})},db=({onConfirm:r,onCancel:n,title:c,message:d,isDeleting:u})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-sm transform transition-all",role:"dialog",onClick:f=>f.stopPropagation(),children:[s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30",children:s.jsx(Ze,{className:"h-6 w-6 text-red-600 dark:text-red-400","aria-hidden":"true"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:c}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 px-4",children:d})]})}),s.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-2xl flex justify-center gap-4",children:[s.jsx("button",{type:"button",onClick:r,disabled:u,className:"w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-400 disabled:cursor-not-allowed",children:u?"جاري الحذف...":"نعم، قم بالحذف"}),s.jsx("button",{type:"button",onClick:n,disabled:u,className:"w-full rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"إلغاء"})]})]})}),ub=({onSave:r,onClose:n})=>{const[c,d]=g.useState({name:"",email:"",password:""}),[u,f]=g.useState(!1),[x,b]=g.useState({}),[p,y]=g.useState({email:"",password:""}),k=z=>{const{name:j,value:M}=z.target;d(D=>({...D,[j]:M})),x[j]&&b(D=>{const L={...D};return delete L[j],L}),p[j]&&y(D=>({...D,[j]:""}))},v=()=>{const z={email:"",password:""};return/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(c.email)||(z.email="الرجاء إدخال بريد إلكتروني صحيح."),c.password?c.password.length<6&&(z.password="يجب أن تكون كلمة المرور 6 أحرف على الأقل."):z.password="كلمة المرور مطلوبة.",y(z),!z.email&&!z.password},E=async z=>{if(z.preventDefault(),!!v()){f(!0),b({});try{await r(c)}catch(j){f(!1),j instanceof rl&&j.errors?b(j.errors):alert(`فشل في إنشاء السكرتير: ${j instanceof Error?j.message:"خطأ غير معروف"}`)}}},S="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white";return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:z=>z.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"إضافة سكرتير جديد"}),s.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:E,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nameAdd",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الاسم"}),s.jsx("input",{type:"text",id:"nameAdd",name:"name",value:c.name,onChange:k,required:!0,className:S})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"emailAdd",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"البريد الإلكتروني"}),s.jsx("input",{type:"email",id:"emailAdd",name:"email",value:c.email,onChange:k,required:!0,className:S}),x.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:"هذا الايميل موجود بالفعل"}),p.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"passwordAdd",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"كلمة المرور"}),s.jsx("input",{type:"password",id:"passwordAdd",name:"password",value:c.password,onChange:k,required:!0,className:S}),p.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p.password})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:u?"جاري الحفظ...":"حفظ"})]})]})]})})},mb=({secretary:r,onSave:n,onClose:c})=>{const[d,u]=g.useState({name:r.name,email:r.email,password:""}),[f,x]=g.useState(!1),[b,p]=g.useState({}),[y,k]=g.useState({email:"",password:""}),v=j=>{const{name:M,value:D}=j.target;u(L=>({...L,[M]:D})),b[M]&&p(L=>{const T={...L};return delete T[M],T}),y[M]&&k(L=>({...L,[M]:""}))},E=()=>{const j={email:"",password:""};return/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(d.email)||(j.email="الرجاء إدخال بريد إلكتروني صحيح."),d.password&&d.password.length<6&&(j.password="يجب أن تكون كلمة المرور 6 أحرف على الأقل."),k(j),!j.email&&!j.password},S=async j=>{if(j.preventDefault(),!!E()){x(!0),p({});try{const M={name:d.name,email:d.email};d.password&&(M.password=d.password),await n({...r,...M})}catch(M){x(!1),M instanceof rl&&M.errors?p(M.errors):alert(`فشل في تعديل السكرتير: ${M instanceof Error?M.message:"خطأ غير معروف"}`)}}},z="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white";return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:c,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:j=>j.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"تعديل بيانات السكرتير"}),s.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:S,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nameEdit",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الاسم"}),s.jsx("input",{type:"text",id:"nameEdit",name:"name",value:d.name,onChange:v,required:!0,className:z})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"emailEdit",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"البريد الإلكتروني"}),s.jsx("input",{type:"email",id:"emailEdit",name:"email",value:d.email,onChange:v,required:!0,className:z}),b.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:"هذا الايميل موجود بالفعل"}),y.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"passwordEdit",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"كلمة المرور (اتركها فارغة لعدم التغيير)"}),s.jsx("input",{type:"password",id:"passwordEdit",name:"password",value:d.password,onChange:v,className:z}),y.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.password})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:f?"جاري الحفظ...":"حفظ"})]})]})]})})},fb=({refreshTrigger:r})=>{const[n,c]=g.useState([]),[d,u]=g.useState(!0),[f,x]=g.useState(null),[b,p]=g.useState(!1),[y,k]=g.useState(null),[v,E]=g.useState(null),[S,z]=g.useState(!1),j=g.useCallback(async()=>{u(!0),x(null);try{const T=await ae.secretaries.getAll();c(T)}catch(T){T instanceof Error&&T.message.includes("Failed to fetch")?x("فشل جلب البيانات الرجاء التأكد من اتصالك بالانترنت واعادة تحميل البيانات"):(x("حدث خطأ غير متوقع."),console.error("Failed to fetch secretaries:",T))}finally{u(!1)}},[]);g.useEffect(()=>{j()},[j,r]);const M=async T=>{try{await ae.secretaries.create({...T,role:ne.Secretary}),p(!1),await j()}catch(C){throw console.error("Failed to create secretary:",C),C}},D=async T=>{try{await ae.secretaries.update(T.id,T),k(null),await j()}catch(C){throw console.error("Failed to update secretary:",C),C}},L=async()=>{if(v){z(!0);try{await ae.secretaries.delete(v.id),E(null),await j()}catch(T){alert(`فشل حذف السكرتير: ${T instanceof Error?T.message:"خطأ غير معروف"}`)}finally{z(!1)}}};return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"قائمة السكرتارية"}),s.jsxs("button",{onClick:()=>p(!0),className:"hidden lg:flex items-center bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-primary-700 transition-colors",children:[s.jsx(Ve,{className:"h-5 w-5 ml-2"}),"إضافة سكرتير"]})]}),s.jsx("div",{className:"min-h-[200px]",children:d?s.jsx(st,{}):f?s.jsx("div",{className:"text-center py-16 text-red-500 dark:text-red-400",children:s.jsx("p",{children:f})}):n.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(T=>s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 flex flex-col justify-between transition-shadow hover:shadow-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:T.name}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1 text-sm",children:T.email})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600 flex items-center justify-end space-x-2",children:[s.jsxs("button",{onClick:()=>k(T),className:"flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 p-1 rounded hover:bg-blue-100 dark:hover:bg-blue-900/40 text-sm",children:[s.jsx(_t,{className:"h-4 w-4"}),s.jsx("span",{className:"mr-1",children:"تعديل"})]}),s.jsxs("button",{onClick:()=>E(T),className:"flex items-center text-red-600 dark:text-red-400 hover:text-red-800 p-1 rounded hover:bg-red-100 dark:hover:bg-red-900/40 text-sm",children:[s.jsx(Ze,{className:"h-4 w-4"}),s.jsx("span",{className:"mr-1",children:"حذف"})]})]})]},T.id))}):s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"لم يتم العثور على سكرتارية."})}),s.jsx("button",{onClick:()=>p(!0),className:"lg:hidden fixed bottom-20 right-4 bg-primary text-white p-4 rounded-full shadow-lg hover:bg-primary-700 transition-colors z-20","aria-label":"إضافة سكرتير",children:s.jsx(Ve,{className:"h-6 w-6"})}),b&&s.jsx(ub,{onClose:()=>p(!1),onSave:M}),y&&s.jsx(mb,{secretary:y,onClose:()=>k(null),onSave:D}),v&&s.jsx(db,{title:"حذف سكرتير",message:`هل أنت متأكد من رغبتك في حذف ${v.name}؟ لا يمكن التراجع عن هذا الإجراء.`,onConfirm:L,onCancel:()=>!S&&E(null),isDeleting:S})]})},hb=({onConfirm:r,onCancel:n,title:c,message:d,isDeleting:u})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-sm transform transition-all",role:"dialog",onClick:f=>f.stopPropagation(),children:[s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30",children:s.jsx(Ze,{className:"h-6 w-6 text-red-600 dark:text-red-400","aria-hidden":"true"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:c}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 px-4",children:d})]})}),s.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-2xl flex justify-center gap-4",children:[s.jsx("button",{type:"button",onClick:r,disabled:u,className:"w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-400 disabled:cursor-not-allowed",children:u?"جاري الحذف...":"نعم، قم بالحذف"}),s.jsx("button",{type:"button",onClick:n,disabled:u,className:"w-full rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"إلغاء"})]})]})}),gb=({subManager:r,onSave:n,onClose:c})=>{const d=!!r,[u,f]=g.useState({name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||"",password:""}),[x,b]=g.useState(!1),[p,y]=g.useState({}),[k,v]=g.useState({email:"",password:""}),E=M=>{const{name:D,value:L}=M.target;f(T=>({...T,[D]:L})),p[D]&&y(T=>{const C={...T};return delete C[D],C}),k[D]&&v(T=>({...T,[D]:""}))},S=()=>{const M={email:"",password:""};return/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(u.email)||(M.email="الرجاء إدخال بريد إلكتروني صحيح."),d?u.password&&u.password.length<6&&(M.password="يجب أن تكون كلمة المرور 6 أحرف على الأقل."):u.password?u.password.length<6&&(M.password="يجب أن تكون كلمة المرور 6 أحرف على الأقل."):M.password="كلمة المرور مطلوبة.",v(M),!M.email&&!M.password},z=async M=>{if(M.preventDefault(),!!S()){b(!0),y({});try{const D={name:u.name,email:u.email};u.password&&(D.password=u.password);const L=d?{...r,...D}:u;await n(L)}catch(D){b(!1),D instanceof rl&&D.errors?y(D.errors):alert(`فشل الحفظ: ${D instanceof Error?D.message:"خطأ غير معروف"}`)}}},j="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white";return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:c,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:M=>M.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:d?"تعديل مدير فرعي":"إضافة مدير فرعي جديد"}),s.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:z,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الاسم"}),s.jsx("input",{type:"text",id:"name",name:"name",value:u.name,onChange:E,required:!0,className:j})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"البريد الإلكتروني"}),s.jsx("input",{type:"email",id:"email",name:"email",value:u.email,onChange:E,required:!0,className:j}),p.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:"هذا الايميل موجود بالفعل"}),k.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:k.email})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["كلمة المرور ",d&&"(اتركها فارغة لعدم التغيير)"]}),s.jsx("input",{type:"password",id:"password",name:"password",value:u.password,onChange:E,required:!d,className:j}),k.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:k.password})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:x?"جاري الحفظ...":"حفظ"})]})]})]})})},xb=({refreshTrigger:r})=>{const{user:n}=ir(),[c,d]=g.useState([]),[u,f]=g.useState([]),[x,b]=g.useState(!0),[p,y]=g.useState(null),[k,v]=g.useState(!1),[E,S]=g.useState(null),[z,j]=g.useState(null),[M,D]=g.useState(!1),L=g.useCallback(async()=>{b(!0),y(null);try{const[V,R]=await Promise.all([ae.admins.getAll(),ae.subManagers.getAll()]);d(V),f(R)}catch(V){V instanceof Error&&V.message.includes("Failed to fetch")?y("فشل جلب البيانات الرجاء التأكد من اتصالك بالانترنت واعادة تحميل البيانات"):(y("حدث خطأ غير متوقع."),console.error("Failed to fetch admins:",V))}finally{b(!1)}},[]);g.useEffect(()=>{L()},[L,r]);const T=async V=>{try{"id"in V?await ae.subManagers.update(V.id,V):await ae.subManagers.create({...V,role:ne.SubManager}),v(!1),S(null),await L()}catch(R){throw console.error("Failed to save sub-manager:",R),R}},C=async()=>{if(z){D(!0);try{await ae.subManagers.delete(z.id),j(null),await L()}catch(V){alert(`فشل حذف المدير الفرعي: ${V instanceof Error?V.message:"خطأ غير معروف"}`)}finally{D(!1)}}};return s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"المدراء الأساسيون"}),s.jsx("div",{className:"min-h-[100px] mb-8",children:x?s.jsx(st,{}):p?s.jsx("div",{className:"text-center py-8 text-red-500 dark:text-red-400",children:s.jsx("p",{children:p})}):c.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:c.map(V=>s.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 transition-shadow",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:V.name}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1 text-sm",children:V.email})]},V.id))}):s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"لم يتم العثور على مدراء."})}),s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"المدراء الفرعيون"}),s.jsxs("button",{onClick:()=>v(!0),className:"hidden lg:flex items-center bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-primary-700 transition-colors",children:[s.jsx(Ve,{className:"h-5 w-5 ml-2"}),"إضافة مدير فرعي"]})]}),s.jsx("div",{className:"min-h-[200px]",children:x?s.jsx(st,{}):u.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:u.map(V=>s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 flex flex-col justify-between transition-shadow hover:shadow-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:V.name}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1 text-sm",children:V.email})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600 flex items-center justify-end space-x-2",children:[s.jsxs("button",{onClick:()=>S(V),className:"flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 p-1 rounded hover:bg-blue-100 dark:hover:bg-blue-900/40 text-sm",children:[s.jsx(_t,{className:"h-4 w-4"}),s.jsx("span",{className:"mr-1",children:"تعديل"})]}),V.id!==(n==null?void 0:n.id)&&s.jsxs("button",{onClick:()=>j(V),className:"flex items-center text-red-600 dark:text-red-400 hover:text-red-800 p-1 rounded hover:bg-red-100 dark:hover:bg-red-900/40 text-sm",children:[s.jsx(Ze,{className:"h-4 w-4"}),s.jsx("span",{className:"mr-1",children:"حذف"})]})]})]},V.id))}):s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"لم يتم العثور على مدراء فرعيين."})}),s.jsx("button",{onClick:()=>v(!0),className:"lg:hidden fixed bottom-20 right-4 bg-primary text-white p-4 rounded-full shadow-lg hover:bg-primary-700 transition-colors z-20","aria-label":"إضافة مدير فرعي",children:s.jsx(Ve,{className:"h-6 w-6"})}),(k||E)&&s.jsx(gb,{subManager:E||void 0,onClose:()=>{v(!1),S(null)},onSave:T},(E==null?void 0:E.id)||"add"),z&&s.jsx(hb,{title:"حذف مدير فرعي",message:`هل أنت متأكد من رغبتك في حذف ${z.name}؟ لا يمكن التراجع عن هذا الإجراء.`,onConfirm:C,onCancel:()=>!M&&j(null),isDeleting:M})]})},yb=({refreshTrigger:r})=>{const[n,c]=g.useState("doctors"),{user:d}=ir(),u=()=>{switch(n){case"doctors":return s.jsx(Sh,{refreshTrigger:r});case"secretaries":return s.jsx(fb,{refreshTrigger:r});case"admins":return s.jsx(xb,{refreshTrigger:r});default:return s.jsx(Sh,{refreshTrigger:r})}},f=({tabName:x,label:b,icon:p})=>s.jsxs("button",{onClick:()=>c(x),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 text-sm font-semibold border-b-2 transition-colors ${n===x?"border-primary text-primary":"border-transparent text-gray-500 hover:text-primary dark:text-gray-400 dark:hover:text-primary-300"}`,children:[s.jsx(p,{className:"h-5 w-5"}),s.jsx("span",{children:b})]});return s.jsx("div",{children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[s.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[s.jsx(f,{tabName:"doctors",label:"الأطباء",icon:js}),s.jsx(f,{tabName:"secretaries",label:"السكرتارية",icon:lr}),d&&d.role===ne.Admin&&s.jsx(f,{tabName:"admins",label:"المدراء",icon:lr})]}),s.jsx("div",{children:u()})]})})},pb=({currentPage:r,totalPages:n,onPageChange:c})=>n<=1?null:s.jsxs("nav",{className:"flex items-center justify-center mt-8","aria-label":"Pagination",children:[s.jsx("button",{onClick:()=>c(r-1),disabled:r===1,className:"px-4 py-2 mx-1 leading-tight text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"السابق"}),s.jsx("div",{className:"flex items-center mx-4",children:s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-400",children:["صفحة ",s.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:r})," من ",s.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:n})]})}),s.jsx("button",{onClick:()=>c(r+1),disabled:r===n,className:"px-4 py-2 mx-1 leading-tight text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"التالي"})]}),bb=({onConfirm:r,onCancel:n,title:c,message:d,isDeleting:u})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-sm transform transition-all",role:"dialog",onClick:f=>f.stopPropagation(),children:[s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30",children:s.jsx(Ze,{className:"h-6 w-6 text-red-600 dark:text-red-400","aria-hidden":"true"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:c}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 px-4",children:d})]})}),s.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-2xl flex justify-center gap-4",children:[s.jsx("button",{type:"button",onClick:r,disabled:u,className:"w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-400 disabled:cursor-not-allowed",children:u?"جاري الحذف...":"نعم، قم بالحذف"}),s.jsx("button",{type:"button",onClick:n,disabled:u,className:"w-full rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"إلغاء"})]})]})}),vb=({onSave:r,onClose:n,patients:c})=>{const[d,u]=g.useState({patientId:"",amount:"",date:new Date().toISOString().split("T")[0]}),[f,x]=g.useState(!1),[b,p]=g.useState(""),[y,k]=g.useState(!1),v=nr.useRef(null),E=b?c.filter(D=>D.name.toLowerCase().includes(b.toLowerCase())||D.code.includes(b)):c,S=D=>{u(L=>({...L,patientId:D.id})),p(D.name),k(!1)};g.useEffect(()=>{const D=L=>{v.current&&!v.current.contains(L.target)&&k(!1)};return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[v]);const z=D=>{const{name:L,value:T}=D.target;u(C=>({...C,[L]:T}))},j=async D=>{if(D.preventDefault(),!d.patientId||!d.amount){alert("يرجى ملء جميع الحقول المطلوبة.");return}x(!0);try{await r({patientId:d.patientId,amount:parseFloat(d.amount),date:d.date})}catch(L){alert(`فشل الحفظ: ${L instanceof Error?L.message:"خطأ غير معروف"}`)}finally{x(!1)}},M="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white";return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:D=>D.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"إضافة دفعة جديدة"}),s.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:j,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{ref:v,className:"relative",children:[s.jsx("label",{htmlFor:"patientSearch",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"المريض"}),s.jsxs("div",{className:"relative",children:[s.jsx(ks,{className:"absolute top-1/2 right-3 -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{id:"patientSearch",type:"text",value:b,onChange:D=>{p(D.target.value),u(L=>({...L,patientId:""})),k(!0)},onFocus:()=>k(!0),placeholder:"ابحث عن مريض بالاسم أو الكود...",required:!d.patientId,autoComplete:"off",className:M+" pr-10"})]}),y&&s.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-y-auto",children:E.length>0?E.map(D=>s.jsx("div",{onClick:()=>S(D),className:"px-4 py-2 cursor-pointer hover:bg-primary-100 dark:hover:bg-primary-900/40 text-gray-900 dark:text-gray-200",children:D.name},D.id)):s.jsx("div",{className:"px-4 py-2 text-gray-500",children:"لا يوجد مرضى مطابقون"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"المبلغ"}),s.jsx("input",{type:"number",step:"0.01",id:"amount",name:"amount",value:d.amount,onChange:z,required:!0,className:M,placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"التاريخ"}),s.jsx("input",{type:"date",id:"date",name:"date",value:d.date,onChange:z,required:!0,className:M})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:f?"جاري الحفظ...":"حفظ"})]})]})]})})},jb=({payment:r,onSave:n,onClose:c,patients:d})=>{const[u,f]=g.useState({patientId:r.patientId,amount:r.amount.toString(),date:r.date}),[x,b]=g.useState(!1),p=v=>{const{name:E,value:S}=v.target;f(z=>({...z,[E]:S}))},y=async v=>{v.preventDefault(),b(!0);try{await n({...r,...u,amount:parseFloat(u.amount)})}catch(E){alert(`فشل التعديل: ${E instanceof Error?E.message:"خطأ غير معروف"}`)}finally{b(!1)}},k="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white";return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:c,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:v=>v.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"تعديل الدفعة"}),s.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:y,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"patientId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"المريض"}),s.jsx("select",{id:"patientId",name:"patientId",value:u.patientId,onChange:p,required:!0,className:`${k} bg-gray-100 dark:bg-gray-600`,disabled:!0,children:d.map(v=>s.jsx("option",{value:v.id,children:v.name},v.id))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"المبلغ"}),s.jsx("input",{type:"number",step:"0.01",id:"amount",name:"amount",value:u.amount,onChange:p,required:!0,className:k,placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"التاريخ"}),s.jsx("input",{type:"date",id:"date",name:"date",value:u.date,onChange:p,required:!0,className:k})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:x?"جاري الحفظ...":"حفظ"})]})]})]})})},wb=({user:r,refreshTrigger:n})=>{const[c,d]=g.useState([]),[u,f]=g.useState([]),[x,b]=g.useState(!0),[p,y]=g.useState(null),[k,v]=g.useState(null),[E,S]=g.useState(!1),[z,j]=g.useState(!1),[M,D]=g.useState(null),[L,T]=g.useState(""),[C,V]=g.useState(1),[R,$]=g.useState(1),[se,ie]=g.useState(0),H=8,P=g.useCallback(async()=>{b(!0),y(null);try{const G=ae.patients.getAll({page:1,per_page:9999}),oe=ae.payments.getAll({page:C,per_page:H,search:L}),[fe,A]=await Promise.all([G,oe]);f(fe.patients),d(A.payments),ie(A.total),$(A.last_page)}catch(G){G instanceof Error&&G.message.includes("Failed to fetch")?y("فشل جلب البيانات الرجاء التأكد من اتصالك بالانترنت واعادة تحميل البيانات"):(y("حدث خطأ غير متوقع."),console.error("Failed to fetch data:",G))}finally{b(!1)}},[C,L]);g.useEffect(()=>{const G=setTimeout(()=>{P()},300);return()=>clearTimeout(G)},[P,n]);const I=G=>{G>=1&&G<=R&&V(G)},Y=G=>{T(G.target.value),V(1)},ce=async G=>{await ae.payments.create(G),j(!1),await P()},pe=async G=>{await ae.payments.update(G.id,G),D(null),await P()},F=async()=>{if(k){S(!0);try{await ae.payments.delete(k.id),v(null),c.length===1&&C>1?V(G=>G-1):await P()}catch(G){console.error("Failed to delete payment:",G),alert(`فشل حذف الدفعة: ${G instanceof Error?G.message:"خطأ غير معروف"}`)}finally{S(!1)}}},te=G=>{var oe;return((oe=u.find(fe=>fe.id===G))==null?void 0:oe.name)||"مريض غير معروف"};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[s.jsxs("div",{className:"relative w-full max-w-sm",children:[s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:s.jsx(ks,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),s.jsx("input",{type:"text",value:L,onChange:Y,placeholder:"ابحث عن طريق اسم المريض...",className:"w-full pl-3 pr-10 py-2 bg-white dark:bg-gray-700 text-black dark:text-white border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary"})]}),s.jsxs("button",{onClick:()=>j(!0),className:"hidden lg:flex items-center bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-primary-700 transition-colors",children:[s.jsx(Ve,{className:"h-5 w-5 ml-2"}),"إضافة دفعة"]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md min-h-[400px]",children:x?s.jsx(st,{}):p?s.jsx("div",{className:"text-center py-16 text-red-500 dark:text-red-400",children:s.jsx("p",{children:p})}):c.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:c.map(G=>s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 flex flex-col justify-between transition-shadow hover:shadow-lg",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:te(G.patientId)}),s.jsxs("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:["SYP ",G.amount.toFixed(2)]})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:new Date(G.date).toLocaleDateString()})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600 flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>D(G),className:"p-2 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40 text-blue-600 dark:text-blue-400",title:"تعديل",children:s.jsx(_t,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>v(G),className:"p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 text-red-600 dark:text-red-400",title:"حذف",children:s.jsx(Ze,{className:"h-5 w-5"})})]})]},G.id))}),s.jsxs("div",{className:"mt-6 flex justify-between items-center flex-wrap gap-4",children:[s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["عرض ",c.length," من أصل ",se," مدفوعات"]}),s.jsx(pb,{currentPage:C,totalPages:R,onPageChange:I})]})]}):s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"لم يتم العثور على مدفوعات."})}),s.jsx("button",{onClick:()=>j(!0),className:"lg:hidden fixed bottom-20 right-4 bg-primary text-white p-4 rounded-full shadow-lg hover:bg-primary-700 transition-colors z-20","aria-label":"إضافة دفعة",children:s.jsx(Ve,{className:"h-6 w-6"})}),z&&s.jsx(vb,{patients:u,onSave:ce,onClose:()=>j(!1)}),M&&s.jsx(jb,{payment:M,patients:u,onSave:pe,onClose:()=>D(null)}),k&&s.jsx(bb,{title:"حذف الدفعة",message:`هل أنت متأكد من حذف دفعة بقيمة SYP ${k.amount.toFixed(2)} للمريض ${te(k.patientId)}؟`,onConfirm:F,onCancel:()=>!E&&v(null),isDeleting:E})]})},kh=(r,n,c)=>{if(!n&&!c)return!0;const d=new Date(r);if(n&&d<new Date(n))return!1;if(c){const u=new Date(c);if(u.setHours(23,59,59,999),d>u)return!1}return!0},wd=({title:r,value:n,icon:c,color:d})=>s.jsxs("div",{className:"p-4 sm:p-6 bg-white dark:bg-slate-800 rounded-xl shadow-md flex items-center space-x-4 rtl:space-x-reverse",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:`p-3 bg-${d}-100 dark:bg-${d}-900/40 rounded-full`,children:s.jsx(c,{className:`h-6 w-6 text-${d}-600 dark:text-${d}-300`})})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg sm:text-xl font-medium text-black dark:text-white",children:n}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})]}),Nb=({refreshTrigger:r})=>{const[n,c]=g.useState([]),[d,u]=g.useState([]),[f,x]=g.useState([]),[b,p]=g.useState(!0),[y,k]=g.useState(null),[v,E]=g.useState(""),[S,z]=g.useState(""),j=g.useCallback(async()=>{p(!0),k(null);try{const[D,L,T]=await Promise.all([ae.patients.getAll({page:1,per_page:9999}),ae.sessions.getAll(),ae.payments.getAll({page:1,per_page:9999})]);c(D.patients),u(L),x(T.payments)}catch(D){D instanceof Error&&D.message.includes("Failed to fetch")?k("فشل جلب البيانات الرجاء التأكد من اتصالك بالانترنت واعادة تحميل البيانات"):(k("حدث خطأ غير متوقع."),console.error("Failed to load statistics data:",D))}finally{p(!1)}},[]);g.useEffect(()=>{j()},[j,r]);const M=g.useMemo(()=>{let D=0,L=0;const T=n.map(C=>{const V=d.filter(I=>I.patientId===C.id),R=f.filter(I=>I.patientId===C.id),$=V.flatMap(I=>I.treatments.filter(Y=>kh(Y.treatmentDate||I.date,v,S))),se=R.filter(I=>kh(I.date,v,S)),ie=$.reduce((I,Y)=>I+Y.sessionPrice+(Y.additionalCosts||0),0),H=se.reduce((I,Y)=>I+Y.amount,0),P=ie-H;return D+=ie,L+=H,{patientId:C.id,patientName:C.name,totalCosts:ie,totalPayments:H,balance:P}});return{overallCosts:D,overallRevenue:L,overallBalance:D-L,patientStats:T}},[n,d,f,v,S]);return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-md flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"من تاريخ"}),s.jsx("input",{type:"date",id:"startDate",value:v,onChange:D=>E(D.target.value),className:"mt-1 w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white"})]}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"إلى تاريخ"}),s.jsx("input",{type:"date",id:"endDate",value:S,onChange:D=>z(D.target.value),className:"mt-1 w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white"})]})]}),b?s.jsx(st,{}):y?s.jsx("div",{className:"text-center py-16 text-red-500 dark:text-red-400 bg-white dark:bg-slate-800 rounded-xl shadow-md",children:s.jsx("p",{children:y})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-8",children:[s.jsx(wd,{title:"إجمالي تكاليف العلاج",value:`SYP ${M.overallCosts.toFixed(2)}`,icon:gn,color:"red"}),s.jsx(wd,{title:"إجمالي الإيرادات",value:`SYP ${M.overallRevenue.toFixed(2)}`,icon:Ns,color:"green"}),s.jsx(wd,{title:"المتبقي",value:`SYP ${M.overallBalance.toFixed(2)}`,icon:rr,color:M.overallBalance>0?"yellow":"blue"})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"ملخص المرضى"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.patientStats.map(D=>s.jsxs("div",{className:"border bg-gray-50 dark:bg-gray-800 dark:border-gray-700 rounded-lg p-4 shadow-sm",children:[s.jsx("h3",{className:"font-bold text-lg text-primary",children:D.patientName}),s.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center text-red-600 dark:text-red-400",children:[s.jsx("span",{children:"إجمالي التكاليف:"}),s.jsxs("span",{className:"font-semibold",children:["SYP ",D.totalCosts.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center text-green-600 dark:text-green-400",children:[s.jsx("span",{children:"مجموع الدفعات:"}),s.jsxs("span",{className:"font-semibold",children:["SYP ",D.totalPayments.toFixed(2)]})]}),s.jsxs("div",{className:`flex justify-between items-center pt-2 border-t dark:border-gray-600 font-bold ${D.balance>0?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400"}`,children:[s.jsx("span",{children:"الرصيد المتبقي:"}),s.jsxs("span",{children:["SYP ",D.balance.toFixed(2)]})]})]})]},D.patientId))})]})]})]})},Sb=({user:r,refreshTrigger:n})=>{const[c,d]=g.useState([]),[u,f]=g.useState(!0),[x,b]=g.useState(!1),[p,y]=g.useState(""),[k,v]=g.useState(null),E=g.useCallback(async()=>{f(!0),v(null);try{const D=await ae.doctorSchedules.getForDoctor(r.id),L=wh.map((T,C)=>D.find(R=>R.day===C)||{day:C,isWorkDay:!1,startTime:"09:00",endTime:"17:00"});d(L)}catch(D){D instanceof Error&&D.message.includes("Failed to fetch")?v("فشل جلب البيانات الرجاء التأكد من اتصالك بالانترنت واعادة تحميل البيانات"):(v("حدث خطأ غير متوقع."),console.error("Could not fetch schedule",D))}finally{f(!1)}},[r.id]);g.useEffect(()=>{E()},[E,n]);const S=D=>{d(L=>L.map((T,C)=>C===D?{...T,isWorkDay:!T.isWorkDay}:T))},z=(D,L)=>{const{name:T,value:C}=D.target;d(V=>V.map((R,$)=>$===L?{...R,[T]:C}:R))},j=async D=>{D.preventDefault(),b(!0),y("");try{await ae.doctorSchedules.setForDoctor(r.id,c),y("تم تحديث التواجد بنجاح!"),await E(),setTimeout(()=>y(""),3e3)}catch(L){console.error("Failed to save schedule:",L),y(`فشل تحديث التواجد: ${L instanceof Error?L.message:"خطأ غير معروف"}`)}finally{b(!1)}},M="mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm text-black dark:text-white";return s.jsxs("div",{className:"mt-8",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6",children:"تواجدي"}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md max-w-3xl mx-auto min-h-[400px]",children:u?s.jsx(st,{}):k?s.jsx("div",{className:"text-center py-16 text-red-500 dark:text-red-400",children:s.jsx("p",{children:k})}):s.jsxs("form",{onSubmit:j,children:[s.jsx("div",{className:"space-y-4",children:c.map((D,L)=>s.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg transition-all duration-300 has-[:checked]:bg-primary-50 has-[:checked]:border-primary-300 dark:has-[:checked]:bg-primary-900/20 dark:has-[:checked]:border-primary-700",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:D.isWorkDay,onChange:()=>S(L),className:"h-5 w-5 rounded text-primary focus:ring-primary-500 border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 dark:focus:ring-offset-gray-800"}),s.jsx("span",{className:"font-semibold text-lg text-gray-800 dark:text-gray-100",children:wh[L]})]})}),D.isWorkDay&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:`startTime-${L}`,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"وقت البدء"}),s.jsx("input",{type:"time",id:`startTime-${L}`,name:"startTime",value:D.startTime,onChange:T=>z(T,L),className:M})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:`endTime-${L}`,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"وقت الانتهاء"}),s.jsx("input",{type:"time",id:`endTime-${L}`,name:"endTime",value:D.endTime,onChange:T=>z(T,L),className:M})]})]})]},L))}),s.jsx("div",{className:"mt-8",children:s.jsx("button",{type:"submit",disabled:x,className:"w-full bg-primary text-white px-4 py-3 rounded-lg shadow-md hover:bg-primary-700 transition-colors disabled:bg-primary-300 font-semibold text-lg",children:x?"جاري الحفظ...":"حفظ التواجد"})}),p&&s.jsx("p",{className:`mt-4 text-center text-sm ${p.includes("فشل")?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:p})]})})]})},kb=({onConfirm:r,onCancel:n,title:c,message:d})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-sm transform transition-all",role:"dialog",onClick:u=>u.stopPropagation(),children:[s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30",children:s.jsx(Ze,{className:"h-6 w-6 text-red-600 dark:text-red-400","aria-hidden":"true"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:c}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 px-4",children:d})]})}),s.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-2xl flex justify-center gap-4",children:[s.jsx("button",{type:"button",onClick:r,className:"w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"نعم، قم بالحذف"}),s.jsx("button",{type:"button",onClick:n,className:"w-full rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"إلغاء"})]})]})}),Cb=({treatment:r,onSave:n,onClose:c,user:d})=>{const[u,f]=g.useState({name:(r==null?void 0:r.name)||"",price:(r==null?void 0:r.price.toString())||"",notes:(r==null?void 0:r.notes)||""}),[x,b]=g.useState(!1),p=E=>{const{name:S,value:z}=E.target;f(j=>({...j,[S]:z}))},y=async E=>{E.preventDefault(),b(!0);try{const S={name:u.name,price:parseFloat(u.price)||0,notes:u.notes};r?await n({...r,...S}):await n(S)}catch(S){alert(`فشل الحفظ: ${S instanceof Error?S.message:"خطأ غير معروف"}`),b(!1)}},k=!!r,v="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white";return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:c,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:E=>E.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:k?"تعديل العلاج":"إضافة علاج جديد"}),s.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:y,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"اسم العلاج"}),s.jsx("input",{type:"text",id:"name",name:"name",value:u.name,onChange:p,required:!0,className:v})]}),d.role!==ne.Doctor&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"السعر"}),s.jsx("input",{type:"number",step:"0.01",id:"price",name:"price",value:u.price,onChange:p,required:!0,className:v,placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ملاحظات"}),s.jsx("textarea",{id:"notes",name:"notes",value:u.notes,onChange:p,rows:3,className:v,placeholder:"أضف ملاحظات عامة حول العلاج..."})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:x?"جاري الحفظ...":"حفظ"})]})]})]})})},Db=({user:r,refreshTrigger:n})=>{const[c,d]=g.useState([]),[u,f]=g.useState(!0),[x,b]=g.useState(null),[p,y]=g.useState(!1),[k,v]=g.useState(null),[E,S]=g.useState(null),[z,j]=g.useState(""),M=g.useCallback(async()=>{f(!0),b(null);try{const C=await ae.treatmentSettings.getAll(!0);d(C)}catch(C){C instanceof Error&&C.message.includes("Failed to fetch")?b("فشل جلب البيانات الرجاء التأكد من اتصالك بالانترنت واعادة تحميل البيانات"):(b("حدث خطأ غير متوقع."),console.error("Failed to fetch treatments:",C))}finally{f(!1)}},[]);g.useEffect(()=>{M()},[M,n]);const D=async C=>{try{"id"in C?await ae.treatmentSettings.update(C.id,C):await ae.treatmentSettings.create(C),y(!1),v(null),await M()}catch(V){throw console.error("Failed to save treatment:",V),V}},L=async()=>{if(E)try{await ae.treatmentSettings.delete(E.id),S(null),await M()}catch(C){alert(`فشل حذف العلاج: ${C instanceof Error?C.message:"خطأ غير معروف"}`)}},T=c.filter(C=>C.name.toLowerCase().includes(z.toLowerCase()));return s.jsxs("div",{className:"mt-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100",children:"إعدادات العلاج"}),s.jsxs("div",{className:"relative w-full max-w-sm",children:[s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:s.jsx(ks,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),s.jsx("input",{type:"text",value:z,onChange:C=>j(C.target.value),placeholder:"ابحث عن علاج...",className:"w-full pl-3 pr-10 py-2 bg-white dark:bg-gray-700 text-black dark:text-white border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary"})]}),s.jsxs("button",{onClick:()=>y(!0),className:"flex items-center bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-primary-700 transition-colors",children:[s.jsx(Ve,{className:"h-5 w-5 ml-2"}),"إضافة علاج"]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md min-h-[200px]",children:u?s.jsx(st,{}):x?s.jsx("div",{className:"text-center py-16 text-red-500 dark:text-red-400",children:s.jsx("p",{children:x})}):T.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:T.map(C=>s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 flex flex-col justify-between transition-shadow hover:shadow-lg",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:C.name}),s.jsxs("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["SYP ",C.price.toFixed(2)]})]}),C.notes&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2 bg-gray-100 dark:bg-gray-700 p-2 rounded-md",children:C.notes})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600 flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>v(C),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 p-2 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40",title:"تعديل",children:s.jsx(_t,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>S(C),className:"text-red-600 dark:text-red-400 hover:text-red-800 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",title:"حذف",children:s.jsx(Ze,{className:"h-5 w-5"})})]})]},C.id))}):s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"لم يتم العثور على علاجات."})}),(p||k)&&s.jsx(Cb,{treatment:k||void 0,onClose:()=>{y(!1),v(null)},onSave:D,user:r},(k==null?void 0:k.id)||"add"),E&&s.jsx(kb,{title:"حذف العلاج",message:`هل أنت متأكد من رغبتك في حذف ${E.name}؟ لا يمكن التراجع عن هذا الإجراء.`,onConfirm:L,onCancel:()=>S(null)})]})},Ab=({onConfirm:r,onCancel:n,isLoggingOut:c})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-sm transform transition-all",role:"dialog",onClick:d=>d.stopPropagation(),children:[s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30",children:s.jsx($h,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400","aria-hidden":"true"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:"تأكيد تسجيل الخروج"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 px-4",children:"هل أنت متأكد أنك تريد تسجيل الخروج؟"})]})}),s.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-2xl flex justify-center gap-4",children:[s.jsx("button",{type:"button",onClick:r,disabled:c,className:"w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-400 disabled:cursor-not-allowed",children:c?"جاري تسجيل الخروج...":"نعم، تسجيل الخروج"}),s.jsx("button",{type:"button",onClick:n,disabled:c,className:"w-full rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"إلغاء"})]})]})}),Tb=({refreshTrigger:r})=>{const{logout:n,setUser:c,user:d}=ir();if(!d)return s.jsx("div",{className:"text-center p-8",children:"جاري تحميل الملف الشخصي..."});const u=d.role===ne.Admin,[f,x]=g.useState(!1),[b,p]=g.useState({name:d.name,email:d.email,password:""}),[y,k]=g.useState(!1),[v,E]=g.useState(""),[S,z]=g.useState(""),[j,M]=g.useState(!1),[D,L]=g.useState(!1);g.useEffect(()=>{p({name:d.name,email:d.email,password:""})},[d]);const T=async()=>{L(!0),await n()},C=()=>{x(!f),E(""),z(""),f&&p({name:d.name,email:d.email,password:""})},V=se=>{const{name:ie,value:H}=se.target;p(P=>({...P,[ie]:H}))},R=async se=>{se.preventDefault(),k(!0),E(""),z("");try{const ie={name:b.name,email:b.email};b.password&&(ie.password=b.password);const H=await ae.admins.update(d.id,ie);if(H)c({...d,...H}),z("تم تحديث البيانات بنجاح!"),x(!1);else throw new Error("لم يتم إرجاع بيانات المستخدم المحدثة.")}catch(ie){if(ie instanceof rl&&ie.errors){const H=Object.values(ie.errors).flat().join(", ");E(H||"خطأ في التحقق من البيانات.")}else ie instanceof Error?E(`فشل التحديث: ${ie.message}`):E("حدث خطأ غير متوقع.")}finally{k(!1)}},$="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white";return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 shadow-xl rounded-2xl overflow-hidden",children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Xl,{className:"h-24 w-24 text-gray-300 dark:text-gray-600"})}),s.jsxs("div",{className:"flex-grow text-center md:text-right",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:d.name}),s.jsx("p",{className:"text-md text-gray-500 dark:text-gray-400",children:d.email}),s.jsx("span",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/40 dark:text-primary-300",children:Jp[d.role]})]}),u&&!f&&s.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 font-semibold text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-slate-700 rounded-lg shadow-sm hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors",children:[s.jsx(_t,{className:"h-5 w-5"}),s.jsx("span",{children:"تعديل"})]})]}),v&&s.jsx("div",{className:"mt-6 p-3 text-sm text-red-700 bg-red-100 dark:bg-red-900/30 dark:text-red-300 rounded-lg text-center",role:"alert",children:v}),S&&s.jsx("div",{className:"mt-6 p-3 text-sm text-green-700 bg-green-100 dark:bg-green-900/30 dark:text-green-300 rounded-lg text-center",role:"alert",children:S}),f&&u?s.jsxs("form",{onSubmit:R,className:"mt-8 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"الاسم الكامل"}),s.jsx("input",{type:"text",id:"name",name:"name",value:b.name,onChange:V,required:!0,className:$})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"البريد الإلكتروني"}),s.jsx("input",{type:"email",id:"email",name:"email",value:b.email,onChange:V,required:!0,className:$})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"كلمة المرور الجديدة (اتركها فارغة لعدم التغيير)"}),s.jsx("input",{type:"password",id:"password",name:"password",value:b.password,onChange:V,className:$,placeholder:"••••••••"})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{type:"button",onClick:C,className:"px-6 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:y,className:"px-6 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300",children:y?"جاري الحفظ...":"حفظ التغييرات"})]})]}):s.jsx("div",{className:"mt-8 border-t border-gray-200 dark:border-gray-700 pt-6 text-center",children:s.jsxs("button",{onClick:()=>M(!0),className:"inline-flex items-center gap-2 px-6 py-3 font-semibold text-white bg-red-600 rounded-lg shadow-md hover:bg-red-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsx($h,{className:"h-5 w-5"}),s.jsx("span",{children:"تسجيل الخروج"})]})})]})})}),d&&(d.role===ne.Admin||d.role===ne.SubManager)&&s.jsx(Db,{user:d,refreshTrigger:r}),d&&d.role===ne.Doctor&&s.jsx(Sb,{user:d,refreshTrigger:r}),j&&s.jsx(Ab,{onConfirm:T,onCancel:()=>!D&&M(!1),isLoggingOut:D})]})},Ch=({onConfirm:r,onCancel:n,title:c,message:d})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-sm transform transition-all",role:"dialog",onClick:u=>u.stopPropagation(),children:[s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30",children:s.jsx(Ze,{className:"h-6 w-6 text-red-600 dark:text-red-400","aria-hidden":"true"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:c}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 px-4",children:d})]})}),s.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-2xl flex justify-center gap-4",children:[s.jsx("button",{type:"button",onClick:r,className:"w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"نعم، قم بالحذف"}),s.jsx("button",{type:"button",onClick:n,className:"w-full rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"إلغاء"})]})]})}),Eb=({treatment:r,onSave:n,onClose:c,user:d})=>{var v;const[u,f]=g.useState({sessionPrice:r.sessionPrice.toString(),sessionNotes:r.sessionNotes||"",treatmentDate:r.treatmentDate?new Date(r.treatmentDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],additionalCosts:((v=r.additionalCosts)==null?void 0:v.toString())||""}),[x,b]=g.useState(!1),p="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white";g.useEffect(()=>{const E=u.sessionNotes.match(/\d+(\.\d+)?/g);if(E){const S=E.reduce((z,j)=>z+parseFloat(j),0);f(z=>({...z,additionalCosts:S>0?S.toFixed(2):""}))}else f(S=>({...S,additionalCosts:""}))},[u.sessionNotes]);const y=E=>{const{name:S,value:z}=E.target;f(j=>({...j,[S]:z}))},k=async E=>{E.preventDefault(),b(!0);try{await ae.sessionTreatments.update(r.instanceId,{sessionPrice:parseFloat(u.sessionPrice)||0,sessionNotes:u.sessionNotes,treatmentDate:u.treatmentDate,additionalCosts:parseFloat(u.additionalCosts)||void 0}),await n()}catch(S){console.error("Failed to update treatment:",S);const z=S instanceof Error?S.message:"Unknown error";alert(`فشل في تحديث العلاج: ${z}`)}finally{b(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:c,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:E=>E.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:["تعديل العلاج: ",r.name]}),s.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:k,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"treatmentDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"تاريخ العلاج"}),s.jsx("input",{type:"date",id:"treatmentDate",name:"treatmentDate",value:u.treatmentDate,onChange:y,required:!0,className:p})]}),d.role!==ne.Doctor&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"sessionPrice",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"السعر"}),s.jsx("input",{type:"number",step:"0.01",id:"sessionPrice",name:"sessionPrice",value:u.sessionPrice,onChange:y,required:!0,className:p})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"additionalCosts",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"تكاليف اضافية"}),s.jsx("input",{type:"number",step:"0.01",id:"additionalCosts",name:"additionalCosts",value:u.additionalCosts,readOnly:!0,className:`${p} bg-gray-100 dark:bg-gray-800 cursor-not-allowed`,placeholder:"يتم حسابه من الملاحظات"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"sessionNotes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ملاحظات"}),s.jsx("textarea",{id:"sessionNotes",name:"sessionNotes",value:u.sessionNotes,onChange:y,rows:3,className:p,placeholder:"ملاحظات حول العلاج... سيتم استخلاص الأرقام للتكاليف الإضافية"})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:x?"جاري الحفظ...":"حفظ"})]})]})]})})},Mb=({session:r,onSave:n,onClose:c})=>{const[d,u]=g.useState({title:r.title||"",date:new Date(r.date).toISOString().split("T")[0],notes:r.notes}),[f,x]=g.useState(!1),b="w-full px-3 py-2 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-black dark:text-white bg-white dark:bg-gray-700",p=k=>{const{name:v,value:E}=k.target;u(S=>({...S,[v]:E}))},y=async k=>{k.preventDefault(),x(!0);const v={...r,title:d.title,date:new Date(d.date).toISOString(),notes:d.notes};await n(v),x(!1)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:c,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"تعديل الجلسة"}),s.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:y,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"عنوان الجلسة"}),s.jsx("input",{type:"text",id:"title",name:"title",value:d.title,onChange:p,required:!0,className:b})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"تاريخ الجلسة"}),s.jsx("input",{type:"date",id:"date",name:"date",value:d.date,onChange:p,required:!0,className:b})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ملاحظات"}),s.jsx("textarea",{id:"notes",name:"notes",value:d.notes,onChange:p,rows:4,className:b})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:f?"جاري الحفظ...":"حفظ"})]})]})]})})},_b=({treatment:r,onClose:n,user:c})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:d=>d.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"تفاصيل العلاج"}),s.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("div",{className:"p-6 space-y-3 divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"اسم العلاج"}),s.jsx("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:r.name})]}),r.treatmentDate&&s.jsxs("div",{className:"pt-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"تاريخ العلاج"}),s.jsx("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:new Date(r.treatmentDate).toLocaleDateString()})]}),c.role!==ne.Doctor&&s.jsxs("div",{className:"pt-3 grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"السعر"}),s.jsxs("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:["SYP ",r.sessionPrice.toFixed(2)]})]}),r.additionalCosts&&r.additionalCosts>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"تكاليف إضافية"}),s.jsxs("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:["SYP ",r.additionalCosts.toFixed(2)]})]})]}),r.sessionNotes&&s.jsxs("div",{className:"pt-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"ملاحظات الجلسة"}),s.jsx("p",{className:"text-md text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:r.sessionNotes})]}),r.notes&&s.jsxs("div",{className:"pt-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"ملاحظات عامة"}),s.jsx("p",{className:"text-md text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:r.notes})]})]}),s.jsx("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:s.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700",children:"إغلاق"})})]})}),Ob=({onSave:r,onClose:n,patientId:c,doctors:d,user:u,patient:f})=>{const[x,b]=g.useState({title:"",date:new Date().toISOString().split("T")[0],notes:""}),[p,y]=g.useState(!1),k="w-full px-3 py-2 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-black dark:text-white bg-white dark:bg-gray-700",v=S=>{const{name:z,value:j}=S.target;b(M=>({...M,[z]:j}))},E=async S=>{S.preventDefault();let z="";if(u.role===ne.Doctor&&f.doctorIds.includes(u.id)?z=u.id:f.doctorIds&&f.doctorIds.length>0&&(z=f.doctorIds[0]),!x.date||!z){alert("لا يمكن إضافة جلسة. المريض ليس لديه طبيب مسؤول.");return}y(!0),await r({title:x.title,date:new Date(x.date).toISOString(),notes:x.notes,patientId:c,doctorId:z}),y(!1)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:S=>S.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"إضافة جلسة جديدة"}),s.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:E,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"عنوان الجلسة"}),s.jsx("input",{type:"text",id:"title",name:"title",value:x.title,onChange:v,required:!0,className:k})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"تاريخ الجلسة"}),s.jsx("input",{type:"date",id:"date",name:"date",value:x.date,onChange:v,required:!0,className:k})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ملاحظات"}),s.jsx("textarea",{id:"notes",name:"notes",value:x.notes,onChange:v,rows:4,className:k})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:p?"جاري الحفظ...":"حفظ"})]})]})]})})},zb=({session:r,onSave:n,onClose:c,user:d})=>{const[u,f]=g.useState([]),[x,b]=g.useState(!0),[p,y]=g.useState(""),[k,v]=g.useState(""),[E,S]=g.useState(""),[z,j]=g.useState(new Date().toISOString().split("T")[0]),[M,D]=g.useState(""),[L,T]=g.useState(!1),[C,V]=g.useState(!1),R="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white";g.useEffect(()=>{(async()=>{b(!0);const Y=await ae.treatmentSettings.getAll(),ce=new Set(r.treatments.map(pe=>pe.name));f(Y.filter(pe=>!ce.has(pe.name))),b(!1)})()},[r.treatments]),g.useEffect(()=>{const I=E.match(/\d+(\.\d+)?/g);if(I){const Y=I.reduce((ce,pe)=>ce+parseFloat(pe),0);D(Y>0?Y.toFixed(2):"")}else D("")},[E]);const $=I=>{const Y=I.target.value;y(Y);const ce=u.find(pe=>pe.id===Y);v(ce?ce.price.toString():"")},se=g.useCallback(()=>{var I;y(""),v(""),S(""),j(new Date().toISOString().split("T")[0]),D(""),(I=document.getElementById("treatment"))==null||I.focus()},[]),ie=async I=>{const Y=u.find(pe=>pe.id===p);if(!Y){alert("الرجاء اختيار علاج.");return}const ce=I?T:V;ce(!0);try{await ae.sessionTreatments.create({session_id:r.id,treatment_name:Y.name,treatment_price:parseFloat(k)||0,treatment_notes:E,treatment_date:z,completed:!1,additional_costs:parseFloat(M)||void 0}),await n(!I),I||se()}catch(pe){console.error("Failed to save treatment:",pe);const F=pe instanceof Error?pe.message:"Unknown error";alert(`فشل في حفظ العلاج: ${F}`)}finally{ce(!1)}},H=I=>{I.preventDefault(),ie(!0)},P=I=>{I.preventDefault(),ie(!1)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:c,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:I=>I.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"إضافة علاج للجلسة"}),s.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),x?s.jsx("div",{className:"p-6 flex justify-center items-center h-48",children:s.jsx(or,{})}):s.jsxs("form",{onSubmit:H,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"treatment",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"اختر علاج"}),s.jsxs("select",{id:"treatment",value:p,onChange:$,required:!0,className:R,children:[s.jsx("option",{value:"",children:"-- اختر علاج --"}),u.map(I=>s.jsxs("option",{value:I.id,children:[I.name,d.role!==ne.Doctor&&` (SYP ${I.price})`]},I.id))]})]}),p&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"treatmentDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"تاريخ العلاج"}),s.jsx("input",{type:"date",id:"treatmentDate",value:z,onChange:I=>j(I.target.value),required:!0,className:R})]}),d.role!==ne.Doctor&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"sessionPrice",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"السعر"}),s.jsx("input",{type:"number",step:"0.01",id:"sessionPrice",value:k,onChange:I=>v(I.target.value),required:!0,className:R})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"additionalCosts",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"تكاليف اضافية"}),s.jsx("input",{type:"number",step:"0.01",id:"additionalCosts",value:M,readOnly:!0,className:`${R} bg-gray-100 dark:bg-gray-800 cursor-not-allowed`,placeholder:"يتم حسابه من الملاحظات"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"sessionNotes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ملاحظات"}),s.jsx("textarea",{id:"sessionNotes",value:E,onChange:I=>S(I.target.value),rows:3,className:R,placeholder:"ملاحظات حول العلاج... سيتم استخلاص الأرقام للتكاليف الإضافية (مثال: 'مادة خاصة 150 ومادة أخرى 50.5')"})]})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700 space-x-2 space-x-reverse",children:[s.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"button",onClick:P,disabled:L||C||!p,className:"px-4 py-2 bg-green-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-green-700 disabled:bg-green-300",children:C?"جاري الحفظ...":"حفظ واضافة علاج"}),s.jsx("button",{type:"submit",disabled:L||C||!p,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300",children:L?"جاري الحفظ...":"حفظ وإغلاق"})]})]})]})})},Ub=({patient:r,onBack:n,user:c,refreshTrigger:d})=>{const[u,f]=g.useState([]),[x,b]=g.useState([]),[p,y]=g.useState(!0),[k,v]=g.useState(!1),[E,S]=g.useState(null),[z,j]=g.useState(null),[M,D]=g.useState(null),[L,T]=g.useState(null),[C,V]=g.useState(null),[R,$]=g.useState(null),[se,ie]=g.useState(null),[H,P]=g.useState(null),I=w=>{var Z;return((Z=x.find(ee=>ee.id===w))==null?void 0:Z.name)||"غير معروف"},Y=g.useCallback(async()=>{y(!0);try{const[w,Z]=await Promise.all([ae.sessions.getAll(),ae.doctors.getAll()]),ee=w.filter(le=>le.patientId===r.id).sort((le,ge)=>new Date(ge.date).getTime()-new Date(le.date).getTime());f(ee),b(Z),Zi(r.id,c.id)}catch(w){console.error("Failed to fetch sessions:",w),alert("فشل في تحميل الجلسات.")}finally{y(!1)}},[r.id,c.id]);g.useEffect(()=>{Y()},[Y,d]);const ce=g.useCallback(async w=>{try{const Z=await ae.sessions.getById(w);if(!Z){await Y();return}const ee=Z.treatments.length>0&&Z.treatments.every(ge=>ge.completed);let le=Z;if(ee!==Z.completed){const ge=await ae.sessions.update(w,{completed:ee});ge&&(le=ge)}f(ge=>ge.map(be=>be.id===w?le:be)),(se==null?void 0:se.id)===w&&ie(le),Zi(r.id,c.id)}catch(Z){console.error(`Failed to re-evaluate session status for ${w}`,Z),await Y()}},[Y,se==null?void 0:se.id,r.id,c.id]),pe=async w=>{await ae.sessions.create({...w,treatments:[]}),v(!1),await Y()},F=async w=>{const Z={title:w.title,date:w.date,notes:w.notes};await ae.sessions.update(w.id,Z),S(null),await Y()},te=async()=>{z&&(await ae.sessions.delete(z.id),j(null),await Y())},G=async w=>{const Z=M==null?void 0:M.id;w||D(null),Z?await ce(Z):await Y()},oe=async()=>{const w=C==null?void 0:C.sessionId;V(null),w?await ce(w):await Y()},fe=async()=>{if(L){const w=L.sessionId;await ae.sessionTreatments.delete(L.instanceId),T(null),await ce(w)}},A=async w=>{P(w.instanceId);try{await ae.sessionTreatments.update(w.instanceId,{completed:!w.completed}),Zi(r.id,c.id),ie(Z=>{if(!Z||Z.id!==w.sessionId)return Z;const ee=Z.treatments.map(be=>be.instanceId===w.instanceId?{...be,completed:!be.completed}:be),le=ee.length>0&&ee.every(be=>be.completed),ge={...Z,treatments:ee,completed:le};return Z.completed!==le&&ae.sessions.update(Z.id,{completed:le}),f(be=>be.map(Ie=>Ie.id===ge.id?ge:Ie)),ge})}catch(Z){console.error("Failed to update treatment status:",Z),alert("فشل في تحديث حالة العلاج."),Y()}finally{P(null)}};return s.jsxs("div",{children:[se?s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>ie(null),className:"p-2 font-semibold text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-700 border border-gray-300 dark:border-gray-600 rounded-full shadow-sm hover:bg-gray-50 dark:hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-label":"العودة للجلسات",children:s.jsx(Ss,{className:"h-5 w-5"})}),s.jsx("div",{children:s.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["للمريض: ",r.name," - بتاريخ ",new Date(se.date).toLocaleDateString()]})})]}),s.jsxs("button",{onClick:()=>D(se),className:"flex items-center bg-green-600 text-white px-4 py-2 rounded-lg shadow hover:bg-green-700 transition-colors",children:[s.jsx(Ve,{className:"h-5 w-5 ml-2"}),"إضافة علاج"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:se.treatments.length>0?se.treatments.map(w=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("button",{onClick:()=>A(w),title:w.completed?"وضع علامة كغير مكتمل":"وضع علامة كمكتمل",disabled:H===w.instanceId,className:"w-6 h-6 flex items-center justify-center",children:H===w.instanceId?s.jsx(or,{className:"h-5 w-5"}):w.completed?s.jsx(Ii,{className:"h-6 w-6 text-green-500"}):s.jsx("div",{className:"h-6 w-6 rounded-full border-2 border-gray-400 dark:border-gray-500"})}),s.jsx("p",{className:`font-bold text-lg ${w.completed?"line-through text-gray-500 dark:text-gray-400":"text-gray-800 dark:text-gray-100"}`,children:w.name})]}),c.role!==ne.Doctor&&s.jsxs("p",{className:"text-md font-semibold text-green-600 dark:text-green-400",children:["SYP ",w.sessionPrice.toFixed(2),w.additionalCosts?` (+ SYP ${w.additionalCosts.toFixed(2)})`:""]}),w.treatmentDate&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["تاريخ العلاج: ",new Date(w.treatmentDate).toLocaleDateString()]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-gray-700 flex justify-end items-center gap-1",children:[s.jsx("button",{onClick:()=>$(w),className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",title:"عرض التفاصيل",children:s.jsx($i,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),s.jsx("button",{onClick:()=>V(w),className:"p-2 rounded-full text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/40",title:"تعديل العلاج",children:s.jsx(_t,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>T(w),className:"p-2 rounded-full text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40",title:"حذف العلاج",children:s.jsx(Ze,{className:"h-5 w-5"})})]})]},w.instanceId)):s.jsxs("div",{className:"col-span-full text-center py-16 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-slate-800 rounded-xl",children:[s.jsx(gn,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:"لا توجد علاجات"}),s.jsx("p",{className:"mt-1 text-sm",children:"ابدأ بإضافة أول علاج لهذه الجلسة."})]})})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:n,className:"p-2 font-semibold text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-700 border border-gray-300 dark:border-gray-600 rounded-full shadow-sm hover:bg-gray-50 dark:hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-label":"العودة للمرضى",children:s.jsx(Ss,{className:"h-5 w-5"})}),s.jsx("div",{children:s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r.name})})]}),s.jsxs("button",{onClick:()=>v(!0),className:"flex items-center bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-primary-700 transition-colors",children:[s.jsx(Ve,{className:"h-5 w-5 ml-2"}),"إضافة جلسة"]})]}),s.jsx("div",{className:"space-y-6",children:p?s.jsx(st,{}):u.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(w=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:w.title||"جلسة بدون عنوان"}),s.jsx("div",{title:w.completed?"مكتملة":"غير مكتملة",children:w.completed?s.jsx(Ii,{className:"h-6 w-6 text-green-500"}):s.jsx("div",{className:"h-6 w-6 rounded-full border-2 border-gray-400 dark:border-gray-500"})})]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["بتاريخ: ",new Date(w.date).toLocaleDateString()," - الطبيب: ",I(w.doctorId)]}),w.notes&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2 bg-gray-50 dark:bg-slate-700/50 p-2 rounded-md",children:["ملاحظات: ",w.notes]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-gray-700 flex flex-wrap items-center justify-end gap-2",children:[s.jsxs("button",{onClick:()=>ie(w),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-semibold text-white bg-teal-600 rounded-md hover:bg-teal-700",children:[s.jsx(gn,{className:"h-4 w-4"})," علاجات (",w.treatments.length,")"]}),s.jsx("button",{onClick:()=>S(w),className:"p-2 rounded-full text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/40",title:"تعديل الجلسة",children:s.jsx(_t,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>j(w),className:"p-2 rounded-full text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40",title:"حذف الجلسة",children:s.jsx(Ze,{className:"h-5 w-5"})})]})]},w.id))}):s.jsxs("div",{className:"text-center py-16 text-gray-500 dark:text-gray-400 bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[s.jsx(Ld,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:"لا توجد جلسات"}),s.jsx("p",{className:"mt-1 text-sm",children:"ابدأ بإضافة أول جلسة لهذا المريض."})]})})]}),k&&s.jsx(Ob,{onSave:pe,onClose:()=>v(!1),patientId:r.id,doctors:x,user:c,patient:r}),E&&s.jsx(Mb,{session:E,onSave:F,onClose:()=>S(null)}),z&&s.jsx(Ch,{title:"حذف الجلسة",message:"هل أنت متأكد من حذف هذه الجلسة وجميع علاجاتها؟",onConfirm:te,onCancel:()=>j(null)}),M&&s.jsx(zb,{session:M,onSave:G,onClose:()=>D(null),user:c}),C&&s.jsx(Eb,{treatment:C,onSave:oe,onClose:()=>V(null),user:c}),L&&s.jsx(Ch,{title:"حذف العلاج",message:`هل أنت متأكد من حذف علاج "${L.name}" من الجلسة؟`,onConfirm:fe,onCancel:()=>T(null)}),R&&s.jsx(_b,{treatment:R,onClose:()=>$(null),user:c})]})},Rb=({session:r,allTreatments:n,onAdd:c,user:d})=>{const[u,f]=g.useState(""),[x,b]=g.useState(""),p="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white",y=g.useMemo(()=>{const v=new Set(r.treatments.map(E=>E.name));return n.filter(E=>!v.has(E.name))},[n,r.treatments]),k=()=>{const v=n.find(E=>E.id===u);v&&(c(v,x),f(""),b(""))};return y.length===0?s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"تمت إضافة جميع العلاجات المتاحة لهذه الجلسة."}):s.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[s.jsxs("select",{value:u,onChange:v=>f(v.target.value),className:p+" flex-grow",children:[s.jsx("option",{value:"",children:"-- إضافة علاج --"}),y.map(v=>s.jsx("option",{value:v.id,children:v.name},v.id))]}),s.jsx("input",{type:"text",value:x,onChange:v=>b(v.target.value),placeholder:"ملاحظات...",className:p+" flex-grow"}),s.jsx("button",{type:"button",onClick:k,disabled:!u,className:"p-2 bg-primary text-white rounded-md disabled:bg-gray-400","aria-label":"Add Treatment",children:s.jsx(Ve,{className:"h-5 w-5"})})]})},Lb=({patient:r,user:n,onBack:c,doctors:d,refreshTrigger:u})=>{const[f,x]=g.useState([]),[b,p]=g.useState([]),[y,k]=g.useState(!0),[v,E]=g.useState(!1),[S,z]=g.useState([]),j=H=>{z(P=>P.includes(H)?P.filter(I=>I!==H):[...P,H])},M=H=>{var P;return((P=d.find(I=>I.id===H))==null?void 0:P.name)||"غير معروف"},D=g.useCallback(async()=>{k(!0);try{const[H,P]=await Promise.all([yh(r.id),ae.treatmentSettings.getAll(!0)]),I=H.map(Y=>({id:Y.id,clientId:Y.id,title:Y.title,doctorId:Y.doctorId,date:new Date(Y.date).toISOString().split("T")[0],notes:Y.notes,treatments:Y.treatments})).sort((Y,ce)=>new Date(Y.date).getTime()-new Date(ce.date).getTime());x(I),p(P)}catch(H){console.error(H),alert("فشل في تحميل بيانات الخطة.")}finally{k(!1)}},[r.id]);g.useEffect(()=>{D()},[D,u]);const L=()=>{const H={clientId:`new-${Date.now()}`,title:`جلسة ${f.length+1}`,doctorId:r.doctorIds.includes(n.id)?n.id:r.doctorIds[0]||"",date:new Date().toISOString().split("T")[0],notes:"",treatments:[]};x(P=>[...P,H]),z(P=>[...P,H.clientId])},T=(H,P,I)=>{x(Y=>Y.map(ce=>ce.clientId===H?{...ce,[P]:I}:ce))},C=H=>{window.confirm("هل أنت متأكد من حذف هذه الجلسة من الخطة؟")&&x(P=>P.filter(I=>I.clientId!==H))},V=(H,P,I)=>{x(Y=>Y.map(ce=>{if(ce.clientId===H){const pe={...P,instanceId:`new-${Date.now()}`,sessionId:ce.id||"",sessionPrice:P.price,sessionNotes:I,completed:!1};return{...ce,treatments:[...ce.treatments,pe]}}return ce}))},R=(H,P)=>{x(I=>I.map(Y=>Y.clientId===H?{...Y,treatments:Y.treatments.filter(ce=>ce.instanceId!==P)}:Y))},$=async()=>{var H;E(!0);try{const P=await yh(r.id),I=P.filter(Y=>!f.some(ce=>ce.id===Y.id));await Promise.all(I.map(Y=>ae.sessions.delete(Y.id)));for(const Y of f)if(Y.id){await ae.sessions.update(Y.id,{title:Y.title,date:Y.date,notes:Y.notes,doctorId:Y.doctorId});const pe=(((H=P.find(F=>F.id===Y.id))==null?void 0:H.treatments)||[]).filter(F=>!Y.treatments.some(te=>te.instanceId===F.instanceId));await Promise.all(pe.map(F=>ae.sessionTreatments.delete(F.instanceId)));for(const F of Y.treatments)F.instanceId.startsWith("new-")&&await ae.sessionTreatments.create({session_id:Y.id,treatment_name:F.name,treatment_price:F.price,treatment_notes:F.sessionNotes,treatment_date:new Date().toISOString().split("T")[0],completed:!1})}else{const ce=await ae.sessions.create({patientId:r.id,title:Y.title,date:Y.date,notes:Y.notes,doctorId:Y.doctorId,treatments:[]});for(const pe of Y.treatments)await ae.sessionTreatments.create({session_id:ce.id,treatment_name:pe.name,treatment_price:pe.price,treatment_notes:pe.sessionNotes,treatment_date:new Date().toISOString().split("T")[0],completed:!1})}await Zi(r.id,n.id),alert("تم حفظ الخطة بنجاح!"),c()}catch(P){console.error(P),alert("فشل في حفظ الخطة.")}finally{E(!1)}},se=g.useMemo(()=>d.filter(H=>r.doctorIds.includes(H.id)),[r,d]),ie="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white";return y?s.jsx(st,{}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:c,className:"p-2 font-semibold text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-700 border border-gray-300 dark:border-gray-600 rounded-full shadow-sm hover:bg-gray-50 dark:hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-label":"العودة",children:s.jsx(Ss,{className:"h-5 w-5"})}),s.jsx("div",{children:s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r.name})})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:L,className:"hidden lg:flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 transition-colors",children:[s.jsx(Ve,{className:"h-5 w-5 ml-2"}),"إضافة جلسة"]}),s.jsxs("button",{onClick:$,disabled:v,className:"flex items-center bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-primary-700 transition-colors disabled:bg-primary-300",children:[v?s.jsx(or,{className:"h-5 w-5 ml-2"}):s.jsx(Ii,{className:"h-5 w-5 ml-2"}),s.jsx("span",{children:v?"جاري الحفظ...":"حفظ الخطة"})]})]})]}),s.jsx("div",{className:"space-y-6",children:f.length>0?f.map((H,P)=>{const I=S.includes(H.clientId);return s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md overflow-hidden transition-shadow hover:shadow-lg",children:[s.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700/50",onClick:()=>j(H.clientId),children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(rr,{className:"h-6 w-6 text-primary"}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:["الجلسة ",P+1,": ",H.title]}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 flex flex-wrap items-center gap-x-4 gap-y-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Xl,{className:"h-4 w-4"})," ",M(H.doctorId)]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(fa,{className:"h-4 w-4"})," ",new Date(H.date).toLocaleDateString()]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:Y=>{Y.stopPropagation(),C(H.clientId)},className:"p-2 rounded-full text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40",title:"حذف الجلسة",children:s.jsx(Ze,{className:"h-5 w-5"})}),s.jsx(Ep,{className:`h-6 w-6 text-gray-400 transition-transform duration-300 ${I?"transform rotate-180":""}`})]})]}),s.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${I?"max-h-[1500px]":"max-h-0"}`,children:s.jsxs("div",{className:"p-6 border-t dark:border-gray-700 bg-gray-50/50 dark:bg-slate-800/50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"عنوان الجلسة"}),s.jsx("input",{type:"text",value:H.title,onChange:Y=>T(H.clientId,"title",Y.target.value),className:ie})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الطبيب"}),s.jsx("select",{value:H.doctorId,onChange:Y=>T(H.clientId,"doctorId",Y.target.value),className:ie,children:se.map(Y=>s.jsx("option",{value:Y.id,children:Y.name},Y.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"تاريخ الجلسة"}),s.jsx("input",{type:"date",value:H.date,onChange:Y=>T(H.clientId,"date",Y.target.value),className:ie})]}),s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ملاحظات الجلسة"}),s.jsx("textarea",{value:H.notes,onChange:Y=>T(H.clientId,"notes",Y.target.value),rows:2,className:ie})]})]}),s.jsxs("div",{className:"mt-4 border-t pt-4 dark:border-gray-700",children:[s.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"العلاجات المخطط لها"}),H.treatments.length>0?s.jsx("ul",{className:"space-y-2",children:H.treatments.map(Y=>s.jsxs("li",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-700 rounded-md shadow-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-200",children:Y.name}),Y.sessionNotes&&s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:Y.sessionNotes})]}),s.jsx("button",{onClick:()=>R(H.clientId,Y.instanceId),className:"p-1 text-red-500 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:s.jsx(Ke,{className:"h-4 w-4"})})]},Y.instanceId))}):s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"لم يتم إضافة علاجات."}),s.jsx(Rb,{session:H,allTreatments:b,onAdd:(Y,ce)=>V(H.clientId,Y,ce),user:n})]})]})})]},H.clientId)}):s.jsxs("div",{className:"text-center py-16 text-gray-500 dark:text-gray-400 bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[s.jsx(rr,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:"لم يتم إنشاء خطة بعد"}),s.jsx("p",{className:"mt-1 text-sm",children:"ابدأ بإضافة أول جلسة إلى خطة علاج المريض."})]})}),s.jsx("button",{onClick:L,className:"lg:hidden fixed bottom-20 left-4 bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-colors z-20","aria-label":"إضافة جلسة",children:s.jsx(Ve,{className:"h-6 w-6"})})]})},us=({label:r,value:n,children:c})=>s.jsxs("div",{className:"py-3 sm:py-4",children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:r}),s.jsx("dd",{className:"mt-1 text-lg text-gray-900 dark:text-gray-100 sm:mt-0",children:c||n||s.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"لا يوجد"})})]}),Hb=({patient:r,doctors:n,onBack:c,refreshTrigger:d})=>{const[u,f]=g.useState(r),[x,b]=g.useState(!0);g.useEffect(()=>{(async()=>{b(!0);const k=await ae.patients.getById(r.id);k&&f(k),b(!1)})()},[r.id,d]);const p=g.useMemo(()=>u?n.filter(y=>u.doctorIds.includes(y.id)):[],[u,n]);return x?s.jsx(st,{}):u?s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:c,className:"p-2 font-semibold text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-700 border border-gray-300 dark:border-gray-600 rounded-full shadow-sm hover:bg-gray-50 dark:hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-label":"العودة",children:s.jsx(Ss,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100",children:"تفاصيل المريض"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:u.name})]})]})}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 shadow-md rounded-xl overflow-hidden",children:[s.jsx("div",{className:"px-4 py-5 sm:px-6",children:s.jsxs("h3",{className:"text-xl leading-6 font-bold text-gray-900 dark:text-gray-100",children:[u.name,s.jsx("span",{className:"ml-3 inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/40 dark:text-primary-300",children:u.code})]})}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-5 sm:p-0",children:s.jsxs("dl",{className:"sm:divide-y sm:divide-gray-200 dark:sm:divide-gray-700",children:[s.jsxs("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[" ",s.jsx(us,{label:"الأطباء المسؤولون",value:p.map(y=>y.name).join(", ")})," "]}),s.jsxs("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[" ",s.jsx(us,{label:"العمر",value:u.age})," "]}),s.jsxs("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[" ",s.jsx(us,{label:"الهاتف",value:u.phone})," "]}),s.jsxs("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[" ",s.jsx(us,{label:"الجنس",value:u.gender===et.Female?"أنثى":"ذكر"})," "]}),s.jsx("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:s.jsx(us,{label:"الحالة الاجتماعية/الصحية",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[u.isSmoker&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",children:"مدخن"}),u.isPregnant&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-pink-100 text-pink-800 dark:bg-pink-900/40 dark:text-pink-300",children:"حامل"}),!u.isSmoker&&!u.isPregnant&&s.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"لا يوجد"})]})})}),s.jsxs("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[" ",s.jsx(us,{label:"الحساسية الدوائية",value:u.drugAllergy})," "]}),s.jsxs("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[" ",s.jsx(us,{label:"الأمراض المزمنة",value:u.chronicDiseases})," "]}),s.jsxs("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[" ",s.jsx(us,{label:"ملاحظات عامة",value:u.notes})," "]})]})})]})]}):s.jsxs("div",{children:[s.jsxs("button",{onClick:c,className:"mb-4 flex items-center gap-2 text-primary hover:underline",children:[s.jsx(Ss,{className:"h-5 w-5"}),s.jsx("span",{children:"العودة للمرضى"})]}),s.jsx("div",{className:"text-center p-8 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:s.jsx("h2",{className:"text-xl font-semibold",children:"لم يتم العثور على المريض."})})]})},qb=({onConfirm:r,onCancel:n,title:c,message:d,isDeleting:u})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-sm transform transition-all",role:"dialog",onClick:f=>f.stopPropagation(),children:[s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30",children:s.jsx(Ze,{className:"h-6 w-6 text-red-600 dark:text-red-400","aria-hidden":"true"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:c}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 px-4",children:d})]})}),s.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-2xl flex justify-center gap-4",children:[s.jsx("button",{type:"button",onClick:r,disabled:u,className:"w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-400 disabled:cursor-not-allowed",children:u?"جاري الحذف...":"نعم، قم بالحذف"}),s.jsx("button",{type:"button",onClick:n,disabled:u,className:"w-full rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"إلغاء"})]})]})}),Bb=({onSave:r,onClose:n,patient:c})=>{const[d,u]=g.useState({amount:"",date:new Date().toISOString().split("T")[0]}),[f,x]=g.useState(!1),b="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white",p=k=>{const{name:v,value:E}=k.target;u(S=>({...S,[v]:E}))},y=async k=>{if(k.preventDefault(),!d.amount){alert("يرجى إدخال المبلغ.");return}x(!0),await r({patientId:c.id,amount:parseFloat(d.amount),date:d.date}),x(!1)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:["إضافة دفعة لـ ",c.name]}),s.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:y,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"المبلغ"}),s.jsx("input",{type:"number",step:"0.01",id:"amount",name:"amount",value:d.amount,onChange:p,required:!0,className:b,placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"التاريخ"}),s.jsx("input",{type:"date",id:"date",name:"date",value:d.date,onChange:p,required:!0,className:b})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:f?"جاري الحفظ...":"حفظ"})]})]})]})})},Qb=({payment:r,onSave:n,onClose:c,patientName:d})=>{const[u,f]=g.useState({amount:r.amount.toString(),date:r.date}),[x,b]=g.useState(!1),p="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white",y=v=>{const{name:E,value:S}=v.target;f(z=>({...z,[E]:S}))},k=async v=>{v.preventDefault(),b(!0),await n({...r,amount:parseFloat(u.amount),date:u.date}),b(!1)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:c,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md",role:"dialog",onClick:v=>v.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:["تعديل دفعة لـ ",d]}),s.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:k,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"المبلغ"}),s.jsx("input",{type:"number",step:"0.01",id:"amount",name:"amount",value:u.amount,onChange:y,required:!0,className:p})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"التاريخ"}),s.jsx("input",{type:"date",id:"date",name:"date",value:u.date,onChange:y,required:!0,className:p})]})]}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:x?"جاري الحفظ...":"حفظ"})]})]})]})})},Yb=({patient:r,onBack:n,refreshTrigger:c})=>{const[d,u]=g.useState([]),[f,x]=g.useState({totalPayments:0,totalCost:0,balance:0}),[b,p]=g.useState(!0),[y,k]=g.useState(null),[v,E]=g.useState(!1),[S,z]=g.useState(!1),[j,M]=g.useState(null),D=g.useCallback(async()=>{p(!0);try{const[R,$]=await Promise.all([ae.payments.getAll({page:1,per_page:9999}),ae.sessions.getAll()]),ie=R.payments.filter(Y=>Y.patientId===r.id),H=$.filter(Y=>Y.patientId===r.id);u(ie.sort((Y,ce)=>new Date(ce.date).getTime()-new Date(Y.date).getTime()));const P=ie.reduce((Y,ce)=>Y+ce.amount,0),I=H.reduce((Y,ce)=>{const pe=ce.treatments.reduce((F,te)=>F+te.sessionPrice+(te.additionalCosts||0),0);return Y+pe},0);x({totalPayments:P,totalCost:I,balance:I-P})}catch(R){console.error("Failed to fetch payment data:",R),alert("فشل في تحميل البيانات المالية للمريض.")}finally{p(!1)}},[r.id]);g.useEffect(()=>{D()},[D,c]);const L=async R=>{await ae.payments.create(R),z(!1),await D()},T=async R=>{await ae.payments.update(R.id,R),M(null),await D()},C=async()=>{if(y){E(!0);try{await ae.payments.delete(y.id),k(null),await D()}catch(R){console.error("Failed to delete payment:",R),alert(`فشل حذف الدفعة: ${R instanceof Error?R.message:"خطأ غير معروف"}`)}finally{E(!1)}}},V=({title:R,value:$,icon:se,color:ie})=>s.jsxs("div",{className:"p-4 sm:p-6 bg-white dark:bg-slate-800 rounded-xl shadow-md flex items-center space-x-4 rtl:space-x-reverse",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:`p-3 bg-${ie}-100 dark:bg-${ie}-900/40 rounded-full`,children:s.jsx(se,{className:`h-6 w-6 text-${ie}-600 dark:text-${ie}-300`})})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg sm:text-xl font-medium text-black dark:text-white",children:$}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:R})]})]});return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("button",{onClick:n,className:"p-2 font-semibold text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-700 border border-gray-300 dark:border-gray-600 rounded-full shadow-sm hover:bg-gray-50 dark:hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-label":"العودة",children:s.jsx(Ss,{className:"h-5 w-5"})}),s.jsx("div",{children:s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r.name})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-8",children:[s.jsx(V,{title:"إجمالي تكاليف العلاج",value:`SYP ${f.totalCost.toFixed(2)}`,icon:gn,color:"red"}),s.jsx(V,{title:"إجمالي الإيرادات",value:`SYP ${f.totalPayments.toFixed(2)}`,icon:Ns,color:"green"}),s.jsx(V,{title:"المتبقي",value:`SYP ${f.balance.toFixed(2)}`,icon:rr,color:f.balance>0?"yellow":"blue"})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"سجل الدفعات"}),s.jsxs("button",{onClick:()=>z(!0),className:"flex items-center bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-primary-700 transition-colors",children:[s.jsx(Ve,{className:"h-5 w-5 ml-2"}),"إضافة دفعة"]})]}),b?s.jsx(st,{}):d.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-right text-sm text-gray-800 dark:text-gray-200",children:[s.jsx("thead",{className:"text-xs text-gray-700 dark:text-gray-300 uppercase bg-gray-100 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"التاريخ"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"المبلغ"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"الإجراءات"})]})}),s.jsx("tbody",{children:d.map(R=>s.jsxs("tr",{className:"bg-white dark:bg-slate-800 border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[s.jsx("td",{className:"px-6 py-4 font-medium",children:new Date(R.date).toLocaleDateString()}),s.jsxs("td",{className:"px-6 py-4 font-bold text-green-600 dark:text-green-400",children:["SYP ",R.amount.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 flex justify-end items-center gap-2",children:[s.jsx("button",{onClick:()=>M(R),className:"p-2 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40 text-blue-600 dark:text-blue-400",title:"تعديل",children:s.jsx(_t,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>k(R),className:"p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 text-red-600 dark:text-red-400",title:"حذف",children:s.jsx(Ze,{className:"h-5 w-5"})})]})]},R.id))})]})}):s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"لا توجد دفعات مسجلة لهذا المريض."})]}),S&&s.jsx(Bb,{patient:r,onSave:L,onClose:()=>z(!1)}),j&&s.jsx(Qb,{payment:j,onSave:T,onClose:()=>M(null),patientName:r.name}),y&&s.jsx(qb,{title:"حذف الدفعة",message:`هل أنت متأكد من حذف دفعة بقيمة SYP ${y.amount.toFixed(2)}؟`,onConfirm:C,onCancel:()=>!v&&k(null),isDeleting:v})]})},Fb=({onConfirm:r,onCancel:n,title:c,message:d,isDeleting:u})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity",onClick:n,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-sm transform transition-all",role:"dialog",onClick:f=>f.stopPropagation(),children:[s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30",children:s.jsx(Ze,{className:"h-6 w-6 text-red-600 dark:text-red-400","aria-hidden":"true"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mt-4",children:c}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 px-4",children:d})]})}),s.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-2xl flex justify-center gap-4",children:[s.jsx("button",{type:"button",onClick:r,disabled:u,className:"w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-400 disabled:cursor-not-allowed",children:u?"جاري الحذف...":"نعم، قم بالحذف"}),s.jsx("button",{type:"button",onClick:n,disabled:u,className:"w-full rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"إلغاء"})]})]})}),Gb=({photo:r,patientId:n,onSave:c,onClose:d})=>{const u=!!r,[f,x]=g.useState([]),[b,p]=g.useState(u&&r?[r.imageUrl]:[]),[y,k]=g.useState(u&&r?[r.caption||""]:[]),[v,E]=g.useState(!1),[S,z]=g.useState(!1),j=nr.useRef(null),M="w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-800 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary text-black dark:text-white",D=H=>new Promise((P,I)=>{const Y=new FileReader;Y.readAsDataURL(H),Y.onload=()=>P(Y.result),Y.onerror=ce=>I(ce)}),L=H=>{if(!H)return;const P=Array.from(H).filter(Y=>Y.type.startsWith("image/"));if(P.length===0)return;const I=P.map(Y=>URL.createObjectURL(Y));u?(x(P.slice(0,1)),p(I.slice(0,1))):(x(Y=>[...Y,...P]),p(Y=>[...Y,...I]),k(Y=>[...Y,...new Array(P.length).fill("")]))},T=(H,P)=>{k(I=>{const Y=[...I];return Y[H]=P,Y})},C=H=>{u?(x([]),p([])):(x(P=>P.filter((I,Y)=>Y!==H)),p(P=>P.filter((I,Y)=>Y!==H)),k(P=>P.filter((I,Y)=>Y!==H)))},V=H=>L(H.target.files),R=H=>{H.preventDefault(),z(!0)},$=H=>{H.preventDefault(),z(!1)},se=H=>{H.preventDefault(),z(!1),L(H.dataTransfer.files)},ie=async H=>{if(H.preventDefault(),b.length===0){alert("يرجى رفع صورة واحدة على الأقل.");return}if(f.length===0&&!u){alert("يرجى رفع صورة واحدة على الأقل.");return}E(!0);try{if(u&&r){let P=r.imageUrl;f.length>0&&(P=await D(f[0]));const I={...r,imageUrl:P,caption:y[0]||""};await c(I)}else{const P=await Promise.all(f.map(Y=>D(Y)));await c({patientId:n,imageUrls:P,captions:y})}}catch(P){console.error("Failed to save photos",P);const I=P instanceof Error?P.message:"خطأ غير معروف";alert(`فشل الحفظ: ${I}`)}finally{E(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:d,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-2xl",role:"dialog",onClick:H=>H.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:u?"تعديل الصورة":"إضافة صور جديدة"}),s.jsx("button",{onClick:d,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"إغلاق",children:s.jsx(Ke,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("form",{onSubmit:ie,children:[s.jsx("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:u?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"الصورة"}),s.jsxs("div",{className:"w-full h-48 border-2 border-dashed rounded-lg flex justify-center items-center cursor-pointer transition-colors hover:border-primary",onClick:()=>{var H;return(H=j.current)==null?void 0:H.click()},children:[s.jsx("input",{type:"file",ref:j,onChange:V,accept:"image/*",className:"hidden"}),b.length>0?s.jsx("img",{src:b[0],alt:"معاينة",className:"max-h-full max-w-full object-contain rounded-md"}):s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[s.jsx(Ji,{className:"h-12 w-12 mx-auto"}),s.jsx("p",{children:"انقر لتغيير الصورة"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{htmlFor:"caption",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"تعليق"}),s.jsx("textarea",{id:"caption",value:y[0]||"",onChange:H=>T(0,H.target.value),rows:3,className:M,placeholder:"أضف تعليقًا وصفيًا..."})]})]}):s.jsxs("div",{children:[b.length>0&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:b.map((H,P)=>s.jsxs("div",{className:"relative group border dark:border-gray-600 rounded-lg p-2 space-y-2 bg-gray-50 dark:bg-gray-900",children:[s.jsx("img",{src:H,alt:`معاينة ${P+1}`,className:"w-full h-32 object-cover rounded-md"}),s.jsx("textarea",{value:y[P]||"",onChange:I=>T(P,I.target.value),placeholder:`تعليق الصورة ${P+1}`,rows:2,className:M}),s.jsx("button",{type:"button",onClick:()=>C(P),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity focus:opacity-100","aria-label":`Remove image ${P+1}`,children:s.jsx(Ke,{className:"h-4 w-4"})})]},P))}),s.jsxs("div",{className:`w-full h-32 border-2 border-dashed rounded-lg flex flex-col justify-center items-center cursor-pointer transition-colors ${S?"border-primary bg-primary-50 dark:bg-primary-900/20":"border-gray-300 dark:border-gray-600 hover:border-primary"}`,onDragOver:R,onDragLeave:$,onDrop:se,onClick:()=>{var H;return(H=j.current)==null?void 0:H.click()},children:[s.jsx("input",{type:"file",ref:j,onChange:V,accept:"image/*",className:"hidden",multiple:!0}),s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[s.jsx(Ji,{className:"h-12 w-12 mx-auto"}),s.jsx("p",{children:"اسحب وأفلت الصور هنا، أو انقر للاختيار"})]})]})]})}),s.jsxs("div",{className:"flex justify-end items-center p-4 bg-gray-50 dark:bg-slate-700/50 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary-700 disabled:bg-primary-300 mr-2",children:v?"جاري الحفظ...":"حفظ"})]})]})]})})},Xb=({imageUrl:r,onClose:n})=>{const[c,d]=g.useState(1),[u,f]=g.useState({x:0,y:0}),[x,b]=g.useState(!1),[p,y]=g.useState({x:0,y:0}),k=g.useRef(null),v=R=>{R.preventDefault();const $=R.deltaY>0?c/1.1:c*1.1;d(Math.min(Math.max(.5,$),5))},E=R=>{R.button===0&&(R.preventDefault(),b(!0),y({x:R.clientX-u.x,y:R.clientY-u.y}))},S=R=>{x&&(R.preventDefault(),f({x:R.clientX-p.x,y:R.clientY-p.y}))},z=()=>{b(!1)},j=()=>{d(1),f({x:0,y:0})},M=()=>d(R=>Math.min(R*1.2,5)),D=()=>d(R=>Math.max(R/1.2,.5)),L=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),T=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 12H6"})}),C=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.664 0l3.181-3.183m-11.664 0l-3.181-3.183a8.25 8.25 0 0111.664 0l3.181 3.183"})}),V=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})});return s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-80 z-[100] flex justify-center items-center",onClick:n,onMouseMove:S,onMouseUp:z,children:[s.jsx("div",{className:"relative w-full h-full flex justify-center items-center overflow-hidden",onWheel:v,onClick:R=>R.stopPropagation(),children:s.jsx("img",{ref:k,src:r,alt:"Full screen view",className:"max-w-none max-h-none transition-transform duration-100",style:{transform:`translate(${u.x}px, ${u.y}px) scale(${c})`,cursor:x?"grabbing":"grab"},onMouseDown:E,onMouseLeave:z})}),s.jsx("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:s.jsx("button",{onClick:n,className:"p-2 bg-gray-800 bg-opacity-50 text-white rounded-full hover:bg-opacity-75 focus:outline-none",children:s.jsx(V,{})})}),s.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-2 p-2 bg-gray-800 bg-opacity-50 text-white rounded-full",children:[s.jsx("button",{onClick:D,className:"p-2 hover:bg-gray-700 rounded-full focus:outline-none",children:s.jsx(T,{})}),s.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-700 rounded-full focus:outline-none",children:s.jsx(C,{})}),s.jsx("button",{onClick:M,className:"p-2 hover:bg-gray-700 rounded-full focus:outline-none",children:s.jsx(L,{})})]})]})},Vb=({patient:r,onBack:n,refreshTrigger:c})=>{const[d,u]=g.useState([]),[f,x]=g.useState(!0),[b,p]=g.useState(!1),[y,k]=g.useState(null),[v,E]=g.useState(null),[S,z]=g.useState(!1),[j,M]=g.useState(null),D=g.useCallback(async()=>{x(!0);const C=await ae.patientPhotos.getAll();u(C.filter(V=>V.patientId===r.id).sort((V,R)=>new Date(R.date).getTime()-new Date(V.date).getTime())),x(!1)},[r.id]);g.useEffect(()=>{D()},[D,c]);const L=async C=>{"id"in C?await ae.patientPhotos.update(C.id,C):await ae.patientPhotos.create(C),p(!1),k(null),await D()},T=async()=>{if(v){z(!0);try{await ae.patientPhotos.delete(v.id),E(null),await D()}catch(C){alert(`فشل في حذف الصورة: ${C instanceof Error?C.message:"خطأ غير معروف"}`)}finally{z(!1)}}};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:n,className:"p-2 font-semibold text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-700 border border-gray-300 dark:border-gray-600 rounded-full shadow-sm hover:bg-gray-50 dark:hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-label":"العودة",children:s.jsx(Ss,{className:"h-5 w-5"})}),s.jsx("div",{children:s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r.name})})]}),s.jsxs("button",{onClick:()=>p(!0),className:"hidden lg:flex items-center bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-primary-700 transition-colors",children:[s.jsx(Ve,{className:"h-5 w-5 ml-2"}),"إضافة صورة"]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md min-h-[200px]",children:f?s.jsx(st,{}):d.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:d.map(C=>s.jsxs("div",{className:"border bg-gray-50 dark:bg-gray-800 dark:border-gray-700 rounded-lg overflow-hidden shadow-sm hover:shadow-xl transition-shadow",children:[s.jsx("img",{src:C.imageUrl,alt:C.caption,className:"w-full h-48 object-cover cursor-pointer",onClick:()=>M(C.imageUrl)}),s.jsxs("div",{className:"p-4",children:[s.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:C.caption||"بدون تعليق"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(C.date).toLocaleDateString()}),s.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>k(C),className:"p-2 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40 text-blue-600 dark:text-blue-400",title:"تعديل",children:s.jsx(_t,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>E(C),className:"p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 text-red-600 dark:text-red-400",title:"حذف",children:s.jsx(Ze,{className:"h-5 w-5"})})]})]})]},C.id))}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Ji,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:"لا توجد صور"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"ابدأ بإضافة أول صورة لهذا المريض."})]})}),s.jsx("button",{onClick:()=>p(!0),className:"lg:hidden fixed bottom-20 right-4 bg-primary text-white p-4 rounded-full shadow-lg hover:bg-primary-700 transition-colors z-20","aria-label":"إضافة صورة",children:s.jsx(Ve,{className:"h-6 w-6"})}),(b||y)&&s.jsx(Gb,{photo:y||void 0,patientId:r.id,onClose:()=>{p(!1),k(null)},onSave:L},(y==null?void 0:y.id)||"add"),v&&s.jsx(Fb,{title:"حذف الصورة",message:"هل أنت متأكد من رغبتك في حذف هذه الصورة؟ لا يمكن التراجع عن هذا الإجراء.",onConfirm:T,onCancel:()=>!S&&E(null),isDeleting:S}),j&&s.jsx(Xb,{imageUrl:j,onClose:()=>M(null)})]})},Zb=({patient:r,onBack:n,refreshTrigger:c})=>{const[d,u]=g.useState([]),[f,x]=g.useState(!0),b=g.useCallback(async()=>{x(!0);const y=await ae.activityLogs.getAll({page:1,per_page:9999});u(y.logs.filter(k=>k.patientId===r.id).sort((k,v)=>new Date(v.timestamp).getTime()-new Date(k.timestamp).getTime())),x(!1)},[r.id]);g.useEffect(()=>{b()},[b,c]);const p=({action:y})=>{const k={className:"h-5 w-5"};switch(y){case sl.Create:return s.jsx("div",{className:"bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400 rounded-full p-2",children:s.jsx(Ve,{...k})});case sl.Update:return s.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-400 rounded-full p-2",children:s.jsx(_t,{...k})});case sl.Delete:return s.jsx("div",{className:"bg-red-100 dark:bg-red-900/40 text-red-600 dark:text-red-400 rounded-full p-2",children:s.jsx(Ze,{...k})});default:return null}};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("button",{onClick:n,className:"p-2 font-semibold text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-700 border border-gray-300 dark:border-gray-600 rounded-full shadow-sm hover:bg-gray-50 dark:hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-label":"العودة",children:s.jsx(Ss,{className:"h-5 w-5"})}),s.jsx("div",{children:s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r.name})})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md min-h-[200px]",children:f?s.jsx(st,{}):d.length>0?s.jsx("div",{className:"space-y-4",children:d.map(y=>s.jsxs("div",{className:"flex items-start space-x-4 rtl:space-x-reverse p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[s.jsx(p,{action:y.actionType}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:y.description}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["بواسطة ",y.userName," • ",new Date(y.timestamp).toLocaleString("ar-SA",{dateStyle:"medium",timeStyle:"short"})]})]})]},y.id))}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Xd,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:"لا يوجد سجل نشاط"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"لم يتم تسجيل أي نشاط لهذا المريض بعد."})]})})]})},ag=new ap,Kb=()=>{const{user:r,isLoading:n}=ir(),[c,d]=g.useState("dashboard"),[u,f]=g.useState(0),[x,b]=g.useState(null),[p,y]=g.useState([]);g.useEffect(()=>{(async()=>{if(r){const C=await ae.doctors.getAll();y(C)}})()},[r,u]);const k=()=>{ag.invalidateQueries(),ae.cache.invalidateAll(),f(T=>T+1)},v=T=>{b(null),d(T)},E=T=>{b(T),d("sessions")},S=T=>{b(T),d("plan")},z=T=>{b(T),d("details")},j=T=>{b(T),d("financial")},M=T=>{b(T),d("photos")},D=T=>{b(T),d("activity")};if(n)return s.jsx(st,{containerClassName:"min-h-screen"});if(!r)return s.jsx(Rp,{});const L=()=>{const T={user:r,onViewSessions:E,onViewPlan:S,onViewDetails:z,onViewFinancial:j,onViewPhotos:M,onViewActivity:D},C=s.jsx(Nh,{...T});switch(c){case"dashboard":return s.jsx(jh,{user:r,refreshTrigger:u});case"patients":return s.jsx(Nh,{...T});case"sessions":return x?s.jsx(Ub,{patient:x,user:r,onBack:()=>v("patients"),refreshTrigger:u}):C;case"plan":return x?s.jsx(Lb,{patient:x,user:r,onBack:()=>v("patients"),doctors:p,refreshTrigger:u}):C;case"details":return x?s.jsx(Hb,{patient:x,doctors:p,onBack:()=>v("patients"),refreshTrigger:u}):C;case"financial":return x?s.jsx(Yb,{patient:x,onBack:()=>v("patients"),refreshTrigger:u}):C;case"photos":return x?s.jsx(Vb,{patient:x,onBack:()=>v("patients"),refreshTrigger:u}):C;case"activity":return x?s.jsx(Zb,{patient:x,onBack:()=>v("patients"),refreshTrigger:u}):C;case"users":return r.role===ne.Admin||r.role===ne.SubManager?s.jsx(yb,{refreshTrigger:u}):s.jsx("div",{children:"الوصول مرفوض"});case"appointments":return s.jsx(tg,{user:r,refreshTrigger:u});case"payments":return r.role===ne.Admin||r.role===ne.Secretary||r.role===ne.SubManager?s.jsx(wb,{user:r,refreshTrigger:u}):s.jsx("div",{children:"الوصول مرفوض"});case"statistics":return r.role===ne.Admin||r.role===ne.SubManager?s.jsx(Nb,{refreshTrigger:u}):s.jsx("div",{children:"الوصول مرفوض"});case"schedule":return r.role===ne.Doctor?s.jsx(Wh,{user:r,refreshTrigger:u}):s.jsx("div",{children:"الوصول مرفوض"});case"profile":return s.jsx(Tb,{refreshTrigger:u});default:return s.jsx(jh,{user:r,refreshTrigger:u})}};return s.jsx(tb,{user:r,currentPage:c,setCurrentPage:v,onRefresh:k,children:L()})},Ib=()=>s.jsx(lp,{client:ag,children:s.jsx(Cp,{children:s.jsx(kp,{children:s.jsx(Tp,{children:s.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen",children:s.jsx(Kb,{})})})})})}),sg=document.getElementById("root");if(!sg)throw new Error("Could not find root element to mount to");const Jb=_y.createRoot(sg);Jb.render(s.jsx(nr.StrictMode,{children:s.jsx(Ib,{})}));
